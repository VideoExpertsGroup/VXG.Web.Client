// CloudSDK.min.js
// version: 3.2.1
// date-of-build: 221220
// copyright (c) VXG Inc
// Includes gl-matrix  <https://github.com/toji/gl-matrix>
// ver: 3.3.0 // Available under MIT License 
// <https://github.com/toji/gl-matrix/blob/master/LICENSE.md> 
// Includes rangeslider.js <https://github.com/andreruffert/rangeslider.js>
// Available under MIT License 
// <https://github.com/andreruffert/rangeslider.js/blob/develop/LICENSE.md> 
// Includes momentjs  <https://github.com/moment/moment/>
// ver: 2.29.1// Available under MIT License 
// <https://github.com/moment/moment/blob/develop/LICENSE> 
// Includes moment-timezone <https://github.com/moment/moment-timezone/>
// ver: 0.5.32// Available under MIT License 
// <https://github.com/moment/moment-timezone/blob/develop/LICENSE>

window.Log=function(e){var t=this;t.mElementID=e,t.el=document.getElementById(e),t.el&&(t.el.innerHTML='<div class="logger-line">Start</div>'),t.escape=function(e){if(void 0===e)return"undefined";for(var t=e="object"==typeof e?JSON.stringify(e):e,a=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/"/g,"&quot;"]],n=0;n<a.length;n++)t=t.replace(a[n][0],a[n][1]);return t},t.info=function(e){console.log(e),t.el&&(t.el.innerHTML+='<div class="logger-line info">'+t.escape(e)+"</div>")},t.error=function(e){console.error(e),t.el&&(t.el.innerHTML+='<div class="logger-line error">'+t.escape(e)+"</div>")},t.warn=function(e){console.warn(e),t.el&&(t.el.innerHTML+='<div class="logger-line warn">'+t.escape(e)+"</div>")}},window.CloudHelpers=window.CloudHelpers||{},CloudHelpers.POSITION_LIVE=-1,window.CloudHelpers.RequestWrap=function(){this.request=function(e){var a=CloudHelpers.promise(),n=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);return n.open(e.type,e.url,!0),n.withCredentials=!0,e.contentType&&n.setRequestHeader("Content-Type",e.contentType),e.access_token&&n.setRequestHeader("Authorization","Acc "+e.access_token),n.onload=function(){var e="";if(""!=this.responseText)try{e=JSON.parse(this.responseText)}catch(e){return console.error(e),void a.reject(CloudReturnCode.ERROR_WRONG_RESPONSE)}var t=this.status;200<=t&&t<300?a.resolve(e):a.reject(e),delete n},n.onerror=function(){a.reject(n),delete n},e.data?n.send(e.data):n.send(),a},this.destroy=function(){this.isRequestAnswerAlowed=0}},CloudHelpers.parseUri=function(e){var t={},a=(t.source=e).split("/");t.protocol=a[0],t.protocol=t.protocol.slice(0,t.protocol.length-1),t.protocol=t.protocol.toLowerCase(),e=e.slice(t.protocol.length+3),"http"==t.protocol&&(t.port=80),"https"==t.protocol&&(t.port=443);var n=-1!=(n=e.indexOf("/"))?n:e.length,a=-1!=(a=e.indexOf("?"))?a:e.length,a=Math.min(n,a),o=e.substring(0,a);e=e.slice(a);for(var r,i="";-1!=o.indexOf("@");)i+=o.substring(0,o.indexOf("@")+1),o=o.slice(o.indexOf("@")+1);return""!=i&&(-1!=i.indexOf(":")?(r=i.split(":"),t.user=r[0],t.password=r[1],t.password=t.password.substring(0,t.password.length-1)):t.user=i),-1==o.indexOf(":")||(r=new RegExp(".*:(\\d+)$","g").exec(o))&&1<r.length&&(t.port=parseInt(r[1],10),o=o.slice(0,o.length-r[1].length-1)),t.host=o,-1!=e.indexOf("?")?(t.query=e.substring(e.indexOf("?"),e.length),t.path=e.substring(0,e.indexOf("?"))):(t.query="",t.path=e),t.path&&""!=t.path||(t.path="/"),t},CloudHelpers.promise=function(){var t={completed:!1,failed:!1,successed:!1,done:function(e){return t.done_callback=e,t.completed&&"function"==typeof t.done_callback&&t.successed&&t.done_callback.apply(this,t.result_arguments),t},fail:function(e){return t.fail_callback=e,t.completed&&"function"==typeof t.fail_callback&&t.failed&&t.fail_callback.apply(this,t.error_arguments),t},resolve:function(){t.completed||(t.result_arguments=arguments,"function"==typeof t.done_callback&&t.done_callback.apply(this,t.result_arguments)),t.successed=!0,t.completed=!0},reject:function(){t.completed||(t.error_arguments=arguments,"function"==typeof t.fail_callback&&t.fail_callback.apply(this,t.error_arguments)),t.failed=!0,t.completed=!0}};return t},CloudHelpers.waitPromises=function(e){var t=CloudHelpers.promise(),a=e.length,n=[];function o(e){n.push(e),n.length==a&&t.resolve(n)}for(var r=0;r<a;r++)e[r].done(o).fail(o);return t},CloudHelpers.request=function(e){var a=CloudHelpers.promise(),n=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);return n.open(e.type,e.url,!0),n.withCredentials=!0,e.contentType&&n.setRequestHeader("Content-Type",e.contentType),n.onload=function(){var e="";if(""!=this.responseText)try{e=JSON.parse(this.responseText)}catch(e){return console.error(e),void a.reject(CloudReturnCode.ERROR_WRONG_RESPONSE)}var t=this.status;200<=t&&t<300?a.resolve(e):a.reject(e),delete n},n.onerror=function(){a.reject(n),delete n},e.data?n.send(e.data):n.send(),a},CloudHelpers.request2=function(e){var a=CloudHelpers.promise(),n=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);return n.open(e.type,e.url,!0),n.withCredentials=!0,e.contentType&&n.setRequestHeader("Content-Type",e.contentType),e.access_token&&n.setRequestHeader("Authorization","Acc "+e.access_token),e.license_key&&n.setRequestHeader("Authorization","Lic "+e.license_key),n.onload=function(){var e="";if(""!=this.responseText)try{e=JSON.parse(this.responseText)}catch(e){return console.error(e),void a.reject(CloudReturnCode.ERROR_WRONG_RESPONSE)}var t=this.status;200<=t&&t<300?a.resolve(e):a.reject(e),delete n},n.onerror=function(){a.reject(n),delete n},e.data?n.send(e.data):n.send(),a},CloudHelpers.requestJS=function(url,beforeEval){var p=CloudHelpers.promise(),xhr=new("onload"in new XMLHttpRequest?XMLHttpRequest:XDomainRequest);return xhr.open("GET",url,!0),xhr.onload=function(){var r="";if(""!=this.responseText)try{r=this.responseText}catch(e){return console.error(e),void p.reject(CloudReturnCode.ERROR_WRONG_RESPONSE)}var st=this.status;200<=st&&st<300?(beforeEval&&(r=beforeEval(r)),eval(r),p.resolve(r)):p.reject(r),delete xhr},xhr.onerror=function(){p.reject(xhr),delete xhr},xhr.send(),p},CloudHelpers.handleError=function(e,t,a){e.errorDetail&&404==e.status?t.reject(CloudReturnCode.ERROR_NOT_FOUND):e.errorDetail&&401==e.status?t.reject(CloudReturnCode.ERROR_NOT_AUTHORIZED):a?a(e,t):t.reject(e)},CloudHelpers.requestAsyncList=function(n,o,r){var i={meta:{limit:1e3,offset:0,total_count:-1},objects:[]};o.limit=i.meta.limit,o.offset=i.meta.offset,n(o).fail(function(e){r.reject(e)}).done(function(e){if(i.meta.total_count=e.meta.total_count,i.objects=i.objects.concat(e.objects),e.meta.offset+e.objects.length>=e.meta.total_count)r.resolve(i);else{for(var t=[],a=i.meta.limit;a<i.meta.total_count;a+=i.meta.limit)o.offset=a,t.push(n(o));CloudHelpers.waitPromises(t).done(function(e){for(var t=0;t<e.length;t++)i.objects=i.objects.concat(e[t].objects);r.resolve(i)}).fail(function(e){r.reject(e)})}})},CloudHelpers.flashVersion=void 0,CloudHelpers.getFlashVersion=function(){try{try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{e.AllowScriptAccess="always"}catch(e){return"6,0,0"}}catch(e){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){}}return"0,0,0"},CloudHelpers.supportFlash=function(){return CloudHelpers.flashVersion||(CloudHelpers.flashVersion=CloudHelpers.getFlashVersion()),"0,0,0"!=CloudHelpers.flashVersion},CloudHelpers.useHls=function(){return CloudHelpers.isMobile()||!CloudHelpers.supportFlash()||CloudHelpers.containsPageParam("hls")},CloudHelpers.supportWebRTC=function(){return!!(window.mozRTCPeerConnection||window.webkitRTCPeerConnection||window.RTCPeerConnection)},CloudHelpers.mapToUrlQuery=function(e){if(!e)return"";var t,a=[];for(t in e)a.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return a.join("&")},CloudHelpers.lang=function(){return CloudHelpers.sLang||CloudHelpers.locale()},CloudHelpers.locale=function(){var e;return langs=["en","ko","ru"],CloudHelpers.sLang="en",CloudHelpers.containsPageParam("lang")&&-1<=langs.indexOf(CloudHelpers.pageParams.lang)?CloudHelpers.sLang=CloudHelpers.pageParams.lang:navigator?(e="en",e=navigator.language?navigator.language.substring(0,2):e,e=navigator.browserLanguage?navigator.browserLanguage.substring(0,2):e,e=navigator.systemLanguage?navigator.systemLanguage.substring(0,2):e,e=navigator.userLanguage?navigator.userLanguage.substring(0,2):e,-1<=langs.indexOf(e)?CloudHelpers.sLang=e:console.warn("Unsupported lang "+e+", will be used default lang: "+CloudHelpers.sLang),CloudHelpers.sLang=-1<=langs.indexOf(e)?e:CloudHelpers.sLang):CloudHelpers.sLang="en",CloudHelpers.sLang},CloudHelpers.parsePageParams=function(){for(var e=window.location.search.slice(1).split("&"),t={},a=new RegExp("(.*)=([^&#]*)"),n=0;n<e.length;n++)""!=e[n].trim()&&(p=a.exec(e[n].trim()),null==p?t[decodeURIComponent(e[n].trim().replace(/\+/g," "))]="":t[decodeURIComponent(p[1].replace(/\+/g," "))]=decodeURIComponent(p[2].replace(/\+/g," ")));return t},CloudHelpers.pageParams=CloudHelpers.parsePageParams(),CloudHelpers.containsPageParam=function(e){return void 0!==CloudHelpers.pageParams[e]},CloudHelpers.keepParams=["lang","url","fcno","vendor","demo","messaging","hls","svcp_host","backwardDeactivateAfter","mobile","experimental_hls","page_id","preview","customswf"],CloudHelpers.changeLocationState=function(e){for(var t,a=[],n=0;n<CloudHelpers.keepParams.length;n++){var o=CloudHelpers.keepParams[n];CloudHelpers.containsPageParam(o)&&a.push(o+"="+encodeURIComponent(CloudHelpers.pageParams[o]))}for(t in e)a.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));var r=("file:"==window.location.protocol?"http:":window.location.protocol)+"//"+window.location.host+window.location.pathname+"?"+a.join("&");try{window.history.pushState?window.history.pushState(e,document.title,r):console.error("window.history.pushState - function not found")}catch(e){console.error("changeLocationState: Could not change location to "+r)}},CloudHelpers.osname=function(){var e="unknown";return-1!=navigator.appVersion.indexOf("Win")&&(e="win"),-1!=navigator.appVersion.indexOf("Mac")&&(e="mac"),-1!=navigator.appVersion.indexOf("X11")&&(e="unix"),e=-1!=navigator.appVersion.indexOf("Linux")?"linux":e},CloudHelpers.isSafari=function(){var e=-1<window.navigator.userAgent.toLowerCase().indexOf("chrome"),t=-1<window.navigator.userAgent.toLowerCase().indexOf("safari");return!e&&t},CloudHelpers.isEdge=function(){return-1<window.navigator.userAgent.indexOf("Edge")},CloudHelpers.isChrome=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)},CloudHelpers.isMobile=function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},CloudHelpers.isIpV4=function(e){return null!=e.match(/^([0-9]{1,3}\.){3}[0-9]{1,3}/)},CloudHelpers.parseUTCTime=function(e){var t=(e=(e=(e=e.replace(new RegExp("-","g")," ")).replace(new RegExp("T","g")," ")).replace(new RegExp(":","g")," ")).split(" "),e=new Date;e.setUTCFullYear(parseInt(t[0],10)),e.setUTCMonth(parseInt(t[1],10)-1),e.setUTCDate(parseInt(t[2],10)),e.setUTCHours(parseInt(t[3],10)),e.setUTCMinutes(parseInt(t[4],10)),e.setUTCSeconds(parseInt(t[5],10));e=e.getTime();return e-=e%1e3},CloudHelpers.formatUTCTime=function(e){var t=new Date;return t.setTime(e),t.getUTCFullYear()+"-"+("00"+(t.getUTCMonth()+1)).slice(-2)+"-"+("00"+t.getUTCDate()).slice(-2)+"T"+("00"+t.getUTCHours()).slice(-2)+":"+("00"+t.getUTCMinutes()).slice(-2)+":"+("00"+t.getUTCSeconds()).slice(-2)},CloudHelpers.readableFormatUTCTime=function(e){var t=new Date;return t.setTime(e),t.getUTCFullYear()+"/"+("00"+(t.getUTCMonth()+1)).slice(-2)+"/"+("00"+t.getUTCDate()).slice(-2)+" "+("00"+t.getUTCHours()).slice(-2)+":"+("00"+t.getUTCMinutes()).slice(-2)+":"+("00"+t.getUTCSeconds()).slice(-2)},CloudHelpers.ONE_SECOND=1e3,CloudHelpers.ONE_MINUTE=6e4,CloudHelpers.ONE_HOUR=36e5,CloudHelpers.getCurrentTimeUTC=function(){return Date.now()},CloudHelpers.isLocalFile=function(){return"https:"!=window.location.protocol&&"http:"!=window.location.protocol},CloudHelpers.combineURL=function(e,t,a){""==t&&(t=void 0),""==a&&(a=void 0);var n=CloudHelpers.parseUri(e),e=n.protocol+"://";return(t||a)&&(e+=t,a&&(e+=":"+a),e+="@"),e+=n.host+(""!=n.port?":"+n.port:"")+n.path},CloudHelpers.validIpV4=function(e){for(var t=e.split("."),a=0;a<4;a++){var n=parseInt(t[a],10);if(n<0||255<n)return!1}return!0},CloudHelpers.convertIpV4ToInt=function(e){for(var t=e.split("."),a=0,n=1,o=3;0<=o;o--)a+=parseInt(t[o],10)*n,n*=256;return a},CloudHelpers.isValidHostID=function(e){e=CloudHelpers.parseUri(e);return"localhost"==e.host||(!(CloudHelpers.isIpV4(e.host)&&!CloudHelpers.validIpV4(e.host))||(console.error("Address "+e.host+" - invalid address"),!1))},CloudHelpers.isLocalUrlOrIP=function(e){e=CloudHelpers.parseUri(e);if("localhost"==e.host)return!0;if(CloudHelpers.isIpV4(e.host)){if(!CloudHelpers.validIpV4(e.host))return console.error("Address "+e.host+" - invalid address"),!0;var t=CloudHelpers.convertIpV4ToInt(e.host),a=[];a.push({from:"127.0.0.0",to:"127.255.255.255",comment:"localhost addresses"});for(var n=0;n<a.length;n++){var o=CloudHelpers.convertIpV4ToInt(a[n].from),r=CloudHelpers.convertIpV4ToInt(a[n].to),i=a[n].comment;if(o<=t&&t<=r)return console.error(i),!0}}return!1},CloudHelpers.isPublicUrl=function(e){e=CloudHelpers.parseUri(e);if("localhost"==e.host)return!1;if(CloudHelpers.isIpV4(e.host)){if(!CloudHelpers.validIpV4(e.host))return console.error("Address "+e.host+" - invalid address"),!1;var t=CloudHelpers.convertIpV4ToInt(e.host),a=[];a.push({from:"10.0.0.0",to:"10.255.255.255",comment:"single class A network"}),a.push({from:"172.16.0.0",to:"172.31.255.255",comment:"16 contiguous class B network"}),a.push({from:"192.168.0.0",to:"192.168.255.255",comment:"256 contiguous class C network"}),a.push({from:"169.254.0.0",to:"169.254.255.255",comment:"Link-local address also refered to as Automatic Private IP Addressing"}),a.push({from:"127.0.0.0",to:"127.255.255.255",comment:"localhost addresses"});for(var n=0;n<a.length;n++){var o=CloudHelpers.convertIpV4ToInt(a[n].from),r=CloudHelpers.convertIpV4ToInt(a[n].to),i=a[n].comment;if(o<=t&&t<=r)return console.error(i),!1}}return!0},CloudHelpers.isFrame=function(){try{return window.self!==window.top}catch(e){return!0}},CloudHelpers.isIE=function(){var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("msie")||-1<e.indexOf("trident")},CloudHelpers.isFireFox=function(){return-1<navigator.userAgent.toLowerCase().indexOf("firefox")},CloudHelpers.isAndroid=function(){return!!navigator.userAgent.match(/Android/i)},CloudHelpers.isIOS=function(){return!!(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i))},CloudHelpers.isWindowsPhone=function(){return!!navigator.userAgent.match(/Windows Phone/i)},CloudHelpers.isBlackBerry=function(){return!!navigator.userAgent.match(/BlackBerry/i)},CloudHelpers.splitUserInfoFromURL=function(e){e=CloudHelpers.parseUri(e);return{url:e.protocol+"://"+e.host+(e.port?":"+e.port:"")+e.path,login:e.user,password:e.password}},CloudHelpers.getAbsolutePosition=function(e){var t={x:e.offsetLeft,y:e.offsetTop};return e.offsetParent&&(e=CloudHelpers.getAbsolutePosition(e.offsetParent),t.x+=e.x,t.y+=e.y),t},CloudHelpers.cache=CloudHelpers.cache||{},CloudHelpers.cache.timezones=CloudHelpers.cache.timezones||{},CloudHelpers.getOffsetTimezone=function(e){return moment?(null==CloudHelpers.cache.timezones[e]&&(t=new Date,e&&""!=e?(t="-"==(a=(n=moment(t).tz(e).format("Z"))[0])?-1:1,a=(n=a<"0"||"9"<a?n.substring(1):n).split(":"),n=t*(60*parseInt(a[0],10)+parseInt(a[1],10)),CloudHelpers.cache.timezones[e]=6e4*n):CloudHelpers.cache.timezones[e]=0),CloudHelpers.cache.timezones[e]):(console.warn("Requrired moment.js library"),0);var t,a,n},Number.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},CloudHelpers.autoPlayAllowed=!0,CloudHelpers.checkAutoplay=function(e){e=e||function(){};var t=new CloudHelpers.promise;t.done(function(){console.log("checkAutoplay: done"),e(CloudHelpers.autoPlayAllowed)}),t.fail(function(){console.log("checkAutoplay: waiting"),e(CloudHelpers.autoPlayAllowed)});var a=null,n=document.createElement("div");n.innerHTML="<video muted></video>",(n=n.children[0]).addEventListener("waiting",function(){console.log("checkAutoplay: waiting, ",a),null==a&&(CloudHelpers.autoPlayAllowed=!0,t.resolve(),n.parentNode.removeChild(n))},!1);var o=n.play(),r="";window.Promise&&(r=window.Promise.toString()),o&&-1!==r.indexOf("function Promise()")||-1!==r.indexOf("function ZoneAwarePromise()")?o.catch(function(e){if("NotAllowedError"==e.name)console.error("error.name:","NotAllowedError"),a=!1,CloudHelpers.autoPlayAllowed=a,t.reject();else if(t.reject(),"AbortError"!=e.name)throw console.error("checkAutoplay: happened something else"),e;n.parentNode&&n.parentNode.removeChild(n)}):(console.warn("checkAutoplay could not work in your browser"),t.reject(),e(CloudHelpers.autoPlayAllowed))},"undefined"!=typeof document&&CloudHelpers.checkAutoplay(function(e){console.log("checkautoplay: autoplay2 ",e)}),CloudHelpers.humanFileSize=function(e){if(e<1024)return e+" B";for(var t=-1;++t,1024<=(e/=1024););return e.toFixed(1)+" "+["kB","MB","GB","TB","PB","EB","ZB","YB"][t]},CloudHelpers.base64_encode=function(e){return window.btoa(e)},CloudHelpers.base64_decode=function(e){return window.atob(e)},CloudHelpers.copy=function(e){if(null==e||"object"!=typeof e)return console.error("Expected object"),e;var t,a=e.constructor();for(t in e)e.hasOwnProperty(t)&&(a[t]=e[t]);return a},CloudHelpers.unpackAccessToken=function(e){var t={host:"web.skyvr.videoexpertsgroup.com"};try{var a=atob(e),a=JSON.parse(a);if(console.log("Token: ",a),!a.token)return console.error('Invalid access token format (missing "token")'),null;if(!a.access)return console.error('Invalid access token format (missing "access")'),null;a.token&&a.camid&&a.access&&""!==a.token&&""!==a.camid&&""!==a.access&&(t.share_token=a.token,t.camid=a.camid,t.access=a.access),a.api&&(t.host=a.api),a.api_p&&(t.api_port=a.api_p),a.api_security_port&&(t.api_security_port=a.api_security_port)}catch(e){return console.error("Invalid access token format"),null}if(t.base_url=t.host,"web.skyvr.videoexpertsgroup.com"==t.host)t.base_url="https://"+t.host;else if("https:"===location.protocol)t.base_url="https://"+t.host,null!=t.api_secutiry_port?(t.base_url+=":"+t.api_secutiry_port,t.port=t.api_secutiry_port):t.port=443;else{if("http:"!==location.protocol&&"file:"!==location.protocol)return console.error("Invalid protocol"),null;t.base_url="http://"+t.host,null!=self.api_port?(t.base_url+=":"+t.api_port,t.port=t.api_port):t.port=80}return t},CloudHelpers.createCallbacks=function(){return new function(){var n={};console.log(this);var a=this;a.executeCallbacks=function(e,t){for(var a in n)!function(e,t,a){setTimeout(function(){n[e](t,a)},1)}(a,e,t)},a.removeCallback=function(e){delete n[e]},a.addCallback=function(e,t){"function"==typeof t?(n[e]&&(console.warn(e+" - already registered callback, will be removed before add"),a.removeCallback(e)),n[e]=t):console.error("Second parameter expected function")}}},CloudHelpers.compareVersions=function(e,t){t=t||"0.0.0";var a=(e=e||"0.0.0").split("."),n=t.split(".");if(3==a.length&&3==n.length){for(var o=0;o<3;o++)if(a[o]=parseInt(a[o],10),n[o]=parseInt(n[o],10),a[o]!=n[o])return n[o]-a[o];return 0}console.error("[CloudHelpers.compareVersions] could not compare versions ",e,t)},window.CloudAPI=function(e,t){var i=this;i.token=e.token,i.token_expire=e.expire,i.token_expireUTC=Date.parse(e.expire+"Z"),i.host=t,i.token_type=e.type,i.requestWrap=new CloudHelpers.RequestWrap,i.isShareToken=function(){return"share"==i.token_type},i.endpoints={api:i.host+"api/v2/",cameras:i.host+"api/v2/cameras/",admin_cameras:i.host+"api/v2/admin/cameras/",camsess:i.host+"api/v2/camsess/",server:i.host+"api/v2/server/",account:i.host+"api/v2/account/",cmngrs:i.host+"api/v2/cmngrs/",storage:i.host+"api/v2/storage/",clips:i.host+"api/v2/storage/clips/",channels:i.host+"api/v3/channels/"},i.endpoints_v4={api:i.host+"api/v4/",live_watch:i.host+"api/v4/live/watch/",images:i.host+"api/v4/storage/images/"},i._getCloudToken=function(){return i.token},i.updateApiToken=function(){return i.requestWrap.request({url:i.endpoints.account+"token/api/",type:"GET",token:i._getCloudToken()})},i.isShareToken()||i.updateApiToken().done(function(e){console.warn("[CloudConnection] Cloud Token Api refreshed"),i.token=e.token,i.token_expire=e.expire,i.token_expireUTC=Date.parse(e.expire+"Z"),clearInterval(i.updateTokenInterval),i.updateTokenInterval=setInterval(function(){i.token_expireUTC-(new Date).getTime()<12e5?i.updateApiToken().done(function(e){console.warn("[CloudConnection] Cloud Token api refreshed"),i.token=e.token,i.token_expire=e.expire,i.token_expireUTC=Date.parse(e.expire+"Z")}):console.log("[CloudConnection] Cloud Token is live")},3e5)}),i.dispose=function(){delete i.requestWrap,i.token=null,clearInterval(i.updateTokenInterval)},i.createCamera=function(e){return i.requestWrap.request({url:i.endpoints.cameras+"?detail=detail",type:"POST",token:i._getCloudToken(),data:JSON.stringify(e),contentType:"application/json"})},i.camerasList=function(e){e=e||{},i.isShareToken()&&(e.token=i._getCloudToken());e=CloudHelpers.mapToUrlQuery(e);return i.requestWrap.request({url:i.endpoints.cameras+"?"+e,type:"GET",token:i._getCloudToken(),contentType:"application/json"})},i.getCameraList=i.camerasList,i.deleteCamera=function(e){return i.requestWrap.request({url:i.endpoints.cameras+e+"/",type:"DELETE",token:i._getCloudToken()})},i.getCamera=function(e,t){(t=t||{}).detail="detail",i.isShareToken()&&(t.token=i._getCloudToken());t=CloudHelpers.mapToUrlQuery(t);return i.requestWrap.request({url:i.endpoints.cameras+e+"/?"+t,type:"GET",token:i._getCloudToken()})},i.getCamera2=function(e,t){t=t||{},i.isShareToken()&&(t.token=i._getCloudToken());t=CloudHelpers.mapToUrlQuery(t);return i.requestWrap.request({url:i.endpoints.cameras+e+"/?"+t,type:"GET",token:i._getCloudToken()})},i.cameraUsage=function(e){return i.requestWrap.request({url:i.endpoints.cameras+e+"/usage/",type:"GET",token:i._getCloudToken()})},i.updateCamera=function(e,t){t=t||{},i.isShareToken()&&(t.token=i._getCloudToken());var a=CloudHelpers.mapToUrlQuery(t);return i.requestWrap.request({url:i.endpoints.cameras+e+"/?"+a,type:"PUT",token:i._getCloudToken(),data:JSON.stringify(t),contentType:"application/json"})},i.cameraLiveUrls=function(e){var t={},a=i.endpoints.cameras+e+"/live_urls/?";i.isShareToken()&&(t.token=i._getCloudToken(),a=i.endpoints_v4.live_watch+"?");e=CloudHelpers.mapToUrlQuery(t);return i.requestWrap.request({url:a+e,type:"GET",token:i._getCloudToken(),data:JSON.stringify(t)})},i.cameraBackwardUrls=function(e){var t={},a=i.endpoints.cameras+e+"/live_urls/?media_urls=webrtc_back,rtmp_back&";i.isShareToken()&&(t.token=i._getCloudToken());e=CloudHelpers.mapToUrlQuery(t);return i.requestWrap.request({url:a+e,type:"GET",token:i._getCloudToken(),data:JSON.stringify(t)})},i.cameraStreamUrls_webrtc=function(e){var t={},a=i.endpoints.cameras+e+"/stream_urls/?";t.proto="webrtc",i.isShareToken()&&(t.token=i._getCloudToken());e=CloudHelpers.mapToUrlQuery(t);return i.requestWrap.request({url:a+e,type:"GET",token:i._getCloudToken(),data:JSON.stringify(t)})},i.getServerTime=function(){var a=CloudHelpers.promise();return i.requestWrap.request({url:i.endpoints.api+"server/time/",type:"GET"}).done(function(e){var t=CloudHelpers.getCurrentTimeUTC();i.diffServerTime=Date.parse(e.utc+"Z")-t,a.resolve(e)}).fail(function(e){a.reject(e)}),a},i.getAccountInfo=function(){return i.requestWrap.request({url:i.endpoints.account,type:"GET",token:i._getCloudToken()})},i.getAccountCapabilities=function(){return i.requestWrap.request({url:i.endpoints.account+"capabilities/",type:"GET",token:i._getCloudToken()})},i.cameraMediaStreams=function(e){return i.requestWrap.request({url:i.endpoints.cameras+e+"/media_streams/",type:"GET",token:i._getCloudToken()})},i.updateCameraMediaStreams=function(e,t){return i.requestWrap.request({url:i.endpoints.cameras+e+"/media_streams/",type:"PUT",data:JSON.stringify(t),contentType:"application/json",token:i._getCloudToken()})},i.cameraPreview=function(e){var t={};i.isShareToken()&&(t.token=i._getCloudToken());t=CloudHelpers.mapToUrlQuery(t);return i.requestWrap.request({url:i.endpoints.cameras+e+"/preview/?"+t,type:"GET",token:i._getCloudToken()})},i.cameraUpdatePreview=function(e){var t={};i.isShareToken()&&(t.token=i._getCloudToken());t=CloudHelpers.mapToUrlQuery(t);return i.requestWrap.request({url:i.endpoints.cameras+e+"/preview/update/?"+t,type:"POST",token:i._getCloudToken()})},i.cameraSendPtz=function(e,t){t=t||{};var a={};i.isShareToken()&&(a.token=i._getCloudToken());a=CloudHelpers.mapToUrlQuery(a);return i.requestWrap.request({url:i.endpoints.cameras+e+"/send_ptz/?"+a,type:"POST",token:i._getCloudToken(),data:JSON.stringify(t),contentType:"application/json"})},i.cameraPtzExecute=function(e,t){t=t||{};var a={};i.isShareToken()&&(a.token=i._getCloudToken());a=CloudHelpers.mapToUrlQuery(a);return i.requestWrap.request({url:i.endpoints.cameras+e+"/ptz/execute/?"+a,type:"POST",token:i._getCloudToken(),data:JSON.stringify(t),contentType:"application/json"})},i.cameraPtz=function(e){var t={};i.isShareToken()&&(t.token=i._getCloudToken());t=CloudHelpers.mapToUrlQuery(t);return i.requestWrap.request({url:i.endpoints.cameras+e+"/ptz/?"+t,type:"GET",token:i._getCloudToken()})},i.cameraAudio=function(e){var t={};i.isShareToken()&&(t.token=i._getCloudToken());t=CloudHelpers.mapToUrlQuery(t);return i.requestWrap.request({url:i.endpoints.cameras+e+"/audio/?"+t,type:"GET",token:i._getCloudToken()})},i.storageRecords=function(e,t,a){var n=CloudHelpers.promise(),t={camid:e,limit:1e3,offset:0,start:t};return a&&(t.end=a),i.isShareToken()&&(t.token=i._getCloudToken()),CloudHelpers.requestAsyncList(function(e){return e=CloudHelpers.mapToUrlQuery(e),i.requestWrap.request({url:i.endpoints.storage+"data/?"+e,type:"GET",token:i._getCloudToken()})},t,n),n},i.storageRecordsFirst=function(e,t,a){CloudHelpers.promise();t={camid:e,limit:a,offset:0,start:t};t.limit=a,i.isShareToken()&&(t.token=i._getCloudToken());t=CloudHelpers.mapToUrlQuery(t);return i.requestWrap.request({url:i.endpoints.storage+"data/?"+t,type:"GET",token:i._getCloudToken()})},i.storageTimeline=function(e,t,a,n){n={start:t,end:a,slices:n};i.isShareToken()&&(n.token=i._getCloudToken());n=CloudHelpers.mapToUrlQuery(n);return i.requestWrap.request({url:i.endpoints.storage+"timeline/"+e+"/?"+n,type:"GET",token:i._getCloudToken()})},i.storageActivity=function(e,t){e={camid:e};t&&(e.daysincamtz=""),i.isShareToken()&&(e.token=i._getCloudToken());e=CloudHelpers.mapToUrlQuery(e);return i.requestWrap.request({url:i.endpoints.storage+"activity/?"+e,type:"GET",token:i._getCloudToken()})},i.resetCameraManager=function(e,t){return i.isShareToken()?(t=t||{},i.requestWrap.request({url:i.endpoints.cmngrs+e+"/reset/?token="+i._getCloudToken(),type:"POST",data:JSON.stringify(t),contentType:"application/json"})):(t=t||{},i.requestWrap.request({url:i.endpoints.cmngrs+e+"/reset/",type:"POST",token:i._getCloudToken(),data:JSON.stringify(t),contentType:"application/json"}))},i.updateCameraManager=function(e,t){return t=t||{},i.requestWrap.request({url:i.endpoints.cmngrs+e+"/",type:"PUT",token:i._getCloudToken(),data:JSON.stringify(t),contentType:"application/json"})},i.getCamsessList=function(e){e=CloudHelpers.mapToUrlQuery(e);return i.requestWrap.request({url:i.endpoints.camsess+"?"+e,type:"GET",token:i._getCloudToken(),contentType:"application/json"})},i.getCamsess=function(e){return i.requestWrap.request({url:i.endpoints.camsess+e+"/?detail=detail",type:"GET",token:i._getCloudToken(),contentType:"application/json"})},i.getCamsessRecords=function(e){return i.requestWrap.request({url:i.endpoints.camsess+e+"/records/",type:"GET",token:i._getCloudToken(),contentType:"application/json"})},i.deleteCamsess=function(e){return i.requestWrap.request({url:i.endpoints.camsess+e+"/",type:"DELETE",token:i._getCloudToken()})},i.creareCameraSharingToken=function(e,t,a){return t=t||"",i.requestWrap.request({url:i.endpoints.cameras+e+"/sharings/",type:"POST",data:JSON.stringify({camid:e,name:t,access:a}),contentType:"application/json",token:i._getCloudToken()})},i.updateCameraSharingToken=function(e,t,a){return(a=a||{}).camid=e,a.shid=t,i.requestWrap.request({url:i.endpoints.cameras+e+"/sharings/"+t+"/",type:"PUT",data:JSON.stringify(a),contentType:"application/json",token:i._getCloudToken()})},i.getCameraSharingTokensList=function(e){return i.requestWrap.request({url:i.endpoints.cameras+e+"/sharings/?detail=detail",type:"GET",token:i._getCloudToken()})},i.deleteCameraSharingToken=function(e,t){return i.requestWrap.request({url:i.endpoints.cameras+e+"/sharings/"+t+"/",type:"DELETE",token:i._getCloudToken()})},i.createClip=function(e,t,a,n,o,r){obj={},obj.camid=e,obj.source_camid=e,obj.start=a,obj.end=n,obj.wait_for_data=!0,void 0!==o&&(obj.delete_at=o);o={};return o.url=i.endpoints.clips,o.type="POST",o.data=JSON.stringify(obj),o.contentType="application/json",void 0!==r?o.access_token=r:o.token=i._getCloudToken(),i.requestWrap.request(o)},i.getClip=function(e,t){var a={};return a.url=i.endpoints.clips+e+"/",a.type="GET",void 0!==t?a.access_token=t:a.token=i._getCloudToken(),i.requestWrap.request(a)},i.getChannels=function(){return i.requestWrap.request({url:i.endpoints.channels,type:"GET",token:i._getCloudToken()})},i.getCameraStreamingURLs=function(e){return i.requestWrap.request({url:i.endpoints.cameras+e+"/stream_urls/",type:"GET",token:i._getCloudToken()})},i.cameraImages=function(e){var t={};i.isShareToken()&&(t.token=i._getCloudToken()),void 0!==e.start&&(t.start=e.start),void 0!==e.end&&(t.end=e.end),void 0!==e.order_by&&(t.order_by=e.order_by),void 0!==e.origin&&(t.origin=e.origin),void 0!==e.limit&&(t.limit=e.limit),void 0!==e.offset&&(t.offset=e.offset);var a=i.endpoints_v4.images+"?",e=CloudHelpers.mapToUrlQuery(t);return i.requestWrap.request({url:a+e,type:"GET",token:i._getCloudToken(),data:JSON.stringify(t)})}},window.SkyVR=window.CloudAPI,CloudAPI.config={url:"",url_cameras:"",url_api:"",cameraID:"",user_name:"",vendor:""},CloudAPI.setToCookie=function(e,t){var a=new Date((new Date).getTime()+6048e5);document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; path=/; expires="+a.toUTCString()},CloudAPI.getFromCookie=function(e){e=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):""},CloudAPI.removeFromCookie=function(e){document.cookie=encodeURIComponent(e)+"=; path=/;"},CloudAPI.cache={cameras:{},timezones:{}},CloudAPI.cache.cameraInfo=function(e){return e?CloudAPI.cache.cameras[e]:CloudAPI.isCameraID()?CloudAPI.cache.cameras[CloudAPI.cameraID()]:void 0},CloudAPI.cache.getCameraInfo=CloudAPI.cache.cameraInfo,CloudAPI.cache.mergeObjects=function(e,t){for(var a in t){var n=typeof t[a];"boolean"==n||"string"==n||"number"==n?e[a]!=t[a]&&(e[a]&&(console.log("Changed "+a),CloudAPI.events.trigger("CAMERA_INFO_CHANGED",{name:a,new_value:t[a]})),e[a]=t[a]):Array.isArray(t[a])?e[a]=t[a]:"object"==n&&(e[a]||(e[a]={}),e[a]=CloudAPI.cache.mergeObjects(e[a],t[a]))}return e},CloudAPI.cache.updateCameraInfo=function(e){var t=e.id;CloudAPI.cache.cameras[t]||(CloudAPI.cache.cameras[t]={}),CloudAPI.cache.cameras[t]=CloudAPI.cache.mergeObjects(CloudAPI.cache.cameras[t],e)},CloudAPI.cache.setCameraInfo=function(e){var t=e.id;null==CloudAPI.cache.cameras[t]&&(CloudAPI.cache.cameras[t]={});var a=!(!e.p2p_streaming||1!=e.p2p_streaming),n=CloudAPI.cache.cameras[t];return CloudAPI.cache.cameras[t]=CloudAPI.cache.mergeObjects(n,e),CloudAPI.cache.cameras[t].lastTimeUpdated=Date.now(),a},CloudAPI.cache.setP2PSettings=function(e,t){null==CloudAPI.cache.cameras[e]&&(CloudAPI.cache.cameras[e]={}),CloudAPI.cache.cameras[e].p2p=t,CloudAPI.cache.cameras[e].p2p_settings=CloudAPI.cache.cameras[e].p2p},CloudAPI.cache.setMemoryCard=function(e,t){null==CloudAPI.cache.cameras[e]&&(CloudAPI.cache.cameras[e]={}),CloudAPI.cache.cameras[e].memory_card=t},CloudAPI.cache.setPtzCaps=function(e,t){null==CloudAPI.cache.cameras[e]&&(CloudAPI.cache.cameras[e]={}),CloudAPI.cache.cameras[e].ptz=t},CloudAPI.cache.updateCameraAudio=function(e,t){CloudAPI.cache.cameras[e]||(CloudAPI.cache.cameras[e]={}),CloudAPI.cache.cameras[e].audio||(CloudAPI.cache.cameras[e].audio={}),CloudAPI.cache.cameras[e].audio=CloudAPI.cache.mergeObjects(CloudAPI.cache.cameras[e].audio,t)},CloudAPI.cache.cameraAudio=function(e){return e=e||CloudAPI.cameraID(),CloudAPI.cache.cameras[e]?CloudAPI.cache.cameras[e].audio:{}},CloudAPI.cache.updateCameraVideo=function(e,t){CloudAPI.cache.cameras[e]||(CloudAPI.cache.cameras[e]={}),CloudAPI.cache.cameras[e].video||(CloudAPI.cache.cameras[e].video={});var a=CloudAPI.cache.cameras[e].video;CloudAPI.cache.cameras[e].video=CloudAPI.cache.mergeObjects(a,t)},CloudAPI.cache.cameraVideo=function(e){return e=e||CloudAPI.cameraID(),CloudAPI.cache.cameras[e]?CloudAPI.cache.cameras[e].video:{}},CloudAPI.cache.cameraVideoStreamName=function(e){if(e=e||CloudAPI.cameraID(),!CloudAPI.cache.cameras[e])return{};var t=CloudAPI.cache.cameras[e].video;if(t.streams){e=0;if(e<t.streams.length)return v}},CloudAPI.cache.cameraVideoStreams=function(e){if(e=e||CloudAPI.cameraID(),!CloudAPI.cache.cameras[e])return{};e=CloudAPI.cache.cameras[e].video;return e.streams||void 0},CloudAPI.cache.setLimits=function(e,t){CloudAPI.cache.cameras[e]||(CloudAPI.cache.cameras[e]={}),CloudAPI.cache.cameras[e].limits=t},CloudAPI.cache.updateCameraVideoStream=function(e,t,a){CloudAPI.cache.cameras[e]||(CloudAPI.cache.cameras[e]={}),CloudAPI.cache.cameras[e].video||(CloudAPI.cache.cameras[e].video={}),CloudAPI.cache.cameras[e].video.streams||(CloudAPI.cache.cameras[e].video.streams={}),CloudAPI.cache.cameras[e].video.streams[t]||(CloudAPI.cache.cameras[e].video.streams[t]={});var n=CloudAPI.cache.cameras[e].video.streams[t];CloudAPI.cache.cameras[e].video.streams[t]=CloudAPI.cache.mergeObjects(n,a)},CloudAPI.cache.setAudioStream=function(e,t,a){CloudAPI.cache.cameras[e]||(CloudAPI.cache.cameras[e]={}),CloudAPI.cache.cameras[e].audio||(CloudAPI.cache.cameras[e].audio={}),CloudAPI.cache.cameras[e].audio.streams||(CloudAPI.cache.cameras[e].audio.streams={}),CloudAPI.cache.cameras[e].audio.streams[t]=a},CloudAPI.cache.setMediaStreams=function(e,t){CloudAPI.cache.cameras[e]||(CloudAPI.cache.cameras[e]={}),CloudAPI.cache.cameras[e].media_streams=t},CloudAPI.cache.updateEventProcessingEventsMotion=function(e,t){CloudAPI.cache.cameras[e]||(CloudAPI.cache.cameras[e]={}),CloudAPI.cache.cameras[e].event_processing||(CloudAPI.cache.cameras[e].event_processing={}),CloudAPI.cache.cameras[e].event_processing.events||(CloudAPI.cache.cameras[e].event_processing.events={}),CloudAPI.cache.cameras[e].event_processing.events.motion||(CloudAPI.cache.cameras[e].event_processing.events.motion={});var a=CloudAPI.cache.cameras[e].event_processing.events.motion;CloudAPI.cache.cameras[e].event_processing.events.motion=CloudAPI.cache.mergeObjects(a,t)},CloudAPI.cache.updateCameraEventProcessingEventsSound=function(e,t){CloudAPI.cache.cameras[e]||(CloudAPI.cache.cameras[e]={}),CloudAPI.cache.cameras[e].event_processing||(CloudAPI.cache.cameras[e].event_processing={}),CloudAPI.cache.cameras[e].event_processing.events||(CloudAPI.cache.cameras[e].event_processing.events={}),CloudAPI.cache.cameras[e].event_processing.events.sound||(CloudAPI.cache.cameras[e].event_processing.events.sound={});var a=CloudAPI.cache.cameras[e].event_processing.events.sound;CloudAPI.cache.cameras[e].event_processing.events.sound=CloudAPI.cache.mergeObjects(a,t)},CloudAPI.generateNewLocation=function(e){var t=[];return CloudHelpers.containsPageParam("lang")&&t.push("lang="+encodeURIComponent(CloudAPI.pageParams.lang)),CloudHelpers.containsPageParam("vendor")&&t.push("vendor="+encodeURIComponent(CloudAPI.pageParams.vendor)),CloudHelpers.containsPageParam("mobile")&&t.push("mobile="+encodeURIComponent(CloudAPI.pageParams.mobile)),t.push("p="+encodeURIComponent(e)),"?"+t.join("&")},CloudAPI.setURL=function(e){var t;CloudAPI.config.url!=e&&(CloudAPI.config.url=e,CloudAPI.config.url_api=e+"api/v2/",CloudAPI.config.url_cameras=e+"api/v2/cameras/",CloudAPI.config.url_admin_cameras=e+"api/v2/admin/cameras/",CloudAPI.config.url_camsess=e+"api/v2/camsess/",CloudAPI.config.url_server=e+"api/v2/server/",CloudAPI.config.url_account=e+"api/v2/account/",CloudAPI.config.url_cmngrs=e+"api/v2/cmngrs/",CloudAPI.config.url_storage=e+"api/v2/storage/",CloudAPI.config.url_clips=e+"api/v2/storage/clips/",CloudAPI.config.anonToken={token:"",type:"anon",expire:"",expireTimeUTC:0},void 0!==localStorage&&localStorage.getItem("SkyVR_anonToken")&&(CloudAPI.config.anonToken=JSON.parse(localStorage.getItem("SkyVR_anonToken"))),CloudAPI.config.apiToken={token:"",type:"api",expire:"",expireTimeUTC:0},CloudAPI.config.shareToken={},!(t=CloudAPI.getFromStorage("SkyVR_apiToken"))||(t=JSON.parse(t)).expireTimeUTC>Date.now()&&(CloudAPI.config.apiToken=t),CloudAPI.setToStorage("CloudAPI_svcp_host",e))},CloudAPI.isExpiredApiToken=function(){return!CloudAPI.config.apiToken.expireTimeUTC||!(CloudAPI.config.apiToken.expireTimeUTC>Date.now())},CloudAPI.applyApiToken=function(){$.ajaxSetup({crossDomain:!0,cache:!1,beforeSend:function(e,t){CloudAPI.config.apiToken&&CloudAPI.config.apiToken.token}})},CloudAPI.enable401handler=function(){},CloudAPI.disable401handler=function(){$.ajaxSetup({error:function(e,t,a){}})},CloudAPI.printStack=function(){var e=new Error;console.error(e.stack)},CloudAPI.PAGE_SIGNIN="signin",CloudAPI.hasAccess=function(e,t){if(SkyUI.isDemo())return!0;if(!e)return!1;if(!e.access)return!0;for(var a=!1,n=0;n<e.access.length;n++)e.access[n]==t&&(a=!0);return a},CloudAPI.hasAccessSettings=function(e){return!!SkyUI.isDemo()||(e=e||CloudAPI.cache.cameraInfo(),CloudAPI.hasAccess(e,"all"))},CloudAPI.hasAccessMotionDetection=function(e){return!!SkyUI.isDemo()||(e=e||CloudAPI.cache.cameraInfo(),CloudAPI.hasAccess(e,"all")||CloudAPI.hasAccess(e,"ptz"))},CloudAPI.hasAccessClips=function(e){return!!SkyUI.isDemo()||(e=e||CloudAPI.cache.cameraInfo(),CloudAPI.hasAccess(e,"clipping")||CloudAPI.hasAccess(e,"clipplay")||CloudAPI.hasAccess(e,"watch")||CloudAPI.hasAccess(e,"cplay")||CloudAPI.hasAccess(e,"all"))},CloudAPI.hasAccessLive=function(e){return!!SkyUI.isDemo()||(e=e||CloudAPI.cache.cameraInfo(),CloudAPI.hasAccess(e,"ptz")||CloudAPI.hasAccess(e,"live")||CloudAPI.hasAccess(e,"watch")||CloudAPI.hasAccess(e,"all"))},CloudAPI.hasAccessPlayback=function(e){return!!SkyUI.isDemo()||(e=e||CloudAPI.cache.cameraInfo(),CloudAPI.hasAccess(e,"clipping")||CloudAPI.hasAccess(e,"play")||CloudAPI.hasAccess(e,"watch")||CloudAPI.hasAccess(e,"splay")||CloudAPI.hasAccess(e,"all"))},CloudAPI.hasAccessMakeClip=function(e){return!!SkyUI.isDemo()||(e=e||CloudAPI.cache.cameraInfo(),CloudAPI.hasAccess(e,"clipping")||CloudAPI.hasAccess(e,"all"))},CloudAPI.hasAccessBackAudio=function(e){return!!SkyUI.isDemo()||(e=e||CloudAPI.cache.cameraInfo(),CloudAPI.hasAccess(e,"all")||CloudAPI.hasAccess(e,"backaudio"))},CloudAPI.handleNothing=function(e){},CloudAPI.handleNothingError=function(e,t,a){},CloudAPI.handleError=function(e,t,a){console.error(a)},CloudAPI.parseUri=function(e){function r(e){for(var n=r.options,t=n.parser[n.strictMode?"strict":"loose"].exec(e),o={},a=14;a--;)o[n.key[a]]=t[a]||"";return o[n.q.name]={},o[n.key[12]].replace(n.q.parser,function(e,t,a){t&&(o[n.q.name][t]=a)}),o}return r.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r(e)},CloudAPI.logout=function(e){$.ajax({url:CloudAPI.config.url_account+"logout/",type:"POST",success:e,error:CloudAPI.handleError})},CloudAPI.cameraVideoStream=function(t){var a=$.Deferred();if(!CloudAPI.isCameraID())return a.reject(),a;var n=CloudAPI.config.cameraID;return $.ajax({url:CloudAPI.config.url_cameras+n+"/video/streams/"+t+"/",type:"GET"}).done(function(e){CloudAPI.cache.updateCameraVideoStream(n,t,e),a.resolve(e)}).fail(function(){a.reject()}),a},CloudAPI.cameraLimits=function(){var t=$.Deferred();if(!CloudAPI.isCameraID())return t.reject(),t;var e=CloudAPI.config.cameraID;return $.ajax({url:CloudAPI.config.url_cameras+e+"/limits/",type:"GET"}).done(function(e){CloudAPI.cache.setLimits(CloudAPI.cameraID(),e),t.resolve(e)}).fail(function(){t.reject()}),t},CloudAPI.cameraEventProcessingEventsMotion=function(){var t=$.Deferred();if(!CloudAPI.isCameraID())return t.reject(),t;var a=CloudAPI.config.cameraID;return $.ajax({url:CloudAPI.config.url_cameras+a+"/event_processing/events/motion/",type:"GET"}).done(function(e){CloudAPI.cache.updateEventProcessingEventsMotion(a,e),t.resolve(e)}).fail(function(){t.reject()}),t},CloudAPI.updateCameraEventProcessingEventsMotion=function(e){var t=$.Deferred();if(!CloudAPI.isCameraID())return t.reject(),t;var a=CloudAPI.cameraID();return $.ajax({url:CloudAPI.config.url_cameras+a+"/event_processing/events/motion/",type:"PUT",data:JSON.stringify(e),contentType:"application/json"}).done(function(){CloudAPI.cache.updateEventProcessingEventsMotion(a,e),t.resolve()}).fail(function(){t.reject()}),t},CloudAPI.cameraEventProcessingEventsSound=function(){var t=$.Deferred();if(!CloudAPI.isCameraID())return t.reject(),t;var a=CloudAPI.config.cameraID;return $.ajax({url:CloudAPI.config.url_cameras+a+"/event_processing/events/sound/",type:"GET"}).done(function(e){CloudAPI.cache.updateCameraEventProcessingEventsSound(a,e),t.resolve(e)}).fail(function(){t.reject()}),t},CloudAPI.updateCameraEventProcessingEventsSound=function(e){var t=$.Deferred();if(!CloudAPI.isCameraID())return t.reject(),t;var a=CloudAPI.cameraID();return $.ajax({url:CloudAPI.config.url_cameras+a+"/event_processing/events/sound/",type:"PUT",data:JSON.stringify(e),contentType:"application/json"}).done(function(){CloudAPI.cache.updateCameraEventProcessingEventsSound(a,e),t.resolve()}).fail(function(){t.reject()}),t},CloudAPI.updateCameraVideoStream=function(e,t){var a=$.Deferred();if(!CloudAPI.isCameraID())return a.reject(),a;var n=CloudAPI.cameraID();return $.ajax({url:CloudAPI.config.url_cameras+n+"/video/streams/"+e+"/",type:"PUT",data:JSON.stringify(t),contentType:"application/json"}).done(function(){console.log("[CLOUDAPI] [CLOUDAPI] Updated video/streams/"+e+" in cache for "+n),CloudAPI.cache.updateCameraVideoStream(n,e,t),a.resolve()}).fail(function(){a.reject()}),a},CloudAPI.setVBRQuality=function(e,t,a,n){CloudAPI.isCameraID()&&(a=null==a?CloudAPI.handleNothing:a,n=null==n?CloudAPI.handleError:n,(n={}).vbr_quality=e,n.vbr=!0,$.ajax({url:CloudAPI.config.url_cameras+CloudAPI.config.cameraID+"/video/streams/"+t+"/",type:"PUT",success:a,error:a,data:JSON.stringify(n),contentType:"application/json"}))},CloudAPI.formatMemoryCard=function(){var t=$.Deferred();if(!CloudAPI.isCameraID())return t.reject(),t;var e=CloudAPI.config.cameraID;return $.ajax({url:CloudAPI.config.url_cameras+e+"/format_memory_card/",type:"POST"}).done(function(e){t.resolve(e)}).fail(function(){t.reject()}),t},CloudAPI.cameraMemoryCard=function(t){var a=$.Deferred();return(t=t||CloudAPI.config.cameraID)?$.ajax({url:CloudAPI.config.url_cameras+t+"/memory_card/",type:"GET"}).done(function(e){CloudAPI.cache.setMemoryCard(t,e),a.resolve(e)}).fail(function(){CloudAPI.cache.setMemoryCard(t,{status:"none"}),a.reject()}):a.reject(),a},CloudAPI.cameraWifi=function(){var t=$.Deferred();return CloudAPI.isCameraID()?$.ajax({url:CloudAPI.config.url_cameras+CloudAPI.config.cameraID+"/wifi/",type:"GET"}).done(function(e){t.resolve(e)}).fail(function(){t.reject()}):t.reject(),t},CloudAPI.cameraFirmwares=function(){var t=$.Deferred();return CloudAPI.isCameraID()?$.ajax({url:CloudAPI.config.url_cameras+CloudAPI.config.cameraID+"/firmwares/?limit=1000",type:"GET",contentType:"application/json"}).done(function(e){t.resolve(e.objects)}).fail(function(){t.reject()}):t.reject(),t},CloudAPI.cameraFirmwaresUpgrade=function(e){var a=$.Deferred();if(!CloudAPI.isCameraID())return a.reject(),a;console.log("[CLOUDAPI] upgrade firmware to version: "+e);var t={};return t.version=e,$.ajax({url:CloudAPI.config.url_cameras+CloudAPI.config.cameraID+"/firmwares/upgrade/",type:"POST",data:JSON.stringify(t),contentType:"application/json"}).done(function(){a.resolve()}).fail(function(e,t){console.error("[CLOUDAPI] cameraFirmwaresUpgrade, "+t,e),a.reject()}),a},CloudAPI.accountInfo=function(){var t=$.Deferred();return $.ajax({url:CloudAPI.config.url_account,type:"GET",cache:!1}).done(function(e){CloudAPI.cache.account=e,t.resolve(e)}).fail(function(e){console.log("Fail "+CloudAPI.config.url_account),console.error(e),t.reject(e)}),t},CloudAPI.anonToken=function(){var t=$.Deferred(),e=Date.now(),a=CloudAPI.config.anonToken.expireTimeUTC-6e5,n=CloudAPI.config.anonToken.expireTimeUTC-3e5;return a<e&&e<n?($.ajaxSetup({crossDomain:!0,cache:!1,headers:{}}),t.resolve(CloudAPI.config.anonToken)):$.ajax({url:CloudAPI.config.url_account+"token/anon/",type:"GET"}).done(function(e){CloudAPI.config.anonToken.token=e.token,CloudAPI.config.anonToken.type=e.type,CloudAPI.config.anonToken.expire=e.expire,CloudAPI.config.anonToken.expireTimeUTC=Date.parse(e.expire+"Z"),CloudAPI.setToStorage("SkyVR_anonToken",JSON.stringify(CloudAPI.config.anonToken)),$.ajaxSetup({crossDomain:!0,cache:!1,headers:{}}),t.resolve(CloudAPI.config.anonToken)}).fail(function(){t.reject()}),t},CloudAPI.accountShare=function(e){return CloudAPI.cameraID(),$.ajax({url:CloudAPI.config.url_account+"share/",type:"POST",data:JSON.stringify(e),contentType:"application/json",cache:!1})},CloudAPI.capabilities=function(e,t){e=null==e?CloudAPI.handleNothing:e,t=null==t?CloudAPI.handleError:t,$.ajax({url:CloudAPI.config.url_api+"capabilities/",type:"GET",success:e,error:t})},CloudAPI.cameraInfo=function(t){var a=$.Deferred();return null==(t=t||CloudAPI.cameraID())?a.reject():$.ajax({url:CloudAPI.config.url_cameras+t+"/",type:"GET"}).done(function(e){CloudAPI.cache.cameras[e.id]&&!CloudAPI.cache.cameras[e.id].memory_card?(console.log("cameraInfo cahce has not memory card info for camid="+e.id),CloudAPI.cameraMemoryCard(e.id)):CloudAPI.cache.cameras[e.id]||(console.log("cameraInfo has not in cache for camid="+e.id),CloudAPI.cameraMemoryCard(e.id)),CloudAPI.cache.setCameraInfo(e)?CloudAPI.cameraP2PSettings(t).done(function(e){a.resolve(CloudAPI.cache.cameras[t])}).fail(function(){a.resolve(CloudAPI.cache.cameras[t])}):a.resolve(CloudAPI.cache.cameras[t])}).fail(function(){a.reject()}),a},CloudAPI.updateCamera=function(t){var a=$.Deferred();return CloudAPI.isCameraID()?$.ajax({url:CloudAPI.config.url_cameras+CloudAPI.cameraID()+"/",type:"PUT",data:JSON.stringify(t),contentType:"application/json"}).done(function(e){console.log("[CLOUDAPI] Updated camera in cache for "+CloudAPI.cameraID()),t.id=CloudAPI.cameraID(),CloudAPI.cache.updateCameraInfo(t),a.resolve(e)}).fail(function(){a.reject()}):a.reject(),a},CloudAPI.cameraMesaging=function(e){var t=$.Deferred();return null==(e=e||CloudAPI.cameraID())?t.reject():$.ajax({url:CloudAPI.config.url_cameras+e+"/raw_messaging/",type:"GET"}).done(function(e){t.resolve(e)}).fail(function(e){t.reject(e)}),t},CloudAPI.updateCameraAudio=function(t){var a=$.Deferred();if(!CloudAPI.isCameraID())return a.reject(),a;var n=CloudAPI.cameraID();return $.ajax({url:CloudAPI.config.url_cameras+n+"/audio/",type:"PUT",data:JSON.stringify(t),contentType:"application/json"}).done(function(e){console.log("[CLOUDAPI] Updated audio in cache for "+n),CloudAPI.cache.updateCameraAudio(n,t),a.resolve(e)}).fail(function(){a.reject()}),a},CloudAPI.cameraAudio=function(){var t=$.Deferred();if(!CloudAPI.isCameraID())return t.reject(),t;var a=CloudAPI.cameraID();return $.ajax({url:CloudAPI.config.url_cameras+a+"/audio/",type:"GET"}).done(function(e){CloudAPI.cache.updateCameraAudio(a,e),t.resolve(e)}).fail(function(){t.reject()}),t},CloudAPI.cameraVideo=function(){var t=$.Deferred();if(!CloudAPI.isCameraID())return t.reject(),t;var a=CloudAPI.cameraID();return $.ajax({url:CloudAPI.config.url_cameras+a+"/video/",type:"GET"}).done(function(e){CloudAPI.cache.updateCameraVideo(a,e),t.resolve(e)}).fail(function(){t.reject()}),t},CloudAPI.updateCameraVideo=function(t){var a=$.Deferred();if(!CloudAPI.isCameraID())return a.reject(),a;var n=CloudAPI.cameraID();return $.ajax({url:CloudAPI.config.url_cameras+n+"/video/",type:"PUT",contentType:"application/json",data:JSON.stringify(t)}).done(function(e){CloudAPI.cache.updateCameraVideo(n,t),a.resolve(e)}).fail(function(){a.reject()}),a},CloudAPI.setCameraVideo=function(e,t,a){if(CloudAPI.isCameraID())return t=t||CloudAPI.handleNothing,a=a||CloudAPI.handleError,$.ajax({url:CloudAPI.config.url_cameras+CloudAPI.cameraID()+"/video/",type:"PUT",success:t,error:a,contentType:"application/json",data:JSON.stringify(e)})},CloudAPI.cameraMediaStreams=function(){var t=$.Deferred();if(!CloudAPI.isCameraID())return t.reject(),t;var a=CloudAPI.cameraID();return $.ajax({url:CloudAPI.config.url_cameras+a+"/media_streams/",type:"GET"}).done(function(e){CloudAPI.cache.setMediaStreams(a,e),t.resolve(e)}).fail(function(){t.reject()}),t},CloudAPI.updateCameraMediaStreams=function(e,t){var a=$.Deferred();return(t=t||CloudAPI.cameraID())?$.ajax({url:CloudAPI.config.url_cameras+t+"/media_streams/",type:"PUT",data:JSON.stringify(e),contentType:"application/json"}).done(function(e){a.resolve(e)}).fail(function(e){a.reject(e)}):a.reject(),a},CloudAPI.cameraLiveUrls=function(e){var t=$.Deferred();return(e=e||CloudAPI.cameraID())?$.ajax({url:CloudAPI.config.url_cameras+e+"/live_urls/",type:"GET"}).done(function(e){t.resolve(e)}).fail(function(e){t.reject(e)}):t.reject(),t},CloudAPI.cameraBackwardStart=function(){var e;CloudAPI.isCameraID()&&(e={},CloudAPI.config.backwardURL&&(e.url=CloudAPI.config.backwardURL,CloudAPI.config.tmpBackwardURL==CloudAPI.config.backwardURL?CloudAPI.config.tmpBackwardURLCount++:(CloudAPI.config.tmpBackwardURLCount=1,CloudAPI.config.tmpBackwardURL=CloudAPI.config.backwardURL),CloudAPI.isP2PStreaming()&&(console.log("[CLOUDAPI] Send (audio streaming) backward start: "+CloudAPI.config.backwardURL),$.ajax({url:CloudAPI.config.url_cameras+CloudAPI.cameraID()+"/audio/backward/start/",type:"POST",success:CloudAPI.handleNothing,data:JSON.stringify(e),contentType:"application/json"}))))},CloudAPI.cameraBackwardStop=function(){if(CloudAPI.isCameraID()){var e={};if(CloudAPI.config.backwardURL){if(e.url=CloudAPI.config.backwardURL,CloudAPI.config.tmpBackwardURL==CloudAPI.config.backwardURL){if(0==CloudAPI.config.tmpBackwardURLCount)return;CloudAPI.config.tmpBackwardURLCount--}CloudAPI.isP2PStreaming()&&(console.log("[CLOUDAPI] Send (audio streaming) backward stop: "+CloudAPI.config.backwardURL),$.ajax({url:CloudAPI.config.url_cameras+CloudAPI.cameraID()+"/audio/backward/stop/",type:"POST",success:CloudAPI.handleNothing,data:JSON.stringify(e),contentType:"application/json"}))}}},CloudAPI.cameraSchedule=function(){if(CloudAPI.isCameraID())return $.ajax({url:CloudAPI.config.url_cameras+CloudAPI.cameraID()+"/schedule/",type:"GET",cache:!1})},CloudAPI.updateCameraSchedule=function(e){return $.ajax({url:CloudAPI.config.url_cameras+CloudAPI.cameraID()+"/schedule/",type:"PUT",data:JSON.stringify(e),cache:!1,contentType:"application/json"})},CloudAPI.hasAccessCameraPreview=function(e){e=CloudAPI.cache.cameraInfo(e);return!!e&&(CloudAPI.hasAccess(e,"live")||CloudAPI.hasAccess(e,"all")||CloudAPI.hasAccess(e,"ptz"))},CloudAPI.cameraPreview=function(e,t,a){return t=null==t?CloudAPI.handleNothing:t,a=null==a?CloudAPI.handleError:a,$.ajax({url:CloudAPI.config.url_cameras+e+"/preview/",type:"GET",success:t,error:a})},CloudAPI.hasAccessCameraUpdatePreview=function(e){e=CloudAPI.cache.cameraInfo(e);return!!e&&(CloudAPI.hasAccess(e,"live")||CloudAPI.hasAccess(e,"all")||CloudAPI.hasAccess(e,"ptz"))},CloudAPI.cameraUpdatePreview=function(e){return $.ajax({url:CloudAPI.config.url_cameras+e+"/preview/update/",type:"POST"})},CloudAPI.storageDataFirstRecord=function(e){var t=$.Deferred(),a={camid:CloudAPI.cameraID(),limit:1,offset:0};return e&&(a.start=e),$.ajax({url:CloudAPI.config.url_storage+"data/",data:a,cache:!1,type:"GET"}).done(function(e){0<e.objects.length?t.resolve(e.objects[0]):t.reject()}).fail(function(){t.reject()}),t},CloudAPI.storageEventsFirstRecord=function(){var t=$.Deferred(),e={camid:CloudAPI.cameraID(),limit:1,offset:0};return $.ajax({url:CloudAPI.config.url_storage+"events/",data:e,cache:!1,type:"GET"}).done(function(e){0<e.objects.length?t.resolve(e.objects[0]):t.reject()}).fail(function(){t.reject()}),t},CloudAPI.storageThumbnailsFirstRecord=function(){var t=$.Deferred(),e={camid:CloudAPI.cameraID(),limit:1,offset:0};return $.ajax({url:CloudAPI.config.url_storage+"thumbnails/",data:e,cache:!1,type:"GET"}).done(function(e){0<e.objects.length?t.resolve(e.objects[0]):t.reject()}).fail(function(){t.reject()}),t},CloudAPI.getAllData=function(e,t){},CloudAPI.storageThumbnails=function(e,t){var n=$.Deferred(),o={meta:{limit:1e3,offset:0,total_count:-1},objects:[]},r={camid:CloudAPI.cameraID(),limit:o.meta.limit,offset:o.meta.offset,start:e};function i(e){var t=$.Deferred();return $.ajax({url:CloudAPI.config.url_storage+"thumbnails/",data:e,cache:!1,async:!0,type:"GET"}).done(function(e){t.resolve(e)}).fail(function(){t.reject()}),t}return t&&(r.end=t),i(r).fail(function(){n.reject()}).done(function(e){if(o.meta.total_count=e.meta.total_count,o.meta.expire=e.meta.expire,$.merge(o.objects,e.objects),e.meta.offset+e.objects.length>=e.meta.total_count)n.resolve(o);else{for(var t=[],a=o.meta.limit;a<e.meta.total_count;a+=o.meta.limit)r.offset=a,t.push(i(r));$.when.apply($,t).done(function(){for(var e=0;e<arguments.length;e++)$.merge(o.objects,arguments[e].objects);n.resolve(o)}).fail(function(){n.reject()})}}),n},CloudAPI.storageTimeline=function(e,t){var n=$.Deferred(),o={meta:{limit:1e3,offset:0,total_count:-1},objects:[]},r={slices:1,camid:CloudAPI.cameraID(),limit:o.meta.limit,offset:o.meta.offset,start:e};function i(e){var t=$.Deferred();return $.ajax({url:CloudAPI.config.url_storage+"timeline/"+CloudAPI.cameraID()+"/",data:e,cache:!1,async:!0,type:"GET"}).done(function(e){t.resolve(e)}).fail(function(){t.reject()}),t}return t&&(r.end=t),i(r).fail(function(){n.reject()}).done(function(e){if(o.meta.total_count=e.meta.total_count,o.meta.expire=e.meta.expire,$.merge(o.objects,e.objects),e.meta.offset+e.objects.length>=e.meta.total_count)n.resolve(o);else{for(var t=[],a=o.meta.limit;a<e.meta.total_count;a+=o.meta.limit)r.offset=a,t.push(i(r));$.when.apply($,t).done(function(){for(var e=0;e<arguments.length;e++)$.merge(o.objects,arguments[e].objects);n.resolve(o)}).fail(function(){n.reject()})}}),n},CloudAPI.storageEvents=function(e,t){var n=$.Deferred(),o={meta:{limit:1e3,offset:0,total_count:-1},objects:[]},r={camid:CloudAPI.cameraID(),limit:o.meta.limit,offset:o.meta.offset,start:e};function i(e){var t=$.Deferred();return $.ajax({url:CloudAPI.config.url_storage+"events/",data:e,cache:!1,async:!0,type:"GET"}).done(function(e){t.resolve(e)}).fail(function(){t.reject()}),t}return t&&(r.end=t),i(r).fail(function(){n.reject()}).done(function(e){if(o.meta.total_count=e.meta.total_count,o.meta.expire=e.meta.expire,$.merge(o.objects,e.objects),e.meta.offset+e.objects.length>=e.meta.total_count)n.resolve(o);else{for(var t=[],a=o.meta.limit;a<e.meta.total_count;a+=o.meta.limit)r.offset=a,t.push(i(r));$.when.apply($,t).done(function(){for(var e=0;e<arguments.length;e++)$.merge(o.objects,arguments[e].objects);n.resolve(o)}).fail(function(){n.reject()})}}),n},CloudAPI.cameraMotionDetectionDemo=function(){return JSON.parse('{"caps": {"columns": 23, "max_regions": 8, "region_shape": "rect", "rows": 15, "sensitivity": "region"}}')},CloudAPI.cameraMotionDetection=function(){return $.ajax({url:CloudAPI.config.url_cameras+CloudAPI.cameraID()+"/motion_detection/",type:"GET"})},CloudAPI.cameraMotionDetectionRegionsDemo=function(){return JSON.parse('{"meta": {"limit": 20, "next": null, "offset": 0, "previous": null, "total_count": 8}, "objects": [{"enabled": true, "id": 2686, "map": "ZmQwMDBjM2ZjMDAwN2Y4MDAwZmYwMDAxZmUwMDAzZmNlNjAw", "name": "motion1", "sensitivity": 5}, {"enabled": true, "id": 2687, "map": "ZjYwMDBmMGZmODAwMWZmMDAwM2ZlMDAwN2ZjMDAwZmY4MDAxZmZmMDAw", "name": "motion2", "sensitivity": 5}, {"enabled": true, "id": 2688, "map": "ZjQwMDBmM2ZlMDAwN2ZjMDAwZmY4MDAxZmYwMDAzZmUwMDA3ZmNmMjAw", "name": "motion3", "sensitivity": 5}, {"enabled": true, "id": 2689, "map": "ZWMwMDBjMWZlMDAwM2ZjMDAwN2Y4MDAwZmYwMDAxZmVmNzAw", "name": "motion4", "sensitivity": 5}, {"enabled": true, "id": 2690, "map": "ZTQwMDA2ZTAwMDAxYzAwMDAzODBmOTAw", "name": "motion5", "sensitivity": 5}, {"enabled": true, "id": 2691, "map": "MmIwMWZmMDAwM2ZlMDAwN2ZjMDAwZmY4MDAxZmYwMDAzZmUwMDA3ZmMwMDBmZjgwMDFmZjAwMDNmZTAwMDdmYzAwMGZmODAwMWZmMDAwM2ZlMDAwN2ZjMDAw", "name": "motion6", "sensitivity": 5}, {"enabled": true, "id": 2692, "map": "MTJmZjgwMDFmZjAwMDNmZTAwMDdmYzAwMGZmODAwMWZmMDAwM2ZlMGU4MDA=", "name": "motion7", "sensitivity": 5}, {"enabled": false, "id": 2693, "map": "", "name": "motion8", "sensitivity": 5}]}')},CloudAPI.cameraMotionDetectionRegions=function(){return $.ajax({url:CloudAPI.config.url_cameras+CloudAPI.cameraID()+"/motion_detection/regions/",type:"GET"})},CloudAPI.cameraP2PSettings=function(t,a,e,n){return t=t||CloudAPI.cameraID(),a=null==a?CloudAPI.handleNothing:a,e=null==e?CloudAPI.handleError:e,n=null==n?CloudAPI.handleNothing:n,$.ajax({url:CloudAPI.config.url_cameras+t+"/p2p_settings/",type:"GET",success:function(e){CloudAPI.cache.setP2PSettings(t,e),a(e)},error:e,complete:n})},CloudAPI.cameraSetP2PSettings=function(e){return $.ajax({url:CloudAPI.config.url_cameras+CloudAPI.cameraID()+"/p2p_settings/",type:"PUT",data:JSON.stringify(e),cache:!1,contentType:"application/json"})},CloudAPI.cameraLog=function(){return $.ajax({url:CloudAPI.config.url_cameras+CloudAPI.cameraID()+"/log/",type:"GET"})},CloudAPI.cameraLogDownload=function(e){var t=$.Deferred(),a=null;return(a=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){a.readyState==XMLHttpRequest.DONE&&(200==a.status?t.resolve(a.responseText):t.reject())},a.open("GET",e,!0),a.send(),t.promise()},CloudAPI.cameraLogUpdate=function(){return $.ajax({url:CloudAPI.config.url_cameras+CloudAPI.cameraID()+"/log/update/",type:"POST"})},CloudAPI.cameraManagersList=function(e,t){e=e||CloudAPI.handleNothing,t=t||CloudAPI.handleError,$.ajax({url:CloudAPI.config.url_cmngrs,type:"GET",success:e,error:t})},CloudAPI.cameraManagerReset=function(e){return $.ajax({url:CloudAPI.config.url_cmngrs+e+"/reset/",type:"POST"})},CloudAPI.camerasList=function(e){e=e||{};var t,o=$.Deferred(),n={meta:{limit:20,offset:0,total_count:-1},objects:[]},r={limit:n.meta.limit,offset:n.meta.offset};for(t in e)r[t]=e[t];function i(e){var t=$.Deferred();return $.ajax({url:CloudAPI.config.url_cameras,data:e,cache:!1,type:"GET"}).done(function(e){t.resolve(e)}).fail(function(){t.reject()}),t}function s(t){var a=0,n=t.objects.length;a==n&&o.resolve(t);for(var e=0;e<n;e++)cam=t.objects[e],CloudAPI.cache.setCameraInfo(cam)?(console.log("update p2p_settings: ",cam.id),CloudAPI.cameraP2PSettings(cam.id).done(function(e){CloudAPI.cameraMemoryCard(cam.id).done(function(){(a+=1)==n&&o.resolve(t)}).fail(function(){(a+=1)==n&&o.resolve(t)})}).fail(function(){(a+=1)==n&&o.resolve(t)})):(a+=1)==n&&o.resolve(t)}return i(r).fail(function(){o.reject()}).done(function(e){if(n.meta.total_count=e.meta.total_count,$.merge(n.objects,e.objects),e.meta.offset+e.objects.length>=e.meta.total_count)s(n);else{for(var t=[],a=n.meta.limit;a<e.meta.total_count;a+=n.meta.limit)r.offset=a,t.push(i(r));$.when.apply($,t).done(function(){for(var e=0;e<arguments.length;e++)$.merge(n.objects,arguments[e].objects);s(n)}).fail(function(){o.reject()})}}),o},CloudAPI.camerasListByCriterions=function(e,t,a){t=t||CloudAPI.handleNothing,a=a||CloudAPI.handleError,$.ajax({url:CloudAPI.config.url_cameras,data:e,type:"GET",success:t,error:a})},CloudAPI.cameraManagerInfo=function(e,t,a){t=t||CloudAPI.handleNothing,a=a||CloudAPI.handleError,$.ajax({url:CloudAPI.config.url_cmngrs+e+"/",type:"GET",success:t,error:a})},CloudAPI.cameraManagerSetTimezone=function(e,t,a,n){a=a||CloudAPI.handleNothing,n=n||CloudAPI.handleError;var o={};o.timezone=t,$.ajax({url:CloudAPI.config.url_cmngrs+e+"/",type:"PUT",success:a,error:n,data:JSON.stringify(o),contentType:"application/json"})},CloudAPI.storageClipList=function(){var n=$.Deferred(),o={meta:{limit:100,offset:0,total_count:-1},objects:[]},r={limit:o.meta.limit,offset:o.meta.offset,camid:CloudAPI.cameraID(),usecamtz:""};function i(e){var t=$.Deferred();return $.ajax({url:CloudAPI.config.url_clips,data:e,cache:!1,type:"GET"}).done(function(e){t.resolve(e)}).fail(function(){t.reject()}),t}return i(r).fail(function(){n.reject()}).done(function(e){if(o.meta.total_count=e.meta.total_count,o.meta.expire=e.meta.expire,$.merge(o.objects,e.objects),e.meta.offset+e.objects.length>=e.meta.total_count)n.resolve(o);else{for(var t=[],a=o.meta.limit;a<e.meta.total_count;a+=o.meta.limit)r.offset=a,t.push(i(r));$.when.apply($,t).done(function(){for(var e=0;e<arguments.length;e++)$.merge(o.objects,arguments[e].objects);n.resolve(o)}).fail(function(){n.reject()})}}),n},CloudAPI.storageClipListAnon=function(t){var i=$.Deferred();return CloudAPI.anonToken().done(function(e){var n={meta:{limit:100,offset:0,total_count:-1},objects:[]},o={limit:n.meta.limit,offset:n.meta.offset,usecamtz:""};function r(e){var t=$.Deferred();return $.ajax({url:CloudAPI.config.url_clips,data:e,cache:!1,type:"GET",headers:{}}).done(function(e){t.resolve(e)}).fail(function(){t.reject()}),t}t&&(o.token=t),r(o).fail(function(){i.reject()}).done(function(e){if(n.meta.total_count=e.meta.total_count,n.meta.expire=e.meta.expire,$.merge(n.objects,e.objects),e.meta.offset+e.objects.length>=e.meta.total_count)i.resolve(n);else{for(var t=[],a=n.meta.limit;a<e.meta.total_count;a+=n.meta.limit)o.offset=a,t.push(r(o));$.when.apply($,t).done(function(){for(var e=0;e<arguments.length;e++)$.merge(n.objects,arguments[e].objects);i.resolve(n)}).fail(function(){i.reject()})}})}).fail(function(){i.reject()}),i},CloudAPI.storageClipCreate=function(e,t,a,n,o){var r={};return r.camid=CloudAPI.cameraID(),r.title=e,r.group=t,r.start=a,r.end=n,r.delete_at=o,$.ajax({url:CloudAPI.config.url_clips,type:"POST",data:JSON.stringify(r),cache:!1,contentType:"application/json"})},CloudAPI.storageClip=function(e){return $.ajax({url:CloudAPI.config.url_clips+e+"/",type:"GET",cache:!1})},CloudAPI.serverTime=function(){return $.ajax({url:CloudAPI.config.url_server+"time/",type:"GET",cache:!1})},CloudAPI.storageClipAnon=function(t,e){var a=$.Deferred(),n={};return e&&(n.token=e),CloudAPI.anonToken().done(function(e){$.ajax({url:CloudAPI.config.url_clips+t+"/",type:"GET",data:n,cache:!1,headers:{}}).done(function(e){a.resolve(e)}).fail(function(){a.reject()})}).fail(function(){a.reject()}),a},CloudAPI.storageClipDelete=function(e){return $.ajax({url:CloudAPI.config.url_clips+e+"/",type:"DELETE",cache:!1})},CloudAPI.storageClipUpdate=function(e,t){return $.ajax({url:CloudAPI.config.url_clips+e+"/",data:JSON.stringify(t),type:"PUT",cache:!1,contentType:"application/json"})},CloudAPI.cameraSettings=function(){var r,e=$.Deferred(),t=[];function a(e){var t=$.Deferred();return e.always(function(){t.resolve()}),t}return t.push(a((r=$.Deferred(),CloudAPI.cameraMediaStreams().done(function(e){console.log("MediaStreams: ",e);var t=e.mstreams_supported,a=e.live_ms_id;if(0<t.length&&""!=a){for(var n="",o=0;o<t.length;o++)if(t[o].id==a){n=t[o].vs_id;break}""!=n?CloudAPI.cameraVideoStream(n).done(function(){r.resolve()}).fail(function(){r.reject()}):r.reject()}else r.resolve()}).fail(function(){r.reject()}),r))),CloudAPI.cache.cameraInfo().url||(t.push(a(CloudAPI.cameraVideo())),t.push(a(CloudAPI.cameraAudio())),t.push(a(CloudAPI.cameraLimits())),t.push(a(CloudAPI.cameraEventProcessingEventsMotion())),t.push(a(CloudAPI.cameraEventProcessingEventsSound())),t.push(a(CloudAPI.cameraMemoryCard()))),$.when.apply($,t).done(function(){e.resolve(CloudAPI.cache.cameraInfo())}).fail(function(){e.reject()}),e},CloudAPI.createCamsess=function(e){return e=e||{},$.ajax({url:CloudAPI.config.url_camsess,data:JSON.stringify(e),type:"POST",contentType:"application/json",cache:!1})},CloudAPI.updateCamsess=function(e,t){return t=t||{},$.ajax({url:CloudAPI.config.url_camsess+e+"/",data:JSON.stringify(t),type:"PUT",contentType:"application/json",cache:!1})},CloudAPI.cameraCreate=function(e){var t=$.Deferred();return e=e||{},$.ajax({url:CloudAPI.config.url_cameras,type:"POST",data:JSON.stringify(e),cache:!1,contentType:"application/json"}).done(function(e){t.resolve(e)}).fail(function(e){t.reject(e)}),t},CloudAPI.cameraDelete=function(e){var t=$.Deferred();return $.ajax({url:CloudAPI.config.url_cameras+e+"/",type:"DELETE",cache:!1}).done(function(e){t.resolve(e)}).fail(function(e){t.reject(e)}),t},CloudAPI.cameraUpdate=function(e,t){var a=$.Deferred();return t=t||{},$.ajax({url:CloudAPI.config.url_cameras+e+"/",type:"PUT",data:JSON.stringify(t),cache:!1,contentType:"application/json"}).done(function(e){a.resolve(e)}).fail(function(e){a.reject(e)}),a},CloudAPI.adminCameras=function(e){return e=e||{},$.ajax({url:CloudAPI.config.url_admin_cameras,data:e,type:"GET",cache:!1})},CloudAPI.adminCameraInfo=function(e){return $.ajax({url:CloudAPI.config.url_admin_cameras+e+"/",type:"GET",cache:!1})},CloudAPI.updateAdminCamera=function(e,t){return t=t||{},$.ajax({url:CloudAPI.config.url_admin_cameras+e+"/",type:"PUT",data:JSON.stringify(t),contentType:"application/json",cache:!1})},CloudAPI.store={},CloudAPI.store.volume=function(e){return e&&CloudAPI.setToStorage("volume",e),CloudAPI.getFromStorage("volume")},CloudAPI.store.prev_volume=function(e){return e&&CloudAPI.setToStorage("prev_volume",e),CloudAPI.getFromStorage("prev_volume")},CloudAPI.store.zoom=function(e){return null!=e&&CloudAPI.setToStorage("zoom",e),CloudAPI.getFromStorage("zoom")},CloudAPI.store.zoom_left=function(e){return null!=e&&CloudAPI.setToStorage("zoom_left",e),CloudAPI.getFromStorage("zoom_left")},CloudAPI.store.zoom_top=function(e){return null!=e&&CloudAPI.setToStorage("zoom_top",e),CloudAPI.getFromStorage("zoom_top")},CloudAPI.store.user_profile=function(e){return null!=e&&CloudAPI.setToStorage("user_profile",e),CloudAPI.getFromStorage("user_profile")},CloudAPI.store.svcp_host=function(e){return null!=e&&CloudAPI.setToStorage("svcp_host",e),CloudAPI.getFromStorage("svcp_host")},CloudAPI.storageTemp={},CloudAPI.storageMode="local",CloudAPI.detectStorageMode=function(){try{localStorage.setItem("detectStorageMode","yes")}catch(e){CloudAPI.storageMode="temp"}},CloudAPI.detectStorageMode(),CloudAPI.setToStorage=function(e,t){"local"==CloudAPI.storageMode?localStorage.setItem(e,t):CloudAPI.storageTemp[e]=t},CloudAPI.getFromStorage=function(e){return"local"==CloudAPI.storageMode?localStorage.getItem(e):CloudAPI.storageTemp[e]},CloudAPI.removeFromStorage=function(e){"local"==CloudAPI.storageMode?localStorage.removeItem(e):CloudAPI.storageTemp[e]=void 0},CloudAPI.loadApiTokenFromHref=function(){for(var e=window.location.href.split("#"),t=(t=e[e.length-1]).split("&"),a=0;a<t.length;a++){var n=t[a].split("=")[0],o=decodeURIComponent(t[a].split("=")[1]);"token"==n?(CloudAPI.config.apiToken=CloudAPI.config.apiToken||{},CloudAPI.config.apiToken.token=o,CloudAPI.config.apiToken.type="api"):"expire"==n&&(CloudAPI.config.apiToken=CloudAPI.config.apiToken||{},CloudAPI.config.apiToken.expire=o,CloudAPI.config.apiToken.expireTimeUTC=Date.parse(o+"Z"))}console.log("Href token: ",CloudAPI.config.apiToken),CloudAPI.setToStorage("SkyVR_apiToken",JSON.stringify(CloudAPI.config.apiToken))},CloudAPI.cleanupApiToken=function(){CloudAPI.removeFromStorage("SkyVR_apiToken"),CloudAPI.config.apiToken=null,$.ajaxSetup({crossDomain:!0,cache:!1,beforeSend:function(e,t){e.setRequestHeader("Authorization","")}})},CloudHelpers.containsPageParam("svcp_host")?CloudAPI.setURL(CloudAPI.pageParams.svcp_host):CloudAPI.getFromStorage("CloudAPI_svcp_host")?CloudAPI.setURL(CloudAPI.getFromStorage("CloudAPI_svcp_host")):CloudAPI.setURL(("file:"==window.location.protocol?"http":window.location.protocol)+"//"+window.location.host.toString()+"/"),CloudAPI.events={},CloudAPI.events.listeners={},CloudAPI.events.names=["CAMERA_INFO_CHANGED"],CloudAPI.events.on=function(e,t,a){-1!=CloudAPI.events.names.indexOf(e)?(CloudAPI.events.listeners[e]||(CloudAPI.events.listeners[e]={}),CloudAPI.events.listeners[e][t]=a):console.error("[CLOUDAPI] Could not find event with name "+e)},CloudAPI.events.off=function(e,t){-1!=CloudAPI.events.names.indexOf(e)&&CloudAPI.events.listeners[e]?CloudAPI.events.listeners[e][t]?delete CloudAPI.events.listeners[e][t]:console.error("[CLOUDAPI] Could not find event with name "+e+" by id "+t):console.error("[CLOUDAPI] Could not find event with name "+e)},CloudAPI.events.trigger=function(e,a){var n;-1!=CloudAPI.events.names.indexOf(e)?CloudAPI.events.listeners[e]&&(n=CloudAPI.events.listeners[e],setTimeout(function(){for(var t in n)try{n[t](a)}catch(e){console.error("[CLOUDAPI] error on execute callback event ("+t+")",e)}},1)):console.error("[CLOUDAPI] Could not find event with name "+e)},window.CloudReturnCode={},CloudReturnCode.OK={name:"OK",code:0,text:"Success"},CloudReturnCode.OK_COMPLETIONPENDING={name:"OK_COMPLETIONPENDING",code:1,text:"Operation Pending"},CloudReturnCode.ERROR_NOT_CONFIGURED={name:"ERROR_NOT_CONFIGURED",code:-2,text:"Object not configured"},CloudReturnCode.ERROR_NOT_IMPLEMENTED={name:"ERROR_NOT_IMPLEMENTED",code:-1,text:"Function not implemented"},CloudReturnCode.ERROR_NO_MEMORY={name:"ERROR_NO_MEMORY",code:-12,text:"Out of memory"},CloudReturnCode.ERROR_ACCESS_DENIED={name:"ERROR_ACCESS_DENIED",code:-13,text:"Access denied"},CloudReturnCode.ERROR_BADARGUMENT={name:"ERROR_BADARGUMENT",code:-22,text:"Invalid argument"},CloudReturnCode.ERROR_STREAM_UNREACHABLE={name:"ERROR_STREAM_UNREACHABLE",code:-5049,text:"The stream specified is not reachable. Please check source URL or restart the stream"},CloudReturnCode.ERROR_EXPECTED_FILTER={name:"ERROR_EXPECTED_FILTER",code:-5050,text:"Expected filter"},CloudReturnCode.ERROR_NO_CLOUD_CONNECTION={name:"ERROR_NO_CLOUD_CONNECTION",code:-5051,text:"No cloud connection (has not conenction object or token is invalid)"},CloudReturnCode.ERROR_WRONG_RESPONSE={name:"ERROR_WRONG_RESPONSE",code:-5052,text:"Response from cloud expected in json, but got something else"},CloudReturnCode.ERROR_SOURCE_NOT_CONFIGURED={name:"ERROR_SOURCE_NOT_CONFIGURED",code:-5053,text:"Source not configured"},CloudReturnCode.ERROR_INVALID_SOURCE={name:"ERROR_INVALID_SOURCE",code:-5054,text:"Invalid source"},CloudReturnCode.ERROR_RECORDS_NOT_FOUND={name:"ERROR_RECORDS_NOT_FOUND",code:-5055,text:"Records are not found"},CloudReturnCode.ERROR_STREAM_UNREACHABLE_HLS={name:"ERROR_STREAM_UNREACHABLE_HLS",code:-5056,text:"The stream specified is not reachable (HLS)."},CloudReturnCode.ERROR_NOT_FOUND_HLS_PLUGIN={name:"ERROR_NOT_FOUND_HLS_PLUGIN",code:-5057,text:"HLS plugin not found."},CloudReturnCode.ERROR_COULD_NOT_DECODE_STREAM_OR_COULD_NOT_SET_COOKIE_HLS={name:"ERROR_COULD_NOT_DECODE_STREAM_OR_COULD_NOT_SET_COOKIE_HLS",code:-5058,text:"Could not decode stream or could not set cookie for streaming server (please allow cookie)."},CloudReturnCode.ERROR_WEBRTC_SERVER_ERROR={name:"ERROR_WEBRTC_SERVER_ERROR",code:-5059,text:"Unable to connect to server. Please check that you added an exception for the certificate, and that the port is available."},CloudReturnCode.ERROR_CAMERA_OFFLINE={name:"ERROR_CAMERA_OFFLINE",code:-5060,text:"Video source is offline"},CloudReturnCode.PLAYER_NOT_SUPPORTED={name:"PLAYER_NOT_SUPPORTED",code:-5061,text:"Player not supported"},CloudReturnCode.NOT_SUPPORTED_FORMAT={name:"NOT_SUPPORTED_FORMAT",code:-5062,text:"Not supported format"},CloudReturnCode.ERROR_HLS_ENDED={name:"ERROR_HLS_ENDED",code:-5063,text:"The stream is ended (HLS)."},CloudReturnCode.ERROR_INVALID_ACCESS_TOKEN_FORMAT={name:"ERROR_INVALID_ACCESS_TOKEN_FORMAT",code:-5064,text:"Invalid access token format"},CloudReturnCode.ERROR_CHANNEL_NOT_FOUND={name:"ERROR_CHANNEL_NOT_FOUND",code:-5065,text:"Channel is not found"},CloudReturnCode.ERROR_NETWORK_ERROR={name:"ERROR_NETWORK_ERROR",code:-5066,text:"Network error"},CloudReturnCode.ERROR_ACCESS_TOKEN_REQUIRED={name:"ERROR_ACCESS_TOKEN_REQUIRED",code:-5067,text:"Access token is required"},CloudReturnCode.ERROR_ACCESS_TOKEN_EXPIRED={name:"ERROR_ACCESS_TOKEN_EXPIRED",code:-5068,text:"Access token is expired"},CloudReturnCode.ERROR_NOT_AUTHORIZED={name:"ERROR_NOT_AUTHORIZED",code:-5401,text:"Failed authorization on cloud (wrong credentials)"},CloudReturnCode.ERROR_NOT_FOUND={name:"ERROR_NOT_FOUND",code:-5404,text:"Not found object"},window.CloudCameraPrivacyFilter={},CloudCameraPrivacyFilter.PS_OWNER_NOT_PUBLIC={name:"PS_OWNER_NOT_PUBLIC",code:0,text:"My cameras which not public"},CloudCameraPrivacyFilter.PS_OWNER={name:"PS_OWNER",code:1,text:"Only my cameras"},CloudCameraPrivacyFilter.PS_PUBLIC_NOT_OWNERS={name:"PS_PUBLIC_NOT_OWNERS",code:2,text:"Public cameras exclude my"},CloudCameraPrivacyFilter.PS_PUBLIC={name:"PS_PUBLIC",code:3,text:"All public cameras"},CloudCameraPrivacyFilter.PS_OWNERS_PUBLIC={name:"PS_OWNERS_PUBLIC",code:4,text:"My public cameras"},CloudCameraPrivacyFilter.PS_ALL={name:"PS_ALL",code:5,text:"All cameras"},window.CloudCameraRecordingMode={},CloudCameraRecordingMode.CONTINUES={name:"CONTINUES",code:0},CloudCameraRecordingMode.BY_EVENT={name:"BY_EVENT",code:1},CloudCameraRecordingMode.NO_RECORDING={name:"NO_RECORDING",code:2},CloudCameraRecordingMode.SERVER_BY_EVENT={name:"SERVER_BY_EVENT",code:3},window.CloudCameraStatus={},CloudCameraStatus.ACTIVE={name:"ACTIVE",code:0},CloudCameraStatus.UNAUTHORIZED={name:"UNAUTHORIZED",code:1},CloudCameraStatus.INACTIVE={name:"INACTIVE",code:2},CloudCameraStatus.INACTIVE_BY_SCHEDULER={name:"INACTIVE_BY_SCHEDULER",code:3},CloudCameraStatus.OFFLINE={name:"OFFLINE",code:4},window.CloudTrialConnection=function(){var n=this;n.mAPI=null,n.AccountProviderUrl=("file:"==window.location.protocol?"http:":window.location.protocol)+"//cnvrclient2.videoexpertsgroup.com/",n.setAccpUrl=function(e){n.AccountProviderUrl=e},n.setSvcpUrlBase=function(e){n.ServiceProviderUrl=e},n.setApiConfig=function(e,t,a){n.ApiHost=e,n.ApiPort=t,n.ApiSecurePort=a},n.setCamConfig=function(e,t,a){n.CamHost=e,n.CamPort=t,n.CamSecurePort=a},n.open=function(e){var t=CloudHelpers.promise();return n.TrialKey=e,n.RequestData={username:n.TrialKey,password:n.TrialKey,cloud_token:!0},n._asyncLogin(t),t},n.isOpened=function(){return null!=n.mAPI},n.close=function(){n.mAPI=null},n._getAPI=function(){return n.mAPI},n.getUserInfo=function(){var a=CloudHelpers.promise();return n.isOpened()?n.mAPI.getAccountInfo().done(function(t){n.mAPI.getAccountCapabilities().done(function(e){e=new CloudUserInfo(n,t,e);a.resolve(e)}).fail(function(e){CloudHelpers.handleError(e,a)})}).fail(function(e){CloudHelpers.handleError(e,a)}):a.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),a},n.getServerTimeDiff=function(){return n.mAPI.diffServerTime},n._asyncLogin=function(a){CloudHelpers.request({url:n.AccountProviderUrl+"api/v1/account/login/",type:"POST",data:JSON.stringify(n.RequestData),contentType:"application/json"}).done(function(e){var t;e.cloud_token&&e.cloud_token.token?(t=CloudHelpers.parseUri(e.svcp_auth_app_url).host,t=("file:"==window.location.protocol?"http:":window.location.protocol)+"//"+t+"/",n.mAPI=new CloudAPI(e.cloud_token,n.ServiceProviderUrl||t),n.mAPI.getServerTime().done(function(){a.resolve()}).fail(function(e){a.reject(e)})):(console.warn("Try again after 1 sec"),setTimeout(function(){n._asyncLogin(a)},1e3))}).fail(function(e){console.error(e),a.reject(e)})}},window.CloudTokenConnection=function(e){var o=this;o.mAPI=null,o.options=e,o.ServiceProviderUrl=("file:"==window.location.protocol?"http:":window.location.protocol)+"//"+(o.options.cloud_domain||"web.skyvr.videoexpertsgroup.com")+"/",o.open=function(e,t,a){t={token:e,expire:t,type:"api"};a&&(o.ServiceProviderUrl=a);var n=CloudHelpers.promise();return o.mAPI=new CloudAPI(t,o.ServiceProviderUrl),o.mAPI.getServerTime().done(function(){n.resolve()}).fail(function(e){n.reject(e)}),n},o.isOpened=function(){return null!=o.mAPI},o.close=function(){o.mAPI=null},o._getAPI=function(){return o.mAPI},o.getUserInfo=function(){var a=CloudHelpers.promise();return o.isOpened()?o.mAPI.getAccountInfo().done(function(t){o.mAPI.getAccountCapabilities().done(function(e){console.warn("caps:",e);e=new CloudUserInfo(o,t,e);a.resolve(e)}).fail(function(e){CloudHelpers.handleError(e,a)})}).fail(function(e){CloudHelpers.handleError(e,a)}):a.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),a},o.getServerTimeDiff=function(){return o.mAPI.diffServerTime}},window.CloudShareConnection=function(e){var n=this;n.options=e,n.mAPI=null,n.ServiceProviderUrl=("file:"==window.location.protocol?"http:":window.location.protocol)+"//"+(n.options.cloud_domain||"web.skyvr.videoexpertsgroup.com")+"/",n.open=function(e){var e={token:e,expire:"",type:"share"},t=CloudHelpers.promise();return n.mAPI=new CloudAPI(e,n.ServiceProviderUrl),n.mAPI.getServerTime().done(function(){t.resolve()}).fail(function(e){t.reject(e)}),t},n.updateToken=function(e){n.mAPI&&(n.mAPI.token=e)},n.isOpened=function(){return null!=n.mAPI},n.close=function(){n.mAPI=null},n._getAPI=function(){return n.mAPI},n.getUserInfo=function(){var a=CloudHelpers.promise();return n.isOpened()?n.mAPI.getAccountInfo().done(function(t){n.mAPI.getAccountCapabilities().done(function(e){console.warn("caps:",e);e=new CloudUserInfo(n,t,e);a.resolve(e)}).fail(function(e){CloudHelpers.handleError(e,a)})}).fail(function(e){CloudHelpers.handleError(e,a)}):a.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),a},n.getServerTimeDiff=function(){return n.mAPI.diffServerTime}},window.CloudUserConnection=function(){var a,n,o=this;o.mAPI=null,o.AccountProviderUrl=("file:"==window.location.protocol?"http:":window.location.protocol)+"//cnvrclient2.videoexpertsgroup.com/",o.open=function(e,t){a=e,n=t;t=CloudHelpers.promise();return o.RequestData={username:a,password:n,cloud_token:!0},o._asyncLogin(t),t},o.isOpened=function(){return null!=o.mAPI},o.close=function(){o.mAPI=null},o._getAPI=function(){return o.mAPI},o.getUserInfo=function(){var n=CloudHelpers.promise();return o.isOpened()?o.mAPI.getAccountInfo().done(function(a){o.mAPI.getAccountCapabilities().done(function(e){console.warn("caps:",e);e=new CloudUserInfo(o,a,e);n.resolve(e)}).fail(function(e){var t;500==e.status?(t=new CloudUserInfo(o,a),n.resolve(t)):CloudHelpers.handleError(e,n)})}).fail(function(e){CloudHelpers.handleError(e,n)}):n.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),n},o.getServerTimeDiff=function(){return o.mAPI.diffServerTime},o._asyncLogin=function(a){CloudHelpers.request({url:o.AccountProviderUrl+"api/v1/account/login/",type:"POST",data:JSON.stringify(o.RequestData),contentType:"application/json"}).done(function(e){var t;e.cloud_token&&e.cloud_token.token?(t=CloudHelpers.parseUri(e.svcp_auth_app_url).host,t=("file:"==window.location.protocol?"http:":window.location.protocol)+"//"+t+"/",o.mAPI=new CloudAPI(e.cloud_token,t),o.mAPI.getServerTime().done(function(){a.resolve()}).fail(function(e){a.reject(e)})):(console.warn("Try again after 1 sec"),setTimeout(function(){o._asyncLogin(a)},1e3))}).fail(function(e){console.error(e),a.reject(e)})}},window.CloudUserInfo=function(e,t,a){var n,o,r,i,s,l,c,u,d,m=this,p=e;function f(e,t){o=t,r=(n=e).id,i=e.email,s=e.first_name,l=e.last_name,c=e.preferred_name,t?(u=t.cameras_creation.limits.total_cameras,t.cameras_creation.limits.hosted_cameras,d=t.cameras_creation.created.total_cameras,t.cameras_creation.created.hosted_cameras):d=u=0}f(t,a),m._getConn=function(){return p},m._origJsonAccount=function(){return n},m._origJsonCapabilities=function(){return o},m.getID=function(){return r},m.getEmail=function(){return i},m.getFirstName=function(){return s},m.getLastName=function(){return l},m.getPreferredName=function(){return c},m.getCameraLimit=function(){return u},m.getCameraCreated=function(){return d},m.refresh=function(){var a=CloudHelpers.promise();return p&&p.isOpened()?p._getAPI().getAccountInfo().done(function(t){p._getAPI().getAccountCapabilities().done(function(e){f(t,e),a.resolve()}).fail(function(e){500==e.status?f(t):CloudHelpers.handleError(e,a)})}).fail(function(e){CloudHelpers.handleError(e,a)}):a.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),a}},window.CloudCamera=function(e,t){var a=this;a.type="camera";var n,o,r,i,s,l,c,u,d,m,p,f,h,g,v,y,C,_,A,E=e,P=t.id,b=t.cmngrid;function T(e){r=(n=e).login,i=e.password,o=e.url,m=e.name,l=e.timezone,s=e.status,c=e.latitude,u=e.longitude,p=e.rec_mode,f="on"==e.rec_status,d=e.delete_at,h=e.brand,g=e.group_name,v=e.fw_version,C=e.model,e.serial_number,_=e.uuid,y=e.led,A=e.public||!1}var w={};T(t),a._getConn=function(){return console.log("mConn = "+E),E},a._origJson=function(){return n},a.getID=function(){return P},a.getRecStatus=function(){console.warn("TODO")},a.hasPTZ=function(){console.warn("TODO")},a.getURL=function(){return o},a.setURL=function(e){o=e,w.url=e},a.getURLLogin=function(){return r},a.setURLLogin=function(e){r=e,w.login=e},a.getURLPassword=function(){return i},a.setURLPassword=function(e){i=e,w.password=e},a.getDeleteAt=function(){return d},a.getTimezone=function(){return l},a.setTimezone=function(e){l=e,w.timezone=e},a.isPublic=function(){return A},a.setPublic=function(e){A=e,w.public=e},a.getStatus=function(){var e=s.toUpperCase();return CloudCameraStatus[e]?CloudHelpers.copy(CloudCameraStatus[e]):(console.error("Unknown camera status"),null)},a.getName=function(){return m},a.setName=function(e){m=e,w.name=e},a.getLatitude=function(){return c},a.setLatitude=function(e){c=e,w.latitude=e},a.getLongitude=function(){return u},a.setLongitude=function(e){u=e,w.longitude=e},a.isRecording=function(){return f},a.getCameraManagerID=function(){return b},a.getBrand=function(){return h},a.getGroupName=function(){return g},a.getFirmwareVersion=function(){return v},a.getModel=function(){return C},a.getUUID=function(){return _},a.getLed=function(){return y},a.setRecordingMode=function(e){e.name==CloudCameraRecordingMode.CONTINUES.name?w.rec_mode="on":e.name==CloudCameraRecordingMode.BY_EVENT.name?w.rec_mode="by_event":e.name==CloudCameraRecordingMode.NO_RECORDING.name?w.rec_mode="off":e.name==CloudCameraRecordingMode.SERVER_BY_EVENT.name?w.rec_mode="server_by_event":console.error("[CloudCamera] Unknown mode of recording")},a.getRecordingMode=function(){return"on"==p?CloudHelpers.copy(CloudCameraRecordingMode.CONTINUES):"by_event"==p?CloudHelpers.copy(CloudCameraRecordingMode.BY_EVENT):"off"==p?CloudHelpers.copy(CloudCameraRecordingMode.NO_RECORDING):"server_by_event"===p?CloudHelpers.copy(CloudCameraRecordingMode.SERVER_BY_EVENT):void console.error("[CloudCamera] Unknown mode of recording")},a.save=function(){var t=CloudHelpers.promise();return E._getAPI().updateCamera(P,w).done(function(e){T(e),w.timezone?E._getAPI().updateCameraManager(b,{timezone:w.timezone}).done(function(){l=w.timezone,w={},t.resolve()}).fail(function(e){CloudHelpers.handleError(e,t)}):(w={},t.resolve())}).fail(function(e){CloudHelpers.handleError(e,t)}),t},a.getPreview=function(){var a=CloudHelpers.promise();if(!E||!E.isOpened())return a.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),a;var n=E._getAPI().diffServerTime;return E._getAPI().cameraPreview(P).done(function(t){console.log(t);var e=CloudHelpers.parseUTCTime(t.time);curr_time=CloudHelpers.getCurrentTimeUTC()+n,60<(curr_time-e)/1e3?E._getAPI().cameraUpdatePreview(P).done(function(e){a.resolve(t.url)}).fail(function(e){CloudHelpers.handleError(e,a)}):a.resolve(t.url)}).fail(function(e){CloudHelpers.handleError(e,a)}),a},a.getTimeline=function(r,i){var s=CloudHelpers.promise();if(!E||!E.isOpened())return s.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),s;var e=CloudHelpers.formatUTCTime(r),t=CloudHelpers.formatUTCTime(i);return E._getAPI().storageTimeline(P,e,t,4).done(function(e){var t={};t.start=r,t.end=i,t.periods=[];for(var a=e.objects[0][4],n=0;n<a.length;n++){var o={};o.start=CloudHelpers.parseUTCTime(a[n][0]),o.end=o.start+1e3*a[n][1],t.periods.push(o)}s.resolve(t)}).fail(function(e){CloudHelpers.handleError(e,s)}),s},a.getTimelineDays=function(e){var n=CloudHelpers.promise();return E&&E.isOpened()?E._getAPI().storageActivity(P,e).done(function(e){for(var t=[],a=0;a<e.objects.length;a++)t.push(CloudHelpers.parseUTCTime(e.objects[a]+"T00:00:00"));n.resolve(t)}).fail(function(e){CloudHelpers.handleError(e,n)}):n.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),n},a.getCameraUsage=function(){var t=CloudHelpers.promise();return E&&E.isOpened()?E._getAPI().cameraUsage(P).done(function(e){t.resolve(e)}).fail(function(e){CloudHelpers.handleError(e,t)}):t.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),t};var S="COMMON_SHARING_TOKEN";function M(e){var t={};return t.token=e,t.camid=P,t.access="watch",E.ServiceProviderUrl&&(t.svcp=E.ServiceProviderUrl),E.ApiHost&&(t.api=E.ApiHost),E.ApiPort&&80!=E.ApiPort&&(t.api_p=E.ApiPort),E.ApiSecurePort&&443!=E.ApiSecurePort&&(t.api_sp=E.ApiSecurePort),CloudHelpers.base64_encode(JSON.stringify(t))}a.enableSharing=function(){var o=CloudHelpers.promise();return E&&E.isOpened()?E._getAPI().getCameraSharingTokensList(P).done(function(e){for(var t=!1,a=0;a<e.objects.length;a++){var n=e.objects[a];if(n.name==S)return t=!0,void(1==n.enabled?o.resolve(M(n.token)):E._getAPI().updateCameraSharingToken(P,n.id,{enabled:!0}).done(function(e){o.resolve(M(n.token))}).fail(function(e){CloudHelpers.handleError(e,o)}))}t||E._getAPI().creareCameraSharingToken(P,S,["live","play","clipsplay"]).done(function(e){o.resolve(M(e.token))}).fail(function(e){CloudHelpers.handleError(e,o)})}).fail(function(e){CloudHelpers.handleError(e,o)}):o.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),o},a.disableSharing=function(e){var n=CloudHelpers.promise();return E&&E.isOpened()?E._getAPI().getCameraSharingTokensList(P).done(function(e){for(var t=0;t<e.objects.length;t++){var a=e.objects[t];if(a.name==S)return void E._getAPI().updateCameraSharingToken(P,a.id,{enabled:!1}).done(function(e){console.log(e),n.resolve()}).fail(function(e){CloudHelpers.handleError(e,n)})}n.reject()}).fail(function(e){CloudHelpers.handleError(e,n)}):n.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),n},a.createClip=function(e,t,a,n,o){var r=CloudHelpers.promise();if(!E||!E.isOpened())return r.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),r;t=CloudHelpers.formatUTCTime(t),a=CloudHelpers.formatUTCTime(a),n=CloudHelpers.formatUTCTime(n);return E._getAPI().createClip(P,e,t,a,n,o).done(function(e){r.resolve(e)}).fail(function(e){CloudHelpers.handleError(e,r)}),r},a.getClip=function(e,t){var a=CloudHelpers.promise();return E&&E.isOpened()?E._getAPI().getClip(e,t).done(function(e){a.resolve(e)}).fail(function(e){CloudHelpers.handleError(e,a)}):a.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),a};var I="COMMON_SHARING_TOKEN_FOR_STREAM";function R(e){var t={};return t.token=e,t.camid=P,t.cmngrid=b,t.access="all",t.api_p=80,t.api_sp=443,t.cam="cam.skyvr.videoexpertsgroup.com",t.cam_p=8888,t.cam_sp=8883,E.ServiceProviderUrl&&(t.svcp=E.ServiceProviderUrl),E.ApiHost&&(t.api=E.ApiHost),E.ApiPort&&80!=E.ApiPort&&(t.api_p=E.ApiPort),E.ApiSecurePort&&443!=E.ApiSecurePort&&(t.api_sp=E.ApiSecurePort),E.CamHost&&(t.cam=E.CamHost),E.CamPort&&(t.cam_p=E.CamPort),E.CamSecurePort&&(t.cam_sp=E.CamSecurePort),CloudHelpers.base64_encode(JSON.stringify(t))}a.enableSharingForStream=function(){var o=CloudHelpers.promise();return E&&E.isOpened()?E._getAPI().getCameraSharingTokensList(P).done(function(e){for(var t=!1,a=0;a<e.objects.length;a++){var n=e.objects[a];if(n.name==I)return t=!0,void(1==n.enabled?o.resolve(R(n.token)):E._getAPI().updateCameraSharingToken(P,n.id,{enabled:!0}).done(function(e){o.resolve(R(n.token))}).fail(function(e){CloudHelpers.handleError(e,o)}))}t||E._getAPI().creareCameraSharingToken(P,I,["all"]).done(function(e){o.resolve(R(e.token))}).fail(function(e){CloudHelpers.handleError(e,o)})}).fail(function(e){CloudHelpers.handleError(e,o)}):o.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),o},a.getStreamingURL=function(){var t=CloudHelpers.promise();return E&&E.isOpened()?E._getAPI().getCameraStreamingURLs(P).done(function(e){t.resolve(e)}).fail(function(e){CloudHelpers.handleError(e,t)}):t.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),t},a.setPublishPassword=function(e){w.publish_password=e}},window.CloudCameraListFilter=function(){var o=this;o.filterParams={detail:"detail",limit:50},o.setLimit=function(e){o.filterParams.limit=e},o.setOffset=function(e){o.filterParams.offset=e},o.setName=function(e){void 0!==e?o.filterParams.name=e:delete o.filterParams.name},o.setPartOfName=function(e){void 0!==e?o.filterParams.name__icontains=e:delete o.filterParams.name__icontains},o.sortByName=function(e){o.filterParams.order_by=(e?"-":"")+"name"},o.sortByDate=function(e){o.filterParams.order_by=(e?"-":"")+"created"},o.setOwner=function(e){console.warn("setPublic is deprecated"),void 0!==e?o.filterParams.is_owner=e:delete o.filterParams.is_owner},o.setPublic=function(e){console.warn("setPublic is deprecated"),void 0!==e?o.filterParams.public=e:delete o.filterParams.public},o.setForStream=function(e){void 0!==e&&void 0!==e?o.filterParams.url__isnull=e:delete o.filterParams.url__isnull},o.setPrivacy=function(e){void 0!==e&&e.name?"PS_OWNER_NOT_PUBLIC"==e.name?(o.filterParams.public=!1,o.filterParams.is_owner=!0):"PS_OWNER"==e.name?(delete o.filterParams.public,o.filterParams.is_owner=!0):"PS_PUBLIC_NOT_OWNERS"==e.name?(o.filterParams.public=!0,o.filterParams.is_owner=!1):"PS_PUBLIC"==e.name?(o.filterParams.public=!0,delete o.filterParams.is_owner):"PS_OWNERS_PUBLIC"==e.name?(o.filterParams.public=!0,o.filterParams.is_owner=!0):("PS_ALL"==e.name||console.error("Unknown privacy filter"),delete o.filterParams.public,delete o.filterParams.is_owner):(console.error("Unknown privacy filter"),delete o.filterParams.public,delete o.filterParams.is_owner)},o.setURL=function(e){void 0!==e?o.filterParams.url=e:delete o.filterParams.url},o.setLatLngBounds=function(e,t,a,n){console.warn("[CloudCamerasListFilter] SetLatLngBounds, TODO test -1 < lat,lang < 1"),e<=t&&(o.filterParams.latitude__gte=e,o.filterParams.latitude__lte=t),a<=n&&(o.filterParams.longitude__gte=a,o.filterParams.longitude__lte=n)},o._values=function(){return o.filterParams}},window.CloudCameraList=function(e){var i=this,s=e;i.getCamera=function(e){var t=CloudHelpers.promise();return s&&s.isOpened()?s._getAPI().getCamera(e).done(function(e){t.resolve(new CloudCamera(s,e))}).fail(function(e){CloudHelpers.handleError(e,t)}):t.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),t},i.createCamera=function(e,t,a){var n=CloudHelpers.promise();if(!s||!s.isOpened())return n.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),n;a={url:e,login:t,password:a};return s._getAPI().createCamera(a).done(function(e){n.resolve(new CloudCamera(s,e))}).fail(function(e){CloudHelpers.handleError(e,n)}),n},i.createCameraForStream=function(){var t=CloudHelpers.promise();if(!s||!s.isOpened())return t.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),t;return s._getAPI().createCamera({}).done(function(e){t.resolve(new CloudCamera(s,e))}).fail(function(e){CloudHelpers.handleError(e,t)}),t},i.findOrCreateCamera=function(e){var o=CloudHelpers.promise(),t=new CloudCameraListFilter;t.setOwner(!0);var r=CloudHelpers.splitUserInfoFromURL(e);return t.setURL(r.url),r.login=r.login||"",s._getAPI().camerasList(t._values()).done(function(e){for(var t=!1,a=0;a<e.objects.length;a++){var n=e.objects[a];if(n.login=n.login||"",n.login==r.login){t=!0,o.resolve(new CloudCamera(s,n));break}}t||i.createCamera(r.url,r.login,r.password).done(function(e){o.resolve(e)}).fail(function(e){CloudHelpers.handleError(e,o)})}).fail(function(e){CloudHelpers.handleError(e,o)}),o},i.getCameraList=function(e){var n=CloudHelpers.promise();return(e=e||new CloudCameraListFilter)._values?s&&s.isOpened()?s._getAPI().camerasList(e._values()).done(function(e){for(var t=[],a=0;a<e.objects.length;a++)t.push(new CloudCamera(s,e.objects[a]));n.resolve(t)}).fail(function(e){CloudHelpers.handleError(e,n)}):n.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION):(console.error(CloudReturnCode.ERROR_EXPECTED_FILTER),n.reject(CloudReturnCode.ERROR_EXPECTED_FILTER)),n},i.getCameraListLight=function(e){var t=CloudHelpers.promise();if(!(e=e||new CloudCameraListFilter)._values)return console.error(CloudReturnCode.ERROR_EXPECTED_FILTER),t.reject(CloudReturnCode.ERROR_EXPECTED_FILTER),t;if(!s||!s.isOpened())return t.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),t;e=e._values();return delete filterMap.detail,s._getAPI().camerasList(e).done(function(e){t.resolve(e.objects)}).fail(function(e){CloudHelpers.handleError(e,t)}),t},i.deleteCamera=function(e){var t=CloudHelpers.promise();return s&&s.isOpened()?s._getAPI().deleteCamera(e).done(function(){t.resolve()}).fail(function(e){CloudHelpers.handleError(e,t)}):t.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),t}},window.CloudSession=function(e,t){var a=this;a.type="session";var n,o,r,i,s,l,c,u,d,m,p,f,h,g,v,y,C=e,_=t.id,A=0,E=0,P=0;function b(e){o=(n=e).active,r=e.title,e.preview&&(T=e.preview.url),e.live_urls&&(g=e.live_urls.rtmp,v=e.live_urls.hls,y=e.live_urls.expire),l=e.latitude,c=e.longitude,i=e.streaming,s=e.public,u=e.start,d=e.end,m=e.has_records,e.statistics&&(E=e.statistics.peak_live||0,P=e.statistics.playback||0,A=e.statistics.live||0),h=e.author?e.author.preferred_name:"unknown",e.access&&(p=-1!=e.access.indexOf("all"),f=-1!=e.access.indexOf("watch"))}var T="";b(t),a._getConn=function(){return C},a._origJson=function(){return n},a.hasAccessAll=function(){return p},a.hasAccessWatch=function(){return p||f},a.getID=function(){return _},a.isOnline=function(){return o},a.getTitle=function(){return r},a.getAuthorPreferredName=function(){return h},a.getStatisticsLive=function(){return A},a.getStatisticsPeakLive=function(){return E},a.getStatisticsPlayback=function(){return P},a.getStartTime=function(){return null==u?(console.error("[CloudSession] #"+_+" Start time is null"),0):CloudHelpers.parseUTCTime(u)},a.getEndTime=function(){return null==u?(console.error("[CloudSession] #"+_+" End time is null but session is mActive: "+o),0):CloudHelpers.parseUTCTime(d)},a.getPreview=function(){return T},a.getLatitude=function(){return l},a.getLongitude=function(){return c},a.isStreaming=function(){return i},a.isPublic=function(){return s},a.hasRecords=function(){return m},a.getLiveUrl_Rtmp=function(){return g},a.getLiveUrl_HLS=function(){return v},a.getLiveUrl_Expire=function(){return y},a.refresh=function(){var t=CloudHelpers.promise();return C._getAPI().getCamsess(_).done(function(e){b(e),t.resolve()}).fail(function(e){CloudHelpers.handleError(e,t)}),t}},window.CloudSessionListFilter=function(){var o=this;o.filterParams={limit:50,order_by:"-start"},o.setLimit=function(e){o.filterParams.limit=e},o.setOffset=function(e){o.filterParams.offset=e},o.setTitle=function(e){o.filterParams.title__icontains=e},o.setStartLessThen=function(e){o.filterParams.start__lte=e},o.setHasRecords=function(e){"any"==e||("yes"==e?(o.filterParams.has_records=!0,o.filterParams.active=!1):"no"==e?(o.filterParams.has_records=!1,o.filterParams.active=!1):console.error("[CloudSessionListFilter] setHasRecords, expected 'any', 'yes' or 'no'"))},o.setStreaming=function(e){"any"==e||("yes"==e?(o.filterParams.streaming=!0,o.filterParams.camera_online=!0,o.filterParams.active=!0):"no"==e?(o.filterParams.streaming=!1,delete o.filterParams.camera_online,o.filterParams.active=!1):console.error("[CloudSessionListFilter] setStreaming, expected 'any', 'yes' or 'no'"))},o.setAuthorName=function(e){o.filterParams.author_name__icontains=e},o.setAuthorID=function(e){e?o.filterParams.author_id=e:delete o.filterParams.author_id},o.setAuthorPreferredName=function(e){e?o.filterParams.author_preferred_name__icontains=e:delete o.filterParams.author_preferred_name__icontains},o.setWithDetails=function(){console.warn("[CloudSessionListFilter] 'setWithDetails' not supported anymore. Please use getSessionList or getSessionListLight")},o.setOnline=function(e){console.warn("[CloudSessionListFilter] 'setOnline' not supported anymore")},o.setPublic=function(e){"any"==e||("yes"==e?o.filterParams.public=!0:"no"==e?o.filterParams.public=!1:console.error("[CloudSessionListFilter] setOnline, expected 'any', 'yes' or 'no'"))},o.setLatLngBounds=function(e,t,a,n){e<=t?(o.filterParams.latitude__gte=e,o.filterParams.latitude__lte=t):console.error("[CloudCamerasListFilter] latitude_max must be greater or equal to latitude_min"),a<=n?(o.filterParams.longitude__gte=a,o.filterParams.longitude__lte=n):console.error("[CloudCamerasListFilter] longitude_max must be greater or equal to longitude_min")},o._values=function(){var e,t={};for(e in o.filterParams)t[e]=o.filterParams[e];return t}},window.CloudSessionList=function(e){var o=e;this.getSession=function(e){var t=CloudHelpers.promise();return o&&o.isOpened()?o._getAPI().getCamsess(e).done(function(e){t.resolve(new CloudSession(o,e))}).fail(function(e){CloudHelpers.handleError(e,t)}):t.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),t},this.getSessionList=function(e){var n=CloudHelpers.promise();if(!(e=e||new CloudSessionListFilter)._values)return console.error(CloudReturnCode.ERROR_EXPECTED_FILTER),n.reject(CloudReturnCode.ERROR_EXPECTED_FILTER),n;if(!o||!o.isOpened())return n.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),n;e=e._values();return e.detail="detail",o._getAPI().getCamsessList(e).done(function(e){for(var t=[],a=0;a<e.objects.length;a++)t.push(new CloudSession(o,e.objects[a]));n.resolve(t)}).fail(function(e){CloudHelpers.handleError(e,n)}),n},this.getSessionListLight=function(e){var t=CloudHelpers.promise();if(!(e=e||new CloudSessionListFilter)._values)return console.error(CloudReturnCode.ERROR_EXPECTED_FILTER),t.reject(CloudReturnCode.ERROR_EXPECTED_FILTER),t;if(!o||!o.isOpened())return t.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),t;e=e._values();return delete e.detail,o._getAPI().getCamsessList(e).done(function(e){t.resolve(e.objects)}).fail(function(e){CloudHelpers.handleError(e,t)}),t},this.deleteSession=function(e){var t=CloudHelpers.promise();return o&&o.isOpened()?o._getAPI().deleteCamsess(e).done(function(){t.resolve()}).fail(function(e){CloudHelpers.handleError(e,t)}):t.reject(CloudReturnCode.ERROR_NO_CLOUD_CONNECTION),t}},window.CloudPlayerEvent={},CloudPlayerEvent.CONNECTING={name:"CONNECTING",code:0,text:"Connection is establishing"},CloudPlayerEvent.CONNECTED={name:"CONNECTED",code:1,text:"Connection is established"},CloudPlayerEvent.PLAYED={name:"PLAYED",code:2,text:"Player changes state to PLAY."},CloudPlayerEvent.PAUSED={name:"PAUSED",code:3,text:"Player state is PAUSE."},CloudPlayerEvent.STOPED={name:"STOPED",code:4,text:"Player state is STOP."},CloudPlayerEvent.CLOSED={name:"CLOSED",code:6,text:"Player state is CLOSED."},CloudPlayerEvent.SEEK_COMPLETED={name:"SEEK_COMPLETED",code:17,text:"setPosition() is successfully finished."},CloudPlayerEvent.ERROR={name:"ERROR",code:105,text:"Player is disconnected from media stream due to an error"},CloudPlayerEvent.SOURCE_CHANGED={name:"SOURCE_CHANGED",code:3e3,text:"setSource() is successfully finished."},CloudPlayerEvent.POSITION_JUMPED={name:"POSITION_JUMPED",code:3001,text:"Position was changed by player (possible that player did not found records)."},CloudPlayerEvent.RANGE_ENDED={name:"RANGE_ENDED",code:4455,text:"The player reached the end of the range when playing"},CloudPlayerEvent.CHANNEL_STATUS={name:"CHANNEL_STATUS",code:4456,text:"When channel status"},CloudPlayerEvent.USER_CLICKED_ON_TIMELINE={name:"USER_CLICKED_ON_TIMELINE",code:4457,text:"When user click on timeline."},CloudPlayerEvent.CHANGED_CONTROLS={name:"CHANGED_CONTROLS",code:4458,text:"Event when controls changes"},CloudPlayerEvent.TIMELINE_END_UPDATED={name:"TIMELINE_END_UPDATED",code:4459,text:"Event when timeline end updated"},CloudPlayerEvent.ACCESS_TOKEN_EXPIRED_IN_5MIN={name:"ACCESS_TOKEN_EXPIRED_IN_5MIN",code:4460,text:"Access token expired in 5 minutes"},window._cloudPlayers=window._cloudPlayers||{},window.CloudPlayer=function(o,t){var h=this;h.options=t=t||{},h.elid=o;var u=null,a=null,n=!0,r=0,i=!0,s=!1,l=!1,c=!1,d=CloudHelpers.createCallbacks(),m="",p=null,f=null,g=null,v=null,y=null,C=!1,_=null,A=null,E=null,P=null,b=null,e=null,T=null,w=null,S=null,M=void 0,I="records",R=null;if(h.mPTZActions=null,h.mPTZShow=!0,h.isMobile=CloudHelpers.isMobile(),h.timePolingLiveUrls=15e3,h.player=document.getElementById(o),_cloudPlayers[o])return _cloudPlayers[o];var k=-1,O=-1,N={w:0,h:0};if(CloudHelpers.isChrome()&&!h.isMobile?(videojs.options.hls=videojs.options.hls||{},videojs.options.html5.nativeAudioTracks=!0,videojs.options.html5.nativeVideoTracks=!1,videojs.options.hls.overrideNative=!1):(videojs.options.hls=videojs.options.hls||{},videojs.options.html5.nativeAudioTracks=!1,videojs.options.html5.nativeVideoTracks=!1,videojs.options.hls.overrideNative=!0),videojs.options.hls.enableLowInitialPlaylist=!0,videojs.options.suppressNotSupportedError=!1,videojs.options.techCanOverridePoster=!0,null==h.player)return console.error("[CloudPlayer] Not found element"),null;if("DIV"!=h.player.tagName)return console.error("[CloudPlayer] Expected DIV tag but got "+h.player.tagName),null;var D=-1,L=0,x=2e3,U=5e3,H=null;h.m={},h.m.mute=!1,h.m.waitSourceActivation=t.waitSourceActivation||0,h.m.useTimezone=t.useTimezone,h.m.useTimezone&&console.warn("[CloudPlayer] useTimezone: "+h.m.useTimezone),h.m.waitSourceActivation<0&&(console.warn("[CloudPlayer] option waitSourceActivation must be greater than -1"),h.m.waitSourceActivation=0),h.m.useNativeHLS=t.useNativeHLS||!1,h.m.backwardAudio=!1,h.m.backwardAudio=t.backwardAudio||null!=h.player.getAttribute("backward-audio")||h.m.backwardAudio,h.defualtAutohide=3e3,void 0!==t.autohide?h.m.autohide=t.autohide:h.m.autohide=h.defualtAutohide,t.trasholdPlaybackInMs&&(t.trasholdPlaybackInMs,console.log("[CloudPlayer] applied option trasholdPlaybackInMs "+t.trasholdPlaybackInMs)),h.mPlayerFormat="html5";var j="";if(t.preferredPlayerFormat)h.mPreferredPlayerFormat=t.preferredPlayerFormat,j=t.preferredPlayerFormat;else try{"jpeg"===(j=localStorage.getItem("preferred_player_format"))&&(j="")}catch(e){console.error("[CloudPlayer] error load format: ",e)}if("webrtc"==j||"html5"==j||"flash"==j||"jpeg"==j?h.mPlayerFormat=j:console.warn("[CloudPlayer] Unknown player format: ",j,", html5 is used by default"),t.useOnlyPlayerFormat){var z=t.useOnlyPlayerFormat;if("webrtc"!==z&&"html5"!==z&&"flash"!==z&&"jpeg"!==z)console.error("Wrong value of useOnlyPlayerFormat, expected 'webrtc' or 'html5' or 'flash'");else if(h.mPlayerFormat=z,h.mPreferredPlayerFormat=z,"jpeg"!==(P=z))try{localStorage.setItem("preferred_player_format",z)}catch(e){}}void 0!==t.mute&&(h.m.mute=!0===t.mute),h.swf_backwardaudio="",h.player.classList.add("cloudplayer"),h.player.classList.add("green"),h.player.classList.add("black"),h.player.innerHTML='<div class="cloudplayer-loader" style="display: inline-block"></div><div class="cloudplayer-screenshot-loading" style="display: none">\t\t<div class="cloudplayer-screenshot-loading">     </div></div><div class="cloudplayer-error" style="display: none">\t<div class="cloudplayer-error-text" style="display: none"></div></div><div class="cloudplayer-ptz"><div class="ptz-controls">\t<div class="ptz-arrow ptz-top"></div>\t<div class="ptz-arrow ptz-right"></div>\t<div class="ptz-arrow ptz-bottom"></div>\t<div class="ptz-arrow ptz-left"></div><div class="ptz-zoom">\t<div class="ptz-zoom-plus"></div>\t<div class="ptz-zoom-minus"></div></div></div><div class="ptz-presets"><h4>Presets</h4><ul class="presets-list"><li data-presetNo="1">1</li><li data-presetNo="2">2</li><li data-presetNo="3">3</li><li data-presetNo="4">4</li><li data-presetNo="5">5</li></ul></div></div><div class="cloudplayer-controls-zoom-container">\t<div class="cloudplayer-controls-zoom-position">\t\t<div class="cloudplayer-zoom-position-cursor"></div>\t</div>\t<div class="cloudplayer-controls-zoom'+(h.isMobile?" mobile ":"")+'">\t\t<div class="cloudplayer-zoom-up"></div>\t\t<div class="cloudplayer-zoom-progress zoom10x"></div>\t\t<div class="cloudplayer-zoom-down"></div>\t</div></div><div class="cloudplayer-controls-timelapse-container">\t<div class="cloudplayer-timelapse-controls">\t\t<div class="cloudplayer-timelapse-left" ><span class="cloudplayer-timelapse-icon">&#10094;&#10094;</span></div>\t\t<div class="cloudplayer-timelapse-pause"><span class="cloudplayer-timelapse-icon">&#10073;&#10073;</span></div>\t\t<div class="cloudplayer-timelapse-right"><span class="cloudplayer-timelapse-icon">&#10095;&#10095;</span></div>\t</div></div><div class="cloudplayer-watermark"></div><div class="cloudplayer-sdkversion">SDK '+CloudSDK.version+'</div><div class="cloudplayer-selectcliptime">    <table><tr><td>Before<br/><span>(sec.)</span></td><td>Date/Time</td><td>After<br/><span>(sec.)</span></td></tr>    <tr><td><input class="clipbefore" type="number" min=1 max=3600 value="10"></td><td class="clipdt"></td><td><input class="clipafter" type="number" min=1 max=3600 value="10"></td></tr>    <tr><td colspan="3"><div class="clipcreatebtn">Create clip &gt;</div></td></tr></table></div><div class="cloudplayer-info'+(h.isMobile?" mobile ":"")+'"><div class="cloudplayer-info-main">\t\t<div class="cloudplayer-info-title">Settings</div>\t\t<div class="cloudplayer-info-container">\t\t<div class="cloudplayer-info-player-mode" style="'+(null!==P?"disabled":"")+'"> Preferred format: \t\t<div class="selected-format"></div></div>'+(CloudHelpers.isIE()?"":'\t\t<div class="cloudplayer-info-player-dewarping enabled"  style="">Dewarping: \t\t<div class="selected-dewarping">Off</div></div>')+'\t\t<div class="cloudplayer-info-player-speed enabled">Speed: \t\t<div class="selected-speed">1x</div></div>\t\t\x3c!-- div class="cloudplayer-info-latency">Player Latency: \t\t\t<div class="cloudplayer-info-latency-minimal">Minimal Latency</div>\t\t\t/  \t\t<div class="cloudplayer-info-latency-smoothless">Maximum Smoothness</div>\t\t</div --\x3e\t\t\x3c!-- div class="cloudplayer-info-latency-not-supported">Player Latency: Setting is not available for HTML5 player</div --\x3e\t\t<div class="cloudplayer-info-bufferlength"></div>\t\t<div class="cloudplayer-info-audio-stream">Audio stream: \t\t\t<div class="cloudplayer-info-audio-stream-on">On</div>\t\t\t/  \t\t<div class="cloudplayer-info-audio-stream-off">Off</div>\t\t</div>\t\t<div class="cloudplayer-info-playerversion">Version: '+CloudSDK.version+" ("+CloudSDK.datebuild+')</div>\t\t<div class="cloudplayer-info-playertype">Used player:</div></div></div><div class="cloudplayer-info-setting mode-select">\t\t<div class="cloudplayer-info-title"><span class="back"></span>Preferred format</div>\t\t<div class="cloudplayer-info-container">\t\t\t<div class="cloudplayer-player-mode cloudplayer-webrtc-mode" style="display: none">'+(t.alt_protocol_names?"Low latency":"WebRTC")+'</div> \t\t\t<div class="cloudplayer-player-mode cloudplayer-flash-mode selected">'+(t.alt_protocol_names?"Standard":"RTMP")+'</div> \t\t\t<div class="cloudplayer-player-mode cloudplayer-html5-mode">'+(t.alt_protocol_names?"Reliable":"HLS")+'</div>\t\t\t<div class="cloudplayer-player-mode cloudplayer-jpeg-mode">'+(t.alt_protocol_names?"Performance":"JPEG")+'</div>\t\t</div></div><div class="cloudplayer-info-setting dewarping-select">\t\t<div class="cloudplayer-info-title"><span class="back"></span>Dewarping</div>\t\t<div class="cloudplayer-info-container">\t\t\t<div class="cloudplayer-player-mode cloudplayer-dewarping-mode selected" data-dewarping="0">Off</div>\t\t\t<div class="cloudplayer-player-mode cloudplayer-dewarping-mode" data-dewarping="1">On</div>\t\t</div></div><div class="cloudplayer-info-setting speed-select">\t\t<div class="cloudplayer-info-title"><span class="back"></span>Speed</div>\t\t<div class="cloudplayer-info-container">\t\t\t<div class="cloudplayer-player-mode cloudplayer-speed-mode" data-speed="0.125">0.125x</div>\t\t\t<div class="cloudplayer-player-mode cloudplayer-speed-mode'+(h.isMobile?" mobile ":"")+'" data-speed="0.25">0.25x</div>\t\t\t<div class="cloudplayer-player-mode cloudplayer-speed-mode" data-speed="0.5">0.5x</div>\t\t\t<div class="cloudplayer-player-mode cloudplayer-speed-mode selected" data-speed="1">1x</div>\t\t\t<div class="cloudplayer-player-mode cloudplayer-speed-mode'+(h.isMobile?" mobile ":"")+'" data-speed="2">2x</div>\t\t\t<div class="cloudplayer-player-mode cloudplayer-speed-mode" data-speed="4">4x</div>\t\t\t<div class="cloudplayer-player-mode cloudplayer-speed-mode'+(h.isMobile?" mobile ":"")+'" data-speed="8">8x</div>\t\t\t<div class="cloudplayer-player-mode cloudplayer-speed-mode" data-speed="16">16x</div>\t\t</div></div></div><div class="cloudplayer-backwardaudio-container">'+(h.m.backwardAudio?'\t\t<object data="'+h.swf_backwardaudio+'" type="application/x-shockwave-flash" id="backwardaudio_swf_single" align="top">\t\t\t<param name="movie" value="'+h.swf_backwardaudio+'" />\t\t\t<embed type="application/x-shockwave-flash" src="'+h.swf_backwardaudio+'">\t\t\t<param name="allowScriptAccess" value="always"/>\t\t\t<param value="allowNetworking" value="all"/>\t\t\t<param name="menu" value="true" />\t\t\t<param name="wmode" value="transparent"/>\t\t\t\x3c!-- param name="bgcolor" value="#ffffff" / --\x3e\t\t\t<param name="menu" value="false" />\t\t</object>':"")+'\t\t<video class="cloudplayer-backward-webrtc" crossorigin="anonymous" autoplay=true preload playsinline="true" style="width: 10px; height: 10px; background-color: #000;"></video></div><div class="cloudplayer-calendar-container"></div><div class="cloudplayer-live-container"></div><div class="cloudplayer-controls-container"><div class="cloudplayer-timeline-container"></div><div class="cloudplayer-controls">\t<div class="cloudplayer-play" style="display: none"></div>\t<div class="cloudplayer-stop" style="display: none"></div>\t<div class="cloudplayer-pause hidden"></div>\t<div class="cloudplayer-volume-mute"></div>\t<div class="cloudplayer-volume-container">\t\t<input type="range" min="0" max="100" value="100" step="1" data-buffer="0" id="volume" class="cloudplayer-volume" data-rangeSlider>\t\t<output></output>\t</div>\t<div class="cloudplayer-time'+(h.isMobile?" mobile ":"")+(t.hideTime?" hidden":"")+'"></div>\t<div class="cloudplayer-volume-down"></div>\t<div class="cloudplayer-volume-progress vol7"></div>\t<div class="cloudplayer-volume-up"></div>\t<div class="cloudplayer-right-divider"></div>\t<div class="cloudplayer-microphone disabled"></div>\t<div class="cloudplayer-get-clip" style="display: none"></div>\t<div class="cloudplayer-get-shot" style="display: none"></div>\t<div class="cloudplayer-record-mode mode-records" style="display: none"></div>\t<div class="cloudplayer-single-element-divider"></div>\t<div class="cloudplayer-settings"></div>\t<div class="cloudplayer-show-zoom"></div>\t<div class="cloudplayer-show-ptz"></div>\t<div class="cloudplayer-fullscreen"></div></div></div><div class="cloudcameracalendar-content'+(h.isMobile?" mobile ":"")+'"></div><div class="cloudplayer-big-play-button" style="display: none"></div><canvas class="cloudplayer-stub-snapshot" style="width:100%; height:100%; display:none;"></canvas><canvas class="cloudplayer-snapshot hidden"></canvas><div class="cloudplayer-share-clip" style="width:100%; height:100%; display:none;"></div><div class="allvideotags" style="width:100%; height:100%;" >\t<video crossorigin="anonymous" id="'+o+'_vjs" class="video-js" preload="auto" class="video-js vjs-default-skin vjs-live vjs-fill" \t\tcontrols width="100%" height="100%"\t\t muted='+h.m.mute+' autoplay=true preload playsinline="true"></video>\t<div class="cloudplayer-vxgcloudplayer-container" style="position:absolute;top:0;left:0;width:100%!important;height:100%!important;z-index:-2;display:block;">\t\t<vxg-cloud-player class="cloudplayer-vxgcloudplayer" id="'+o+'_vxg_cloud_player" timelineselector="#'+o+'_timeline" thumbnails videomodule="k-video-sdvxg" controls="k-control-timepicker " style="display: block; width:100%;height:100%;"></vxg-cloud-player>\t</div>\t<video crossorigin="anonymous" id="'+o+'_native_hls" class="cloudplayer-native-hls"\t\tmuted='+h.m.mute+' autoplay=true preload  playsinline="true" ></video>\t<video crossorigin="anonymous" id="'+o+'_webrtc" class="cloudplayer-webrtc"\t\tmuted='+h.m.mute+' preload  playsinline="true" ></video> \t<div id="'+o+'_jpg" class="cloudplayer-jpeg"></div> \t<div id="'+o+'_timelapse" class="cloudplayer-timelapse"></div></div><div class="cloudplayer-black-screen" style="display: none">\t\t<div class="cloudplayer-watermark"></div>\t\t<div class="cloudplayer-sdkversion">SDK '+CloudSDK.version+'</div></div><div class="cloudplayer-debug" style="display: none; position : absolute; z-index: 12; width: 100%; height : 50px; background-color: white;">/<div>',h.vjs=videojs(o+"_vjs",{controls:!1}),h.vjs.on("error",function(e){var t;et(),null!=h.vjs.error()&&(t=h.vjs.error(),h.isLive()?4!=t.code||CloudHelpers.supportFlash()||h.isMobile||"flash"!=h.mPlayerFormat?3==t.code&&h.isMobile?h._showConsoleError(CloudReturnCode.ERROR_COULD_NOT_DECODE_STREAM_OR_COULD_NOT_SET_COOKIE_HLS):h._showConsoleError({name:"VIDEOJS_ERROR",text:"Code "+t.code+": "+t.message,code:-6e3}):h._showConsoleError({name:"REQUIRE_FLASH",text:"Please install and enable <a target='_black' href='https://get.adobe.com/flashplayer/'>Adobe Flash Player</a> and try again",code:-6001}):h._showConsoleError({name:"VIDEOJS_ERROR",text:"Code "+t.code+": "+t.message,code:-6e3})),h._hideSnapshot(!1),h.stop("by_vjs_error"),setTimeout(function(){h.play()},1e3)});var B=null;h.time=0;var F=h.player,W=h.player.getElementsByClassName("cloudplayer-controls")[0],G=h.player.getElementsByClassName("cloudplayer-volume")[0],Y=h.player.getElementsByClassName("cloudplayer-controls-zoom-container")[0],q=h.player.getElementsByClassName("cloudplayer-controls-zoom")[0],V=h.player.getElementsByClassName("cloudplayer-controls-zoom-position")[0],J=h.player.getElementsByClassName("cloudplayer-controls-container")[0],K=h.player.getElementsByClassName("cloudplayer-show-zoom")[0],Z=h.player.getElementsByClassName("cloudplayer-show-ptz")[0],X=h.player.getElementsByClassName("cloudplayer-microphone")[0],Q=h.player.getElementsByClassName("cloudplayer-get-shot")[0],ee=h.player.getElementsByClassName("cloudplayer-get-clip")[0],te=h.player.getElementsByClassName("cloudplayer-ptz")[0],ae=h.player.getElementsByClassName("cloudplayer-play")[0],ne=h.player.getElementsByClassName("cloudplayer-info")[0],oe=h.player.getElementsByClassName("clipcreatebtn")[0],re=h.player.getElementsByClassName("cloudplayer-stop")[0],ie=h.player.getElementsByClassName("cloudplayer-pause")[0],se=h.player.getElementsByClassName("cloudplayer-loader")[0],le=h.player.getElementsByClassName("cloudplayer-error")[0],ce=h.player.getElementsByClassName("cloudplayer-error-text")[0],ue=h.player.getElementsByClassName("cloudplayer-time")[0],de=h.player.getElementsByClassName("clipdt")[0],me=h.player.getElementsByClassName("cloudplayer-big-play-button")[0],p=h.player.getElementsByClassName("cloudplayer-webrtc")[0],v=h.player.getElementsByClassName("cloudplayer-native-hls")[0],pe=h.player.getElementsByClassName("cloudplayer-jpeg")[0],fe=h.player.getElementsByClassName("cloudplayer-timelapse")[0],he=h.player.getElementsByClassName("cloudplayer-controls-timelapse-container")[0],ge=h.player.getElementsByClassName("cloudplayer-timelapse-left")[0],ve=h.player.getElementsByClassName("cloudplayer-timelapse-pause")[0],ye=h.player.getElementsByClassName("cloudplayer-timelapse-right")[0],Ce=h.player.getElementsByClassName("cloudplayer-record-mode")[0],_e=h.player.getElementsByClassName("cloudplayer-info-playertype")[0],Ae=h.player.getElementsByClassName("cloudplayer-settings")[0],Ee=(h.player.getElementsByClassName("cloudplayer-info-close")[0],h.player.querySelectorAll(".cloudplayer-info-title .back")),Pe=h.player.getElementsByClassName("cloudplayer-info-player-mode")[0],be=h.player.querySelector(".cloudplayer-info-player-speed"),Te=h.player.getElementsByClassName("selected-format")[0],we=h.player.querySelector(".cloudplayer-info-player-speed.enabled .selected-speed"),Se=h.player.querySelector(".cloudplayer-info-player-dewarping.enabled .selected-dewarping"),Me=h.player.getElementsByClassName("cloudplayer-webrtc-mode")[0],Ie=h.player.getElementsByClassName("cloudplayer-flash-mode")[0],Re=h.player.getElementsByClassName("cloudplayer-html5-mode")[0],ke=h.player.getElementsByClassName("cloudplayer-jpeg-mode")[0],b=h.player.getElementsByClassName("cloudcameracalendar-content")[0],Oe=h.player.getElementsByClassName("cloudplayer-calendar-container")[0],Ne=h.player.getElementsByClassName("ptz-left")[0],De=h.player.getElementsByClassName("ptz-right")[0],Le=h.player.getElementsByClassName("ptz-top")[0],xe=h.player.getElementsByClassName("ptz-bottom")[0],Ue=h.player.getElementsByClassName("ptz-zoom-plus")[0],j=h.player.getElementsByClassName("ptz-zoom-minus")[0],He=h.player.getElementsByClassName("cloudplayer-calendar-container")[0],je=h.player.getElementsByClassName("cloudplayer-live-container")[0],ze=h.player.querySelectorAll(".cloudplayer-speed-mode"),Be=h.player.querySelectorAll(".cloudplayer-dewarping-mode"),R=h.player.getElementsByClassName("cloudplayer-vxgcloudplayer")[0],Fe=new CloudPlayerJpegLive(pe);h.options.jpegForcedUpdatePeriod&&Fe.setForcedUpdatePeriod(h.options.jpegForcedUpdatePeriod);var We=new CloudPlayerJpegTimelapse(fe),z=h.player.getElementsByClassName("cloudplayer-share-clip")[0];void 0!==z&&new CloudShareClipController(z,h._shareClipCallback);for(var Ge=ze.length-1;0<=Ge;Ge--)ze[Ge].onclick=Ke;for(var Ye=Be.length-1;0<=Ye;Ye--)Be[Ye].onclick=Ze;"undefined"!=typeof rangeSlider&&rangeSlider.create(G);var qe=document.querySelectorAll("[data-rangeSlider]");function Ve(e){var t=e.value;e.parentNode.getElementsByTagName("output")[0].innerHTML=t+"%"}for(var Je=qe.length-1;0<=Je;Je--)Ve(qe[Je]);function Ke(){for(var e=ze.length-1;0<=e;e--)ze[e].classList.remove("selected");this.classList.add("selected"),we.textContent=this.textContent,function(e){for(var t=F.getElementsByClassName("cloudplayer-native-video"),a=0;a<t.length;a++)t[a].defaultPlaybackRate=t[a].playbackRate=e;R&&(R.playbackRate=e)}(this.dataset.speed)}function Ze(){for(var e=Be.length-1;0<=e;e--)Be[e].classList.remove("selected");this.classList.add("selected"),Se.textContent=this.textContent,1==this.dataset.dewarping?h.pano.start():h.pano.stop()}for(Array.prototype.slice.call(document.querySelectorAll('input[type="range"]')).forEach(function(e){e.addEventListener("input",function(e){Ve(e.target)},!1)}),Je=0;Je<Ee.length;Je++)Ee[Je].onclick=function(){h.collapseMenu()};function $e(){le.style.display="none",ce.style.display="none"}var Xe=null;function Qe(e){e=Number(e);CloudHelpers.isIE()?isNaN(e)&&(e=0):Number.isNaN(e)&&(e=0),1==h.mShowedBigPlayButton?et():n||(0==e?(se.style.display="inline-block",n=!0):0<e&&(Xe=setTimeout(function(){se.style.display="inline-block",n=!0},e)))}function et(){n&&(null!=Xe&&clearTimeout(Xe),se.style.display="none",n=!1)}function tt(e){he.style.display=e?"flex":"none"}function at(e){e=e||{},Me.style.display=CloudHelpers.isIE()||!e.rtc&&!e.webrtc?"none":"",Ie.style.display="none",Re.style.display=e.hls?"":"none",ke.style.display=e.hls?"":"none",Me.classList.remove("selected"),Ie.classList.remove("selected"),Re.classList.remove("selected"),ke.classList.remove("selected"),"webrtc"==h.mPlayerFormat?(Me.classList.add("selected"),Te.textContent=Me.textContent):"flash"==h.mPlayerFormat?(Ie.classList.add("selected"),Te.textContent=Ie.textContent):"html5"==h.mPlayerFormat?(Re.classList.add("selected"),Te.textContent=Re.textContent):"jpeg"==h.mPlayerFormat&&(ke.classList.add("selected"),Te.textContent=ke.textContent)}h.onDocumentClick=function(e){ne.contains(e.target)||Ae==e.target||Ae.contains(e.target)||b==e.target||b.contains(e.target)||Q==e.target||ee==e.target||X==e.target||K==e.target||K.contains(e.target)||Y==e.target||Y.contains(e.target)||Oe==e.target||Oe.contains(e.target)||(h.player.classList.remove("showing-zoom","showing-settings"),h.calendar&&(h.calendar.hideCalendar(),(e=h.player.getElementsByClassName("cloudcameratimeline-calendar")[0])&&e.classList.remove("shadowed")))},document.addEventListener("click",h.onDocumentClick),Ae.onclick=function(){var e;h.player.classList.toggle("showing-settings"),h.player.classList.remove("showing-zoom"),h.player.getElementsByClassName("cloudplayer-selectcliptime")[0].style.display="none",h.calendar&&(h.calendar.hideCalendar(),(e=h.player.getElementsByClassName("cloudcameratimeline-calendar")[0])&&e.classList.remove("shadowed"))},Te.onclick=function(){F.classList.toggle("showing-format-selection")},we.onclick=function(){F.classList.toggle("showing-speed-selection")},null!=Se&&(Se.onclick=function(){F.classList.toggle("showing-dewarping-selection")}),Ne.onmousedown=function(){var e=u._getAPI();null!=e&&h.mPTZActions&&-1!=h.mPTZActions.indexOf("left")&&e.cameraPtzExecute(h.mSrc.getID(),{action:"left",timeout:1e4}).done(function(e){console.log("shifted to left")}).fail(function(e){console.error(e)})},De.onmousedown=function(){var e=u._getAPI();null!=e&&h.mPTZActions&&-1!=h.mPTZActions.indexOf("right")&&e.cameraPtzExecute(h.mSrc.getID(),{action:"right",timeout:1e4}).done(function(e){console.log("shifted to right")}).fail(function(e){console.error(e)})},Le.onmousedown=function(){var e=u._getAPI();null!=e&&h.mPTZActions&&-1!=h.mPTZActions.indexOf("top")&&e.cameraPtzExecute(h.mSrc.getID(),{action:"top",timeout:1e4}).done(function(e){console.log("shifted to up")}).fail(function(e){console.error(e)})},xe.onmousedown=function(){var e=u._getAPI();null!=e&&h.mPTZActions&&-1!=h.mPTZActions.indexOf("bottom")&&e.cameraPtzExecute(h.mSrc.getID(),{action:"bottom",timeout:1e4}).done(function(e){console.log("shifted to down")}).fail(function(e){console.error(e)})},Ue.onmousedown=function(){var e=u._getAPI();null!=e&&h.mPTZActions&&-1!=h.mPTZActions.indexOf("zoom_in")&&e.cameraPtzExecute(h.mSrc.getID(),{action:"zoom_in",timeout:1e4}).done(function(e){console.log("Zoomed in")}).fail(function(e){console.error(e)})},j.onmousedown=function(){var e=u._getAPI();null!=e&&h.mPTZActions&&-1!=h.mPTZActions.indexOf("zoom_out")&&e.cameraPtzExecute(h.mSrc.getID(),{action:"zoom_out",timeout:1e4}).done(function(e){console.log("Zoomed out")}).fail(function(e){console.error(e)})},Ue.onmouseup=j.onmouseup=Ne.onmouseup=De.onmouseup=Le.onmouseup=xe.onmouseup=function(){var e=u._getAPI();null!=e&&h.mPTZActions&&-1!=h.mPTZActions.indexOf("stop")&&e.cameraPtzExecute(h.mSrc.getID(),{action:"stop",timeout:1e3}).done(function(e){console.log("stop move")}).fail(function(e){console.error(e)})},K.onclick=function(){var e;h.player.classList.toggle("showing-zoom"),h.player.classList.remove("showing-settings"),h.player.getElementsByClassName("cloudplayer-selectcliptime")[0].style.display="none",h.calendar&&(h.calendar.hideCalendar(),(e=h.player.getElementsByClassName("cloudcameratimeline-calendar")[0])&&e.classList.remove("shadowed"))},Z.onclick=function(){-1==D&&F.classList.toggle("showing-ptz")},Q.onclick=function(){h._getSnapshot()},X.onclick=function(){-1==D&&h._sendBackwardAudio()},oe.onclick=function(){var e=h.player.getElementsByClassName("cloudplayer-selectcliptime")[0];e.style.display="none";var t=e.getElementsByClassName("clipbefore")[0],e=e.getElementsByClassName("clipafter")[0];isNaN(t.value)||isNaN(e.value)?alert('"Before" and "after" fields must contain a number'):(t=parseInt(t.value),e=parseInt(e.value),t<0||e<0?alert('"Before" and "after" fields must be above or equal 0'):t+e<10?alert("Min clip length is 10 seconds"):3600<t+e?alert("Max clip length is 1 hour (3600 seconds)"):h._getShareClip(t,e=3600<e?3600:e))},ee.onclick=function(){var e;ht?alert("Please wait until your previous clip making will completely finished"):-1!=D?"block"==(e=h.player.getElementsByClassName("cloudplayer-selectcliptime")[0]).style.display?e.style.display="none":(e.style.display="block",h.player.classList.remove("showing-zoom","showing-settings")):alert("Select a position with the recorded video on the timeline")},Ce.onclick=function(){I=Ce.classList.contains("mode-records")?(Ce.classList.remove("mode-records"),Ce.classList.add("mode-timelapse"),tt(!0),"timelapse"):(Ce.classList.add("mode-records"),Ce.classList.remove("mode-timelapse"),tt(!1),"records"),h.play()},ge.onclick=function(){console.log("TODO: timelapse left"),We&&(s=!0,We.rewind(h.time))},ve.onclick=function(){console.log("TODO: timelapse pause"),We&&(s=i=!1,We.pause())},ye.onclick=function(){console.log("TODO: timelapse right"),We&&(s=!0,We.fastforward(h.time))},Me.onclick=function(){void 0===t.useOnlyPlayerFormat&&(h.setPlayerFormat("webrtc"),h.play())},Ie.onclick=function(){void 0===t.useOnlyPlayerFormat&&(h.setPlayerFormat("flash"),h.play())},Re.onclick=function(){void 0===t.useOnlyPlayerFormat&&(h.setPlayerFormat("html5"),h.play())},ke.onclick=function(){void 0===t.useOnlyPlayerFormat&&(h.setPlayerFormat("jpeg"),h.play())},h.isMobile&&(Ie.style.display="none"),at();var nt=h.player.getElementsByClassName("cloudplayer-black-screen")[0];function ot(){nt.style.display=""}et(),h._showerror=function(e){console.error(e),h._setError(e),h.showErrorText(e.text),console.error(e.text),d.executeCallbacks(CloudPlayerEvent.ERROR,e)},h._showConsoleError=function(e){console.error(e),console.error(e.text)};var rt=30,it=15,st=null;function lt(){var e=0,e=60*-(new Date).getTimezoneOffset()*1e3,t=new Date,a=t.getTime()+e;if(a<0||Number.isNaN(a))return"";t.setTime(a);e=t.getUTCHours(),a="";return h.options.timelineampm&&(a=12<=e?" pm":" am",e=0==e?12:12<e?e-12:e)," "+("0000"+t.getUTCFullYear()).slice(-4)+"-"+("00"+(t.getUTCMonth()+1)).slice(-2)+"-"+("00"+t.getUTCDate()).slice(-2)+" "+("00"+e).slice(-2)+":"+("00"+t.getUTCMinutes()).slice(-2)+":"+("00"+t.getUTCSeconds()).slice(-2)+a}function ct(e){var t=0,t=60*-(new Date).getTimezoneOffset()*1e3,a=new Date,e=e+t;if(e<0||Number.isNaN(e))return"";a.setTime(e);t=a.getUTCHours(),e="";return h.options.timelineampm&&(e=12<=t?" pm":" am",t=0==t?12:12<t?t-12:t)," "+("0000"+a.getUTCFullYear()).slice(-4)+"-"+("00"+(a.getUTCMonth()+1)).slice(-2)+"-"+("00"+a.getUTCDate()).slice(-2)+" "+("00"+t).slice(-2)+":"+("00"+a.getUTCMinutes()).slice(-2)+":"+("00"+a.getUTCSeconds()).slice(-2)+e}function ut(){console.log("before play"),h._hideSnapshot(!0)}function dt(){clearInterval(e)}function mt(){console.warn("[PLAYER] Start poling player time"),clearInterval(e),e=setInterval(function(){if(s&&!i){var e=0;if("camera_records"==st)e="timelapse"===I?We.getcurrtime():Number(R.currentUtcTime);else if("camera_live"==st)if("webrtc0"==m||"webrtc2"==m)e=p?p.currentTime:0;else if("native-hls"==m)e=v?v.currentTime:0;else if("jpeg"==m)e=Fe.getcurrtime();else{try{e=1e3*h.vjs.currentTime()}catch(e){console.error("Ignore: ",e)}try{t=h.vjs.videoHeight(),a=h.vjs.videoWidth(),N.w==a&&N.h==t||(setTimeout(function(){var e,t=h.vjs.el();!t||(e=t.getElementsByTagName("object")[0])&&(e.style.width="calc(100% - 5px)",setTimeout(function(){e.style.width=""},1e3))},1e3),N.w=a,N.h=t)}catch(e){}}else try{e=1e3*h.vjs.currentTime()}catch(e){console.error("Ignore: ",e)}e==h.time?(Qe(h.options.loaderTimeout||0),r++,0==h.time&&rt<r?(h.stop("by_poling_time_1"),"webrtc"===h.mPlayerFormat?(h.stop("by_setError"),h.play()):(h.count_ERROR_STREAM_UNREACHABLE=1+(0|h.count_ERROR_STREAM_UNREACHABLE),3<h.count_ERROR_STREAM_UNREACHABLE?(h._showerror(CloudReturnCode.ERROR_STREAM_UNREACHABLE),h.count_ERROR_STREAM_UNREACHABLE=0):(console.warn("[PLAYER] stream unreachable: restart count"+h.count_ERROR_STREAM_UNREACHABLE),h.stop("by_setError"),h.play()))):0!=h.time&&it<r?(console.warn("Restart player"),h.stop("by_poling_time_2"),-1!=D&&h.time>D&&(D=Math.floor(h.time)),h.play()):"camera_records"==st?"timelapse"===I&&CloudHelpers.getCurrentTimeUTC()-e<18e4&&(We.pause(),setTimeout(function(){h.setPosition(CloudPlayer.POSITION_LIVE),h.play()},10)):(0!=h.time&&-1==D||Qe(),"jpeg"==m||console.warn("[PLAYER] Wait stream "+r))):(h.count_ERROR_STREAM_UNREACHABLE=0,r=0,h.mShowedBigPlayButton,me.style.display="none","camera_records"==st?(h.time=e,D=h.time,R.isPlaying()&&(ue.innerHTML=ct(h.time),de.innerHTML=ue.innerHTML)):"camera_live"==st?(h.time=e,ue.innerHTML=lt(),h.isRange()&&CloudHelpers.getCurrentTimeUTC()>O&&(dt(),h.stop("by_ended_timerange2"),d.executeCallbacks(CloudPlayerEvent.RANGE_ENDED,{}))):(h.time=-1==D?1e3*h.vjs.currentTime():H.startUTC+1e3*h.vjs.currentTime(),ue.innerHTML=lt()),0!=h.time&&et(),$e()),h.isRange()&&h.time>O&&(D=k,dt(),h.stop("by_ended_timerange"),d.executeCallbacks(CloudPlayerEvent.RANGE_ENDED,{}))}else et();var t,a},1e3)}function pt(e,t){h.mSrc?(r=0,"camera"==h.mSrc.type?(t=t,console.log("TODO: play records:"+t),setTimeout(function(){et()},1e3),dt(),R&&(st="camera_records",R.parentElement.style.zIndex=-1,R.parentElement.style.opacity=1,R.setTimePromise(D).then(function(){mt()}).catch(function(){}),l="timepicker"!==t,h.pause())):h._showerror(CloudReturnCode.ERROR_INVALID_SOURCE)):h._showerror(CloudReturnCode.ERROR_SOURCE_NOT_CONFIGURED)}function ft(){function e(){CloudHelpers.isIOS()||CloudHelpers.isAndroid(),CloudHelpers.isChrome()&&!CloudHelpers.autoPlayAllowed&&h.mPlayerFormat;h.vjs.play(),dt(),mt()}console.log("[PLAYER] _vjs_play_live, mEvent: ",a),me.style.display="none",CloudHelpers.isChrome()&&!CloudHelpers.autoPlayAllowed&&"html5"==h.mPlayerFormat?CloudHelpers.checkAutoplay(e):e()}R.addEventListener("playing",function(e){console.log("mVxgcloudplayer callback status is playing")}),R.addEventListener("pause",function(e){console.log("mVxgcloudplayer callback status is pause")}),R.addEventListener("statusupdate",function(e){console.log("mVxgcloudplayer callback status is "+e.status),"error"===e.status&&($(R).hasClass("camera_side_error")&&h.showErrorText("Camera side error"),$(R).hasClass("sync_timeout_error")&&h.showErrorText("Sync timeout"),$(R).hasClass("sync_error")?h.showErrorText("Syncronization error"):h.showErrorText("Error"),h.pause())}),h.showErrorText=function(e){et(),le.style.display="block",ce.style.display="inline-block",ce.innerHTML=e,ot()},h.getCalendarContent=function(){return b},h.setAccessToken=function(e){w=e},h.checkTokenExpire=function(){var e=CloudHelpers.getCurrentTimeUTC(),e=CloudHelpers.parseUTCTime(S)-e;e<3e5?d.executeCallbacks(CloudPlayerEvent.ACCESS_TOKEN_EXPIRED_IN_5MIN,e):setTimeout(function(){h.checkTokenExpire()},5e3)},h.setAccessTokenExpire=function(e){null!=(S=e)&&void 0!==S&&setTimeout(function(){h.checkTokenExpire()},5e3)},h.mPoster=null,h.setSource=function(e){$e(),clearInterval(_),ue.innerHTML="",h.mSrc=e,u=null==h.mSrc?(ae.style.display="none",null):(ae.style.display="inline-block",e._getConn());h.mSrc._origJson();h.mSrc._origJson().status="setsource",h.isRange()?(a=CloudHelpers.getCurrentTimeUTC(),k<a&&a<O?h.setPosition(CloudPlayer.POSITION_LIVE):h.setPosition(k)):h.setPosition(CloudPlayer.POSITION_LIVE),d.executeCallbacks(CloudPlayerEvent.SOURCE_CHANGED);var t,a,n,o,r,i,s,l,c,e=h.player;e&&(e.classList.remove("showing-ptz"),t=h.player.getElementsByClassName("cloudplayer-show-ptz")[0],a=h.player.getElementsByClassName("cloudplayer-get-clip")[0],e=h.player.getElementsByClassName("cloudplayer-get-shot")[0],n=h.player.getElementsByClassName("cloudplayer-microphone")[0],h.mSrc._origJson().access.indexOf("all")<0?(t.style.display="none",a.style.display="none"):h.options.disableGetClip&&0!=h.options.disableGetClip||CloudHelpers.isIE()||(a.style.display="block"),h.options.disableGetShot&&0!=h.options.disableGetShot||CloudHelpers.isIE()||(e.style.display="block"),u&&(We.setApi(u._getAPI()),o=h.player.getElementsByClassName("ptz-top")[0],r=h.player.getElementsByClassName("ptz-bottom")[0],i=h.player.getElementsByClassName("ptz-left")[0],s=h.player.getElementsByClassName("ptz-right")[0],l=h.player.getElementsByClassName("ptz-zoom-plus")[0],c=h.player.getElementsByClassName("ptz-zoom-minus")[0],h.options.livePoster&&1==h.options.livePoster&&u._getAPI().cameraPreview(h.mSrc.getID()).done(function(e){h.getCurrentVideoTag();var t=h.player.getElementsByClassName("allvideotags")[0].getElementsByTagName("video");h.mPoster=e.url;for(var a=0;a<t.length;a++)t[a].setAttribute("poster",h.mPoster);h.vjs.poster(h.mPoster)}).fail(function(e){}),u._getAPI().cameraPtz(h.mSrc.getID()).done(function(e){console.log(e);e=e.actions;void 0!==(h.mPTZActions=e)&&null!=e&&0<e.length?(h.mPTZShow&&(t.style.display="block"),o.style.display=-1<e.indexOf("top")?"block":"none",r.style.display=-1<e.indexOf("bottom")?"block":"none",i.style.display=-1<e.indexOf("left")?"block":"none",s.style.display=-1<e.indexOf("right")?"block":"none",l.style.display=-1<e.indexOf("zoom_in")?"block":"none",c.style.display=-1<e.indexOf("zoom_out")?"block":"none"):t.style.display="none"}).fail(function(e){console.log(e),t.style.display="none"}),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0!==h.options.disableBackwardAudio&&u._getAPI().cameraAudio(h.mSrc.getID()).done(function(e){console.log(e),void 0!==e.caps&&void 0!==e.caps.backward_formats&&0<e.caps.backward_formats.length?(M=e.caps.backward_formats,n.classList.remove("disabled")):n.classList.add("disabled")}).fail(function(e){console.log("Backward channel request:"+e),n.classList.add("disabled")}):n.classList.add("disabled"),w&&R&&(R.setAttribute("src",w),R.pause().then(function(){console.log("vxgcloudplayer pause")}).catch(function(e){console.log("vxgcloudplayer catch:"+e)}))))},h.getSource=function(){return h.mSrc},h.removeCallback=function(e){d.removeCallback(e)},h.addCallback=function(e,t){d.addCallback(e,t)},h.onTimelineEndUpdate=function(){-1==D&&i&&"block"==le.style.display&&(console.warn("TODO Restart live if some errors happends"),h.play())},h.playbackAutoplayBlocked=function(){-1==D&&console.warn("Skip error player already in live mode")},h.setPlayerFormat=function(e){if("webrtc"==(e=e.toLowerCase())||"flash"==e||"html5"==e||"jpeg"==e){h.mPlayerFormat=e;try{localStorage.setItem("preferred_player_format",h.mPlayerFormat)}catch(e){console.error("[CloudPlayer] error save format: ",e)}at()}else console.error("Player format expected 'webrtc' or 'flash' or 'html5'")},h.getPlayerFormat=function(){return sMode};var ht=null;h._shareClipCallback=function(e,t,a){var n=h.player.getElementsByClassName("cloudplayer-get-clip")[0];e?("CloudShareClip in process.."===t&&alert("The video is being prepared ..."),n.classList.add("inprocess")):(null!=ht&&(clearInterval(ht),ht=null),n.classList.remove("step1"),n.classList.remove("step2"),n.classList.remove("step3"),n.classList.remove("step4"),n.classList.remove("inprocess")),void 0!==a?(console.log("ShareClipInfo: "+a.url),(n=document.createElement("a")).setAttribute("href",a.url),n.click()):console.log("ShareClipInfo: "+t)},h._getShareClip=function(e,t){var a,n=h.mSrc,o=D;-1!=o?(o-=1e3*e,void 0!==(a=h.player.getElementsByClassName("cloudplayer-share-clip")[0])&&void 0!==n&&w&&void 0!==w&&(a.createClip(n,w,h._shareClipCallback,o,1e3*(t+e)),ht=setInterval(function(){var e=h.player.getElementsByClassName("cloudplayer-get-clip")[0];e.classList.contains("inprocess")?e.classList.contains("step1")?(e.classList.remove("step1"),e.classList.add("step2")):e.classList.contains("step2")?(e.classList.remove("step2"),e.classList.add("step3")):e.classList.contains("step3")?(e.classList.remove("step3"),e.classList.add("step4")):(e.classList.contains("step4")&&e.classList.remove("step4"),e.classList.add("step1")):(e.classList.remove("step1"),e.classList.remove("step2"),e.classList.remove("step3"),e.classList.remove("step4"))},500))):alert("Select a position with the recorded video on the timeline")},h._onResize=function(){var e=h.player.getElementsByClassName("cloudplayer-snapshot")[0],t=h.player.getElementsByClassName("allvideotags")[0];void 0!==e&&(e.setAttribute("width",t.clientWidth),e.setAttribute("height",t.clientHeight))},h._onResize(),window.addEventListener("resize",h._onResize),h._getSnapshot=function(){if(h.player){for(var e=h.player.getElementsByClassName("cloudplayer-stub-snapshot")[0],t=null,a=h.player.getElementsByClassName("allvideotags")[0].getElementsByTagName("video"),n=0;n<a.length;n++){var o=a[n],r=(o.currentStyle||getComputedStyle(o,null)).display,i=(o.parentElement.currentStyle||getComputedStyle(o.parentElement,null)).display;if("block"===(r=o.classList.contains("vjs-tech")?i:r)||"inline-block"===r){t=o;break}}if(null!=t||D==CloudHelpers.POSITION_LIVE||null==R||null!=(t=R.getVideo()).src&&""!=t.src&&4==t.readyState){if(null!=t){var s=t.videoWidth,l=t.videoHeight;if(0==s&&(s=t.clientWidth),0==l&&(l=t.clientHeight),0<s&&0<l&&(e.setAttribute("width",s),e.setAttribute("height",l),context=e.getContext("2d"),null!=context))if(context.fillRect(0,0,s,l),context.drawImage(t,0,0,s,l),void 0!==e.msToBlob)try{var c=e.msToBlob();window.navigator.msSaveOrOpenBlob(c,"snapshot.png")}catch(e){console.warn("Can't create snapshot due error: "+e.toString())}else{var u=document.createElement("a");u.setAttribute("download","snapshot.png"),e.toBlob(function(e){e=URL.createObjectURL(e);u.setAttribute("href",e),u.click()})}}}else null!=t.poster&&""!=t.poster&&fetch(t.poster).then(function(e){return e.blob()}).then(e=>{e=window.URL.createObjectURL(e);const t=document.createElement("a");t.style.display="none",t.href=e,t.download="snapshot.jpg",document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(e)}).catch(function(){})}},h._hideSnapshot=function(e){if(h.player){var t=h.player.getElementsByClassName("cloudplayer-snapshot")[0],a=null;e?$(t).addClass("hidden"):$(t).removeClass("hidden");for(var n,o,r,i,s,l,c,u=h.player.getElementsByTagName("video"),d=0;d<u.length;d++){var m=u[d],p=(m.currentStyle||getComputedStyle(m,null)).display,f=(m.parentElement.currentStyle||getComputedStyle(m.parentElement,null)).display;if("block"===(p=m.classList.contains("vjs-tech")?f:p)||"inline-block"===p){a=m;break}}null!=a&&(o=n=0,s=r=a.videoWidth,c=i=a.videoHeight,l=t.getAttribute("width"),e=t.getAttribute("height"),1<=(c=s/c)?(n=0,o=(e-(i=(r=l)/c))/2):(o=0,n=(l-(r=(i=e)*c))/2),context=t.getContext("2d"),null!=context&&(context.fillRect(n,o,r,i),context.drawImage(a,n,o,r,i)))}};var gt=null;h.sendBackwardAudio=function(){return!0===h.options.disableBackwardAudio?(console.warn("Backward audio is disabled by configuration"),-1):D!=CloudHelpers.POSITION_LIVE?(console.warn("Can't control backward audio while player isn't LIVE mode"),-2):void 0===M?(console.warn("Camera doesn't supports backward audio"),-3):(h._sendBackwardAudio(),0)},h._sendBackwardAudio=function(e){var t=h.player.getElementsByClassName("cloudplayer-microphone")[0],a=h.player.getElementsByClassName("cloudplayer-backward-webrtc")[0];1==h.isBackwardAudioStarted?(console.log("TODO: Stop bw_audio"),t.classList.remove("prepare"),t.classList.remove("onair"),h.isBackwardAudioStarted=!1,null!=gt&&(gt.stopWS(),gt=null)):(console.log("TODO: Start bw_audio"),u._getAPI().cameraBackwardUrls(h.mSrc.getID()).done(function(e){console.log(e),void 0!==e.webrtc_backward&&(t.classList.add("prepare"),h.isBackwardAudioStarted=!0,(gt=new CloudPlayerWebRTC2(a,e.webrtc_backward.connection_url,e.webrtc_backward.ice_servers,{send_video:!1,send_audio:!0})).onServerError=function(e){t.classList.remove("onair"),h.isBackwardAudioStarted=!1,console.error("[WebRTC] Event error ",e),gt.stopWS()},gt.onStartStreaming=function(){console.log("afterIce"),t.classList.remove("prepare"),t.classList.add("onair")},gt.startWS())}).fail(function(e){console.log(e)}))},h.setPosition=function(e){D=e,tt(!1),-1==D?(void 0===t.useOnlyPlayerFormat&&h.enableModeSetting(),h.collapseMenu(),C=!0,Z.classList.remove("inactive"),X.classList.remove("inactive"),null!=h.mPTZActions&&h.mPTZShow&&(Z.style.display="block"),Ce.style.display="none"):(h.disableModeSetting(),h.collapseMenu(),h.time=e,ue.innerHTML=ct(h.time),h.player.classList.remove("showing-ptz"),Z.classList.add("inactive"),X.classList.add("inactive"),Ce.classList.remove("mode-timelapse"),Ce.classList.add("mode-records"),void 0!==h.options&&void 0!==h.options.debugTimelapse&&(Ce.style.display=""),I="records",setTimeout(function(){1==h.isBackwardAudioStarted&&h._sendBackwardAudio()},100))},void 0!==t.position&&h.setPosition(D);var vt=0;function yt(e,t,a){for(var n=0;n<e.length;n++)a(e[n],t)}function Ct(){var e=h.player.getElementsByClassName("cloudplayer-volume-mute")[0],t=h.player.getElementsByClassName("cloudplayer-volume-down")[0],a=h.player.getElementsByClassName("cloudplayer-volume-progress")[0],n=h.player.getElementsByClassName("cloudplayer-volume-up")[0],o=h.player.getElementsByClassName("cloudplayer-volume-container")[0],r=h.player.getElementsByClassName("cloudplayer-volume")[0];function i(e){var t=0==e,a=document.getElementById(h.elid+"_native_hls"),n=document.getElementById(h.elid+"_vjs"),o=document.getElementById(h.elid+"_webrtc");null!=a&&void 0!==a&&(a.muted=t),null!=n&&void 0!==n&&(n.muted=t),h.vjs.muted(t),h.vjs.volume(e),R.muted=t,R.volume=e,null!=p&&(null!=o&&void 0!==o&&(o.muted=t),p.volume=e)}h.m=h.m||{},h.m.volume=1,e.style.display="inline-block",h.isMobile&&(o.style.display="none"),h.m.mute?(o.style.display="none",e.classList.add("unmute")):(h.isMobile||(o.style.display="flex"),e.classList.remove("unmute")),h.mute=function(){h.isAudioChannelExists()&&(h.m.mute=!h.m.mute,h.m.mute?(h.isMobile||(o.style.display="none"),e.classList.add("unmute")):(h.isMobile||(o.style.display="flex"),e.classList.remove("unmute")),i(h.m.mute?0:""+h.m.volume.toFixed(1)))},h.volume=function(e){if(h.isAudioChannelExists())return null==e?h.m.volume:(e=(e=1<e?1:e)<0?0:e,h.m.volume=Math.ceil(10*e)/10,i(h.m.mute?0:h.m.volume.toFixed(1)),void(a.className=a.className.replace(/vol\d+/g,"vol"+Math.ceil(10*h.m.volume))))},h.volup=function(){h.isAudioChannelExists()&&Math.round(10*h.m.volume)<10&&(h.m.volume=h.m.volume+.1,i(h.m.mute?0:h.m.volume.toFixed(1)),a.className=a.className.replace(/vol\d+/g,"vol"+Math.ceil(10*h.m.volume)))},h.voldown=function(){h.isAudioChannelExists()&&0<Math.round(10*h.m.volume)&&(h.m.volume=h.m.volume-.1,i(h.m.mute?0:h.m.volume.toFixed(1)),a.className=a.className.replace(/vol\d+/g,"vol"+Math.floor(10*h.m.volume)))},e.onclick=h.mute,t.onclick=h.voldown,n.onclick=h.volup,r.addEventListener("input",function(e){h.player.getElementsByClassName("cloudplayer-volume")[0]&&h.volume(e.target.value/100)}),h.vjs.ready(function(){h.isAudioChannelExists()&&(h.vjs.muted(!0),h.volume(h.m.volume))}),h.isAudioChannelExists()||(t.style.display="none",a.style.display="none",n.style.display="none",e.style.display="none"),h.options.disableAudioControl&&1==h.options.disableAudioControl&&(h.m.volume=1,h.m.mute=!1,e.style.display="none",t.style.display="none",a.style.display="none",n.style.display="none",o.style.display="none",r.style.display="none")}function _t(e,t){var a,n,o,r;t.rtc?(console.warn("webrtc0 - depracated"),m="webrtc0",_e.innerHTML="Used player: WebRTC (v0)",a="https:"==location.protocol?"wss://":"ws://",n=location.hostname,r=8080,u.ServiceProviderUrl,t.rtc&&("http"==(o=CloudHelpers.parseUri(t.rtc).protocol)||"ws"==o?a="ws://":"https"==o||"wss"==o?a="wss://":console.warn("Unknown protocol in '"+t+"'"),n=CloudHelpers.parseUri(t.rtc).host,r=CloudHelpers.parseUri(t.rtc).port),r=a+n+":"+r+"/",h.vjs.el().style.display="none",pe.style.display="none",v.style.display="none",p.style.display="block",window.CloudPlayerWebRTC0?((f=new CloudPlayerWebRTC0(p,r,t.rtmp)).onAutoplayBlocked=h.WebRTC2_autoplayBlocked,f.onServerError=function(e){console.error("[WebRTC0] Event error ",e),h._showerror(CloudReturnCode.ERROR_WEBRTC_SERVER_ERROR),h.stop("by_webrtc0_error")},f.startWS(),mt()):console.error("Not found module CloudPlayerWebRTC0")):h._showerror(CloudReturnCode.NOT_SUPPORTED_FORMAT)}function At(e,t){var a;t.webrtc?(m="webrtc2",_e.innerHTML="Used player: WebRTC (v2)",h.vjs.el().style.display="none",v.style.display="none",pe.style.display="none",p.style.display="block",window.CloudPlayerWebRTC2?(a=CloudHelpers.promise(),0<CloudHelpers.compareVersions(CloudPlayerWebRTC2.version,t.webrtc.version)?(console.warn("Expected version webrtc.version (v"+t.webrtc.version+")  mismatch with included CloudPlayerWebRTC (v"+CloudPlayerWebRTC2.version+")"),a=CloudHelpers.requestJS(t.webrtc.scripts.player,function(e){for(e=e.replace("CloudPlayerWebRTC =","CloudPlayerWebRTC2 =");-1!==e.indexOf("CloudPlayerWebRTC.");)e=e.replace("CloudPlayerWebRTC.","CloudPlayerWebRTC2.");return e})):a.resolve(),a.done(function(){console.log("[PLAYER] ",t.webrtc.connection_url),(g=new CloudPlayerWebRTC2(p,t.webrtc.connection_url,t.webrtc.ice_servers,{send_video:!1,send_audio:!1})).onAutoplayBlocked=h.WebRTC2_autoplayBlocked,g.onServerError=function(e){console.error("[WebRTC2] Event error ",e),h._showerror(CloudReturnCode.ERROR_WEBRTC_SERVER_ERROR),h.stop("by_webrtc2_error")},g.startWS(),mt()})):console.error("Not found module CloudPlayerWebRTC2")):h._showerror(CloudReturnCode.NOT_SUPPORTED_FORMAT)}function Et(e,t){var a;t.rtmp?(_e.innerHTML="Used player: Flash",h.vjs.ready(function(){console.log("[PLAYER] Set url (rtmp): "+t.rtmp),h.vjs.options().flash.swf=CloudSDK.flashswf||"swf/video-js-by-vxg-buff200.swf",h.vjs.src([{src:t.rtmp,type:"rtmp/mp4"}]),CloudHelpers.isFireFox()?console.warn("in firefox not good solution for a hiding adobe flash player"):nt.style.display="block"}),h.vjs.off("ended"),h.vjs.on("ended",function(){h.stop("by_rtmp_ended")}),a=!1,h.vjs.off("loadeddata"),h.vjs.on("loadeddata",function(){console.warn("loadeddata"),a=!0,ot(),e==B?(et(),Ct(),ft()):console.warn("[PLAYER]  _uniqPlay not current [loadeddata]")}),h.vjs.on("playing",function(){ut()}),h.vjs.off("loadedmetadata"),h.vjs.on("loadedmetadata",function(){console.warn("loadedmetadata")}),setTimeout(function(){console.log("[PLAYER] Set url (rtmp) 2: "+t.rtmp),a||h.vjs.src([{src:t.rtmp,type:"rtmp/mp4"}])},5e3),dt(),mt(),CloudHelpers.isChrome()&&!CloudHelpers.autoPlayAllowed?ft():h.vjs.play()):h._showerror(CloudReturnCode.NOT_SUPPORTED_FORMAT)}function Pt(e,t){t.hls?(m="jpeg",_e.innerHTML="Used player: Jpeg",h.vjs.el().style.display="none",p.style.display="none",v.style.display="none",pe.style.display="block",window.CloudPlayerJpegLive?(t=h.options.jpegRedrawPeriod||1e3,Fe.play(u._getAPI(),h.mSrc,t),ut(),mt()):console.error("[PLAYER]  Not found module CloudPlayerJpegLive")):h._showerror(CloudReturnCode.NOT_SUPPORTED_FORMAT)}function bt(e,t){var a;t.hls?h.m.useNativeHLS?(a=t).hls?(m="native-hls",_e.innerHTML="Used player: NativeHLS",h.vjs.el().style.display="none",p.style.display="none",pe.style.display="none",v.style.display="block",window.CloudPlayerNativeHLS?((y=new CloudPlayerNativeHLS(v,a.hls)).play(),ut(),mt()):console.error("[PLAYER]  Not found module CloudPlayerNativeHLS")):h._showerror(CloudReturnCode.NOT_SUPPORTED_FORMAT):(h.vjs.el().style.display="block",p.style.display="none",pe.style.display="none",v.style.display="none",_e.innerHTML="Used player: HTML5 (hls)",m="hls",console.log("[PLAYER] Set url (hls): "+t.hls),clearInterval(T),function e(t,a){var n;a==B?((n=new XMLHttpRequest).open("GET",t.hls),n.onload=function(){if(a==B)if(200===n.status)a==B&&(h._applyMediaTiket(t.hls,t.expire),h.vjs.src([{src:t.hls,type:"application/x-mpegURL"}]),n=null);else if(404===n.status)if(a==B){if(rt<++r)return h.count_ERROR_STREAM_UNREACHABLE=1+(0|h.count_ERROR_STREAM_UNREACHABLE),void(3<h.count_ERROR_STREAM_UNREACHABLE?(h._showerror(CloudReturnCode.ERROR_STREAM_UNREACHABLE_HLS),h.count_ERROR_STREAM_UNREACHABLE=0):(h.stop(),h.play()));setTimeout(function(){console.warn("Wait one sec "+t.hls),n=null,e(t,a)},1e3)}else console.warn("[VXGCLOUDPLAYER] polingHLSList, camid was changed stop poling hls list, currentCmaID="+h.mSrc.getID());else console.error("Unhandled");else console.warn("_uniqPlay not current [_polingCameraHLSList 2]")},n.send()):console.warn("_uniqPlay not current [_polingCameraHLSList]")}(t,e),h.vjs.off("ended"),h.vjs.on("ended",function(){h.stop("by_hls_ended"),h._showerror(CloudReturnCode.ERROR_HLS_ENDED)}),c="",h.vjs.off("loadeddata"),h.vjs.on("loadeddata",function(){console.warn("loadeddata"),ot(),e==B?(et(),Ct(),ft(),CloudHelpers.isSafari()&&(c="loadeddata")):console.warn("_uniqPlay not current [loadeddata]")}),h.vjs.off("loadedmetadata"),h.vjs.on("loadedmetadata",function(){}),h.vjs.off("playing"),h.vjs.on("playing",function(){CloudHelpers.isSafari()&&"loadeddata"===c&&(c="playing"),ut()}),h.vjs.off("pause"),h.vjs.on("pause",function(){CloudHelpers.isSafari()&&"playing"===c&&(c="pause",ft())}),dt(),mt(),CloudHelpers.isChrome()&&!CloudHelpers.autoPlayAllowed?ft():h.vjs.play()):h._showerror(CloudReturnCode.NOT_SUPPORTED_FORMAT)}function Tt(a){if(null!=B&&a!=B)return console.warn("[_polingCameraStatus] _uniqPlay not current 1"),void clearInterval(_);if(!h.mSrc)return console.warn("[_polingCameraStatus] no source"),void clearInterval(_);if("camera"!=h.mSrc.type)return console.warn("[_polingCameraStatus] no type camera"),void clearInterval(_);var e=h.mSrc.getID(),n=h.mSrc._origJson().status;u._getAPI().getCamera2(e,{}).done(function(e){var t=e.status;if(null!=B&&a!=B)return console.warn("[_polingCameraStatus] _uniqPlay not current (2) "+a+"!="+B),void clearInterval(_);"active"!==t&&0!=h.m.waitSourceActivation&&L>h.m.waitSourceActivation&&(h._showerror(CloudReturnCode.ERROR_CAMERA_OFFLINE),L=0),n!=t&&(console.warn("switched camera status: from "+n+" to "+t+" mLiveModeAutoStart: "+C),h.mSrc._origJson().status=t,C&&("active"==t?h.play():(h.stop("by_poling_camera_status"),h._showerror(CloudReturnCode.ERROR_CAMERA_OFFLINE),wt(a))),d.executeCallbacks(CloudPlayerEvent.CHANNEL_STATUS,{status:t}),E&&setTimeout(function(){E(h,t)},10))}).fail(function(e){console.error("[_polingCameraStatus] ",e),h.mSrc._origJson().status="error"})}function wt(t){setTimeout(function(){C=!0,clearInterval(_),Tt(t),L=100;var e=3e3,e="active"==h.mSrc._origJson().status?U:x;_=setInterval(function(){0<L&&(L+=e),Tt(t)},e)},100)}h.getPosition=function(){return s?-1==D?("webrtc0"==m||"webrtc2"==m)&&p&&0!=p.currentTime||"native-hls"==m&&v&&0!=v.currentTime||"jpeg"==m||"webrtc0"!=m&&"webrtc2"!=m&&h.vjs&&0!=h.vjs.currentTime()?CloudHelpers.getCurrentTimeUTC()+(u?u.getServerTimeDiff():0):0:0==h.time?D:Math.floor(h.time):l?vt:0},h.isLive=function(){return-1==D&&!i},h.play=function(e){s?h.stop("by_play"):h._reset_players(),"camera"==h.mSrc.type?(B=Math.random(),a=e,console.warn("[PLAYER] mUniqPlay: "+B),ie.classList.remove("hidden"),ie.classList.remove("play"),ae.style.display="none",l=!(s=!(i=!1)),dt(),$e(),h.isRange()&&-1==D&&CloudHelpers.getCurrentTimeUTC()>O&&(D=k),h.isRange()&&O<D&&(D=k),d.executeCallbacks(CloudPlayerEvent.PLAYED,e),-1==D?(function(e){if(e==B)return h.mSrc?"active"!=h.mSrc._origJson().status?(0==h.m.waitSourceActivation&&"setsource"!=h.mSrc._origJson().status&&(h._showerror(CloudReturnCode.ERROR_CAMERA_OFFLINE),d.executeCallbacks(CloudPlayerEvent.CHANNEL_STATUS,{status:"offline"})),wt(e)):(r=0,"camera"==h.mSrc.type?(wt(e),h._polingLoadCameraLiveUrl(e)):(console.error("[CloudPlayer] invalid source"),h.setError(100))):(console.error("[CloudPlayer] source not set"),h.setError(100));console.warn("_uniqPlay not current [cameraLiveUrls fail]")}(B),d.executeCallbacks(CloudPlayerEvent.POSITION_JUMPED,{new_pos:CloudHelpers.getCurrentTimeUTC()})):"records"===I?(console.warn("Try load records from "+CloudHelpers.formatUTCTime(D)),pt(0,e)):(console.log("TODO: timelapse"),h.mSrc?"camera"==h.mSrc.type?(st="camera_records",fe.style.display="",We.play(300,D),mt()):h._showerror(CloudReturnCode.ERROR_INVALID_SOURCE):h._showerror(CloudReturnCode.ERROR_SOURCE_NOT_CONFIGURED)),"records"!==I&&Qe(h.options.loaderTimeout||0)):h._showerror(CloudReturnCode.ERROR_INVALID_SOURCE)},h.pause=function(e){var t;i=!1,0==l?(vt=h.getPosition(),s=!(l=!0),ie.classList.add("play"),-1==D?"webrtc"==h.mPlayerFormat?null!=f?f.pause():null!=g&&g.pause():"jpeg"==h.mPlayerFormat?Fe&&Fe.pause():h.vjs.pause():R.pause().then(function(e){console.log("pause: vxgcloudplayer pause ok")}).catch(function(e){console.log("pause: vxgcloudplayer pause cathc")})):(s=!(l=!1),ie.classList.remove("play"),-1==D?"webrtc"==h.mPlayerFormat?null!=f?f.play():null!=g&&g.play():"jpeg"==h.mPlayerFormat?Fe&&(t=h.options.jpegRedrawPeriod||1e3,Fe.play(u._getAPI(),h.mSrc,t)):h.vjs.play():R.play().then(function(e){s=!0,console.log("pause: vxgcloudplayer play ok")}).catch(function(e){console.log("pause: vxgcloudplayer play cathc")}))},h.getImages=function(){var e,t;u&&(e={},t=(new Date).getTime(),t=CloudHelpers.formatUTCTime(t),e.order_by="-time",e.limit=5,e.end=t,u._getAPI().cameraImages(e).done(function(e){console.log("done")}).fail(function(e){console.log("error")}))},h.stop=function(e){console.log("[PLAYER] stop called "+e),C=l=s=!(i=!(B=null)),clearInterval(_),d.executeCallbacks(CloudPlayerEvent.STOPED,e),("by_webrtc2_error"===e||"by_webrtc0_error"===e||"by_setError"===e&&"webrtc"===h.mPlayerFormat)&&(h.mPlayerFormat="html5"),console.log("[PLAYER] self.stop: somebody call"),"by_plrsdk_3"===e&&(h.mPoster=null),"by_destroy"!=e&&h._reset_players(),"by_plrsdk_1"===e&&($e(),R&&(R.setAttribute("src",""),R.setTimePromise(Date.now()))),null!=f&&(f.stopWS(),p.style.display="none"),null!=g&&(g.stopWS(),p.style.display="none"),null!=y&&(y.stop(),v.style.display="none"),null!=Fe&&(Fe.stop(),pe.style.display="none"),re.style.display="none",ae.style.display="inline-block",ie.classList.add("hidden"),dt(),clearInterval(T),h._stopPolingMediaTicket(),"by_play"!==e&&et()},h.close=function(){h.stop("by_close"),clearInterval(h.currentTime),clearInterval(_)},h.destroy=function(){document.removeEventListener("click",h.onDocumentClick),h.stop("by_destroy"),h.pano.stop(),delete h.pano,clearInterval(h.currentTime),clearInterval(_),h.vjs.dispose(),delete window._cloudPlayers[h.elid],R&&R.setAttribute("src",""),h.player.onwebkitfullscreenchange=null,h.player.onmozfullscreenchange=null,h.player.onfullscreenchange=null,h.player.onfullscreenchange=null,h.f_callbackFullscreenFunc&&(h.f_callbackFullscreenFunc=null)},h.error=function(){return h.mLastError||-1},h.onError=function(e){A=e},h.onChannelStatus=function(e){E=e},h._setError=function(e){setTimeout(function(){h.stop("by_setError"),le.style.display="block",ce.style.display="inline-block"},10),h.mLastError=e,A&&(d.executeCallbacks(CloudPlayerEvent.ERROR,e),setTimeout(function(){A(h,e)},10))},h.setRange=function(e,t){console.warn("[PLAYER] setRange"),k=e,O=t},void 0!==t.range&&(ve=parseInt(t.range.min,10),ye=parseInt(t.range.max,10),h.setRange(ve,ye)),h.isRange=function(){return-1!=k&&-1!=O},h.resetRange=function(){console.warn("[PLAYER] resetRange"),O=k=-1},h._showZoomControl=function(e){e?(K.style.display="block",q.style.display="block"):(K.style.display="none",q.style.display="none")},h.showPTZControl=function(e){(h.mPTZShow=e)?void 0!==h.mPTZActions&&null!=h.mPTZActions&&0<h.mPTZActions.length&&(Z.style.display="block"):Z.style.display="none"},function(){h.currentZoom=0,h.player.getElementsByClassName("cloudplayer-show-zoom")[0],h.player.getElementsByClassName("cloudplayer-controls-zoom")[0];var t=h.player.getElementsByClassName("cloudplayer-controls-zoom-position")[0],e=h.player.getElementsByClassName("cloudplayer-zoom-up")[0],a=h.player.getElementsByClassName("cloudplayer-zoom-down")[0],n=h.player.getElementsByClassName("cloudplayer-zoom-progress")[0],i=h.player.getElementsByClassName("cloudplayer-zoom-position-cursor")[0],s=[];s.push(document.getElementById(o+"_vjs")),s.push(h.player.getElementsByClassName("cloudplayer-webrtc")[0]),s.push(h.player.getElementsByClassName("cloudplayer-jpeg")[0]),s.push(h.player.getElementsByClassName("cloudplayer-vxgcloudplayer")[0]),h.options.disableZoomControl&&1==h.options.disableZoomControl&&(K.style.display="none"),h.zoomCursorDownBool=!1,h.zoomCursorX=0,h.zoomCursorY=0,h.zoomCursorWidth=176,h.zoomCursorHeight=160,h.zoomControlsWidth=0,h.zoomControlsHeight=0,h.setNewZoom=function(e){h.currentZoom!=(e=(e=30<=e?30:e)<=10?10:e)&&(h.currentZoom=e,e="scale("+h.currentZoom/10+")",yt(s,e,function(e,t){e.style.transform=t}),i.style.transform="scale("+10/h.currentZoom+")",n.className=n.className.replace(/zoom\d+x/g,"zoom"+Math.ceil(h.currentZoom)+"x"),t.style.display=10==h.currentZoom?"none":"",i.style.left="",i.style.top="",yt(s,"",function(e,t){e.style.left=t,e.style.top=t}))},h.setNewZoom(10),h.zoomUp=function(){h.setNewZoom(h.currentZoom+5)},h.zoomDown=function(){h.setNewZoom(h.currentZoom-5)},h.zoomProgressDownBool=!1,h.zoomProgressDown=function(e){h.zoomProgressDownBool=!0},h.zoomProgressMove=function(e){var t;1==h.zoomProgressDownBool&&(t=e.pageY-CloudHelpers.getAbsolutePosition(e.currentTarget).y,e=n.offsetHeight,t=10*(Math.floor((e-t)/(e/5))/2+1),h.setNewZoom(t))},h.zoomProgressLeave=function(e){h.zoomProgressDownBool=!1},h.zoomProgressUp=function(e){var t;1==h.zoomProgressDownBool&&(t=e.pageY-CloudHelpers.getAbsolutePosition(e.currentTarget).y,e=n.offsetHeight,t=10*(Math.floor((e-t)/(e/5))/2+1),h.setNewZoom(t)),h.zoomProgressDownBool=!1},h.zoomCursorDown=function(e){void 0===e.pageX&&(e.pageX=e.touches[0].pageX),void 0===e.pageY&&(e.pageY=e.touches[0].pageY),h.zoomCursorX=e.pageX,h.zoomCursorY=e.pageY,h.zoomCursorWidth=i.offsetWidth,h.zoomCursorHeight=i.offsetHeight,h.zoomControlsWidth=t.offsetWidth,h.zoomControlsHeight=t.offsetHeight,h.zoomCursorDownBool=!0},h.zoomCursorUp=function(e){console.log("zoomCursorUp"),h.zoomCursorDownBool=!1},h.zoomCursorMove=function(e){var t,a,n,o,r;1==h.zoomCursorDownBool&&(void 0===e.pageX&&(e.pageX=e.touches[0].pageX),void 0===e.pageY&&(e.pageY=e.touches[0].pageY),n=h.zoomCursorX-e.pageX,r=h.zoomCursorY-e.pageY,h.zoomCursorX=e.pageX,h.zoomCursorY=e.pageY,t=i.offsetLeft-n,a=i.offsetTop-r,o=h.zoomControlsWidth-h.zoomCursorWidth*(10/h.currentZoom),(n=(e=h.zoomControlsHeight-h.zoomCursorHeight*(10/h.currentZoom))/2)<=(a=a<(r=-1*e/2)?r:a)&&(a=n),i.style.left=(t=(r=o/2)<=(t=t<(n=-1*o/2)?n:t)?r:t)+"px",i.style.top=a+"px",r=h.currentZoom/10-1,o=Math.floor(t/o*r*-100),r=Math.floor(a/e*r*-100),h.vjs.videoHeight(),h.vjs.videoWidth(),yt(s,o+"%",function(e,t){e.style.left=t}),yt(s,r+"%",function(e,t){e.style.top=t}))},e.onclick=h.zoomUp,a.onclick=h.zoomDown,i.addEventListener("mousedown",h.zoomCursorDown,!1),i.addEventListener("mousemove",h.zoomCursorMove,!1),i.addEventListener("mouseleave",h.zoomCursorUp,!1),i.addEventListener("mouseup",h.zoomCursorUp,!1),n.addEventListener("mousedown",h.zoomProgressDown,!1),n.addEventListener("mousemove",h.zoomProgressMove,!1),n.addEventListener("mouseleave",h.zoomProgressLeave,!1),n.addEventListener("mouseup",h.zoomProgressUp,!1),i.addEventListener("touchstart",h.zoomCursorDown,!1),i.addEventListener("touchmove",h.zoomCursorMove,!1),i.addEventListener("touchend",h.zoomCursorUp,!1)}(),h.isAudioChannelExists=function(){return!0},h.updateAudioStream=function(){el_info_audio_stream.style.display="none",u._getAPI().cameraMediaStreams(h.currentCamID).done(function(e){if(e.mstreams_supported&&1<e.mstreams_supported.length){el_info_audio_stream.style.display="block",h.mstreams.audio_on="",h.mstreams.audio_off="",h.mstreams.current=e.live_ms_id;for(var t=0;t<e.mstreams_supported.length;t++)e.mstreams_supported[t].as_id&&e.mstreams_supported[t].vs_id?h.mstreams.audio_on=e.mstreams_supported[t].id:e.mstreams_supported[t].vs_id&&(h.mstreams.audio_off=e.mstreams_supported[t].id);h.mstreams.audio_on==h.mstreams.current?el_info_audio_stream_on.classList.add("selected"):h.mstreams.audio_off==h.mstreams.current&&el_info_audio_stream_off.classList.add("selected")}else el_info_audio_stream.style.display="none";h.isAudioChannelExists()}).fail(function(e){console.error(e),el_info_audio_stream.style.display="none"})},Ct(),h.WebRTC0_autoplayBlocked=function(){dt();try{f.stopWS()}catch(e){console.warn("WebRTC0_autoplayBlocked: skip error",e)}r=0,console.warn("_vjs_play. is mobile or autoplay not allowed. show big button"),me.style.display="block",me.onclick=function(e){a=e,me.style.display="none",r=0,h.play()}},h.WebRTC2_autoplayBlocked=function(){dt();try{g.stopWS()}catch(e){console.warn("WebRTC2_autoplayBlocked: skip error",e)}r=0,console.warn("_vjs_play. is mobile or autoplay not allowed. show big button"),me.style.display="block",me.onclick=function(e){a=e,me.style.display="none",r=0,h.play()}},h._polingLoadCameraLiveUrl=function(a){a==B?"camera"==h.mSrc.type?(h.updateAudioCaps&&h.updateAudioCaps(h.mSrc.getID()),st="camera_live",m="",u._getAPI().cameraLiveUrls(h.mSrc.getID()).done(function(e){var t;a==B?(at(e),t=1,e.webrtc&&(t=e.webrtc.version.split(".")[0],t=parseInt(t,10)),null===(P=!e.hls&&!e.rtmp?"webrtc":P)?("webrtc"==h.mPlayerFormat&&(e.rtc&&CloudHelpers.supportWebRTC()?_t(0,e):e.webrtc&&2===t&&CloudHelpers.supportWebRTC()?At(0,e):bt(a,e)),"flash"==h.mPlayerFormat&&(CloudHelpers.useHls()?bt:Et)(a,e),"html5"==h.mPlayerFormat&&bt(a,e),"jpeg"==h.mPlayerFormat&&Pt(0,e)):"flash"===P?Et(a,e):"html5"===P?bt(a,e):e.rtc&&"webrtc"===P?_t(0,e):e.webrtc&&2===t&&"webrtc"===P?At(0,e):"jpeg"===P?Pt(0,e):h._showerror(CloudReturnCode.NOT_SUPPORTED_FORMAT)):console.warn("_uniqPlay not current [_polingLoadCameraLiveUrl.done]")}).fail(function(e){console.error(e),a==B?e.status&&503==e.status&&++r<h.timePolingLiveUrls?setTimeout(function(){h._polingLoadCameraLiveUrl(a)},1e3):console.error(e):console.warn("_uniqPlay not current [_polingLoadCameraLiveUrl.fail]")})):h._showerror(CloudReturnCode.ERROR_INVALID_SOURCE):console.warn("_uniqPlay not current [_polingLoadCameraLiveUrl]")},h._reset_players=function(){console.log("_reset_players"),h.vjs.reset(),h.mPoster&&h.vjs.poster(h.mPoster),h.vjs.controls(!1),h.vjs.muted(!0),h.vjs.autoplay(!0),h.vjs.volume(0),h.vjs.el().style.display="none",R.parentElement.style.zIndex=-2,R.parentElement.style.opacity=0,D==CloudHelpers.POSITION_LIVE&&R.pause().then(function(){}).catch(function(e){}),Fe.reset(),pe.style.display="none",We.reset(),fe.style.display="none",h.volume(h.m.volume),dt(),h._stopPolingMediaTicket()},h.isPlaying=function(){return s},h.set_controls_opacity=function(e){W.style.opacity!=e&&d.executeCallbacks(CloudPlayerEvent.CHANGED_CONTROLS,{opacity:e}),W.style.opacity=e,q.style.opacity=e,V.style.opacity=e,J.style.opacity=e,ne.style.opacity=e,b.style.opacity=e,te.style.opacity=e,Y.style.opacity=e,He.style.opacity=e,je.style.opacity=e;var t=h.player.getElementsByClassName("cloudplayer-selectcliptime")[0];!parseInt(e)&&t&&(t.style.display="none")};var St=!0;J.addEventListener("mouseover",function(e){St=!1}),J.addEventListener("mouseout",function(e){St=!0}),h.restartTimeout=function(){h.m.autohide<0?h.set_controls_opacity("0"):0!=h.m.autohide?(h.set_controls_opacity("1"),clearTimeout(h.timeout),h.timeout=setTimeout(function(){St?h.set_controls_opacity("0"):h.restartTimeout()},h.m.autohide)):h.set_controls_opacity("1")},h.restartTimeout(),h.player.addEventListener("mousedown",h.restartTimeout,!0),h.player.addEventListener("mousemove",h.restartTimeout,!0),h.player.addEventListener("touchmove",h.restartTimeout,!0),h.player.addEventListener("touchstart",h.restartTimeout,!0),ae.onclick=function(){h.play("by_button_click")},ie.onclick=function(){h.pause("by_button_click")},re.onclick=function(){h.stop("by_button_click")},h.size=function(e,t){console.error("[CloudPlayer] size not support")},h.setFullscreenCallback=function(e){h.f_callbackFullscreenFunc=e},h.setIOsFullscreenCallback=function(e){h.f_callbackIOsFullscreenFunc=e},h.getCurrentVideoTag=function(){for(var e=void 0,t=h.player.getElementsByClassName("allvideotags")[0].getElementsByTagName("video"),a=0;a<t.length;a++){var n=t[a],o=(n.currentStyle||getComputedStyle(n,null)).display,r=(n.parentElement.currentStyle||getComputedStyle(n.parentElement,null)).display;if("block"===(o=n.classList.contains("vjs-tech")?r:o)||"inline-block"===o){e=n;break}}return e},h.printDebug=function(e){var t=h.player.getElementsByClassName("cloudplayer-debug")[0];t.style.display="block";e=document.createTextNode(e+"\n");t.appendChild(e)},h.initFullscreenControls=function(){var e,t,a,n,o=h.player.getElementsByClassName("cloudplayer-fullscreen")[0];h.changedFullscreen=function(){console.log("changedFullscreen: "+document.webkitIsFullScreen),document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement?(e=h.player.style.height,t=h.player.style.width,n=h.player.style.maxHeight,a=h.player.style.maxWidth,h.player.style.height="100%",h.player.style.width="100%",h.player.style.maxHeight="100%",h.player.style.maxWidth="100%",console.log("changedFullscreen -> fullscreen"),screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),h.f_callbackFullscreenFunc&&h.f_callbackFullscreenFunc(!0)):(h.player.style.height=e,h.player.style.width=t,h.player.style.maxHeight=n,h.player.style.maxWidth=a,console.log("changedFullscreen -> NOT fullscreen"),h.f_callbackFullscreenFunc&&h.f_callbackFullscreenFunc(!1))},h.player.onwebkitfullscreenchange=h.changedFullscreen,h.player.onmozfullscreenchange=h.changedFullscreen,h.player.onfullscreenchange=h.changedFullscreen,h.fullscreen=function(){console.log("fullscreen: clicked"),CloudHelpers.isIOS()&&h.f_callbackIOsFullscreenFunc(),1==document.webkitIsFullScreen?document.webkitCancelFullScreen():document.mozFullScreen?document.mozCancelFullScreen():document.msFullscreenElement&&null!=document.msFullscreenElement?document.msExitFullscreen():h.player.mozRequestFullScreen?h.player.mozRequestFullScreen():h.player.requestFullscreen?h.player.requestFullscreen():h.player.webkitRequestFullscreen?h.player.webkitRequestFullscreen():h.player.msRequestFullscreen&&h.player.msRequestFullscreen()},o.onclick=h.fullscreen},h.initFullscreenControls(),h.initHLSMechanism=function(){h._applyMediaTiket=function(e,t){console.log("media-tiсket: old = "+h.hls_mediaticket_value),-1!=e.indexOf("?")&&(h.hls_mediaticket_value="?"+e.split("?")[1]),Date.parse(t+"Z"),console.log("media-tiсket: new = "+h.hls_mediaticket_value)},h._stopPolingMediaTicket=function(){clearInterval(h._polingMediaTicketInterval)}},h.initHLSMechanism(),window._cloudPlayers[o]=h,CloudHelpers.isIE()?h.pano=null:h.pano=new CloudPano(h.player.getElementsByClassName("allvideotags")[0],h),h.enableSpeedSetting=function(){be.classList.add("enabled")},h.disableSpeedSetting=function(){be.classList.remove("enabled")},h.enableModeSetting=function(){Pe.classList.add("enabled")},h.disableModeSetting=function(){Pe.classList.remove("enabled")},h.collapseMenu=function(){F.classList.remove("showing-format-selection"),F.classList.remove("showing-dewarping-selection"),F.classList.remove("showing-speed-selection")},void 0!==t.useOnlyPlayerFormat?h.disableModeSetting():h.enableModeSetting()},CloudPlayer.POSITION_LIVE=-1;var CloudShareClipModel=function(e){this.controller=e,this.camera=null,this.accessToken=null};CloudShareClipModel.prototype.createClip=function(e,t,a,n,o,r){var i;null!=e&&(this.camera=e,this.accessToken=t,(i=this).camera.createClip(a,n,o,r,this.accessToken).done(function(e){var t=e.id,a=e.status;"pending"===a?setTimeout(function(){i.clipStatus(t)},3e3):"done"===a?i.controller.processDone(a,e):i.controller.processDone(a)}).fail(function(e){i.controller.processDone("error")}))},CloudShareClipModel.prototype.clipStatus=function(a){var n=this;this.camera&&void 0!==this.camera&&this.camera.getClip(a,this.accessToken).done(function(e){console.log("Clip Status OK:"+e.status);var t=e.status;""===t||"pending"===t?setTimeout(function(){n.clipStatus(a)},3e3):"done"===t?n.controller.processDone(t,e):n.controller.processDone(t)}).fail(function(e){n.controller.processDone("error")})};var CloudShareClipView=function(e){this.element=e};CloudShareClipView.prototype.initDraw=function(e){this.element.innerHTML='<div class= "CloudShareClipContainer"></div>';this.element;this.container=this.element.getElementsByClassName("CloudShareClipContainer")[0],this.render(e)},CloudShareClipView.prototype.render=function(e){},CloudShareClipView.prototype.showWait=function(e){var t=this.container;e?$(t).addClass("waitdata"):$(t).removeClass("waitdata")};var CloudShareClipController=function(e){void 0!==e&&(this.callback_func=null,this.inProcess=!1,this.clModel=new CloudShareClipModel(this),this.clView=new CloudShareClipView(e),this.clView.element.createClip=this.createClip.bind(this),this.clView.initDraw(this))};CloudShareClipController.prototype.processDone=function(e,t){this.inProcess=!1,this.callback_func&&this.callback_func(this.inProcess,e,t)},CloudShareClipController.prototype.createClip=function(e,t,a,n,o){if(void 0!==a&&(this.callback_func=a),this.inProcess)return console.warn("CloudShareClip in process.."),void(this.callback_func&&this.callback_func(this.inProcess,"CloudShareClip in process.."));this.inProcess=!0,this.callback_func&&this.callback_func(this.inProcess,"CloudShareClip started");var r=n+(o=void 0===o?2e4:o),i="clip_"+n,a=(new Date).getTime()+9e5;console.log("DEBUG create clip "+e.getName()+" time:"+n+" dur:"+o),this.clModel.createClip(e,t,i,n,r,a)},CloudShareClipController.prototype.showWait=function(e){console.log("DEBUG swhoWait "+e),this.clView.showWait(e)},window.CloudPlayerNativeHLS=function(e,t){var a=e,n=t;console.warn("[NativeHLS] canPlay: application/vnd.apple.mpegurl => ",a.canPlayType("application/vnd.apple.mpegurl")),console.warn("[NativeHLS] canPlay: application/x-mpegURL => ",a.canPlayType("application/x-mpegURL")),console.warn("[NativeHLS] canPlay: video/mp4 => ",a.canPlayType("video/mp4")),this.play=function(){0<a.children.length&&a.removeChild(a.children[0]);var e=document.createElement("source");e.src=n,e.type="video/mp4",a.append(e),a.load()},this.stop=function(){0<a.children.length&&a.removeChild(a.children[0])},a.addEventListener("abort",function(){console.warn("[NativeHLS] abort")},!0),a.addEventListener("canplay",function(){console.warn("[NativeHLS] canplay")},!0),a.addEventListener("canplaythrough",function(){console.warn("[NativeHLS] canplaythrough")},!0),a.addEventListener("durationchange",function(){console.warn("[NativeHLS] durationchange")},!0),a.addEventListener("emptied",function(){console.warn("[NativeHLS] emptied")},!0),a.addEventListener("encrypted",function(){console.warn("[NativeHLS] encrypted")},!0),a.addEventListener("ended",function(){console.warn("[NativeHLS] ended")},!0),a.addEventListener("error",function(e,t){console.error("[NativeHLS] error ",e),console.error("[NativeHLS] error ",t)},!0),a.addEventListener("interruptbegin",function(){console.warn("[NativeHLS] interruptbegin")},!0),a.addEventListener("interruptend",function(){console.warn("[NativeHLS] interruptend")},!0),a.addEventListener("loadeddata",function(){console.warn("[NativeHLS] loadeddata"),a.play()},!0),a.addEventListener("loadedmetadata",function(){console.warn("[NativeHLS] loadedmetadata")},!0),a.addEventListener("loadstart",function(){console.warn("[NativeHLS] loadstart")},!0),a.addEventListener("mozaudioavailable",function(){console.warn("[NativeHLS] mozaudioavailable")},!0),a.addEventListener("pause",function(){console.warn("[NativeHLS] pause")},!0),a.addEventListener("play",function(){console.warn("[NativeHLS] play")},!0),a.addEventListener("playing",function(){console.warn("[NativeHLS] playing")},!0),a.addEventListener("progress",function(){console.warn("[NativeHLS] progress")},!0),a.addEventListener("ratechange",function(){console.warn("[NativeHLS] ratechange")},!0),a.addEventListener("seeked",function(){console.warn("[NativeHLS] seeked")},!0),a.addEventListener("seeking",function(){console.warn("[NativeHLS] seeking")},!0),a.addEventListener("stalled",function(){console.warn("[NativeHLS] stalled")},!0),a.addEventListener("suspend",function(){console.warn("[NativeHLS] suspend")},!0),a.addEventListener("timeupdate",function(){console.warn("[NativeHLS] timeupdate")},!0),a.addEventListener("volumechange",function(){console.warn("[NativeHLS] volumechange")},!0),a.addEventListener("waiting",function(){console.warn("[NativeHLS] waiting")},!0)},window.CloudPlayerNativeVideo=function(e){var a=document.getElementById(e),t=null,n=this,o="[NativeVideo] ",r=0,i=null;n.onAutoplayBlocked=function(){},n.on=function(e,t){"error"==e?i=t:"loadeddata"==e?a.onloadeddata=t:"ended"==e?a.onended=t:"autoplay_blocked"==e?0:console.error(o+"ON Unknown "+e)},n.off=function(e){"loadeddata"==e?a.onloadeddata=null:"ended"==e?a.onended=null:console.error(o+"OFF Unknown "+e)},n.ready=function(e){e(),console.log(o+"TODO ready")},n.muted=function(e){a.muted=e,console.log(o+"TODO muted")},n.volume=function(e){if(void 0===e)return a.volume;a.volume=e},n.reset=function(){console.warn(o,"reset"),r=0,a.pause(),null!=t&&t.removeAttribute("src"),a.load()},n.controls=function(e){console.log(o+"TODO controls")},n.autoplay=function(e){1==e&&console.error(o+"Not supported autoplay")},n.el=function(){return a},n.src=function(e){null==t&&(t=document.createElement("source"),a.appendChild(t)),a.pause(),CloudHelpers.isIE()||(a.currentTime=0),t.setAttribute("src",e[0].src),a.load()},n.currentTime=function(e){return void 0!==e?(r=e,void(CloudHelpers.isIE()||(a.currentTime=e))):a.currentTime||r},n.play=function(){var e,t;e=a.play(),t="",-1!==(t=window.Promise?window.Promise.toString():t).indexOf("function Promise()")||-1!==t.indexOf("function ZoneAwarePromise()")?e.catch(function(e){console.error(o+"checkAutoplay, error:",e),"NotAllowedError"==e.name?(console.error(o+"_checkAutoPlay: error.name:","NotAllowedError"),n.onAutoplayBlocked()):"AbortError"==e.name&&CloudHelpers.isSafari()?(console.error(o+"_checkAutoPlay: AbortError (Safari)"),n.onAutoplayBlocked()):(console.error(e),console.error(o+"checkAutoplay: happened something else"))}).then(function(){console.log(o+"checkAutoplay: then")}):console.error(o+"checkAutoplay: could not work in your browser ",e)},n.pause=function(){a.pause()},a.addEventListener("abort",function(){},!0),a.addEventListener("canplay",function(){},!0),a.addEventListener("canplaythrough",function(){},!0),a.addEventListener("durationchange",function(){},!0),a.addEventListener("emptied",function(){},!0),a.addEventListener("encrypted",function(){},!0),a.addEventListener("ended",function(){console.warn(o+"ended")},!0),a.addEventListener("error",function(e,t){console.error(o+"err0 ",e),null!=i&&i(e)},!0),a.addEventListener("interruptbegin",function(){},!0),a.addEventListener("interruptend",function(){},!0),a.addEventListener("loadeddata",function(){a.currentTime=r},!0),a.addEventListener("loadedmetadata",function(){},!0),a.addEventListener("loadstart",function(){},!0),a.addEventListener("mozaudioavailable",function(){},!0),a.addEventListener("pause",function(){},!0),a.addEventListener("play",function(){},!0),a.addEventListener("playing",function(){},!0),a.addEventListener("progress",function(){},!0),a.addEventListener("ratechange",function(){},!0),a.addEventListener("seeked",function(){},!0),a.addEventListener("seeking",function(){},!0),a.addEventListener("stalled",function(){},!0),a.addEventListener("suspend",function(){},!0),a.addEventListener("timeupdate",function(){},!0),a.addEventListener("volumechange",function(){},!0),a.addEventListener("waiting",function(){},!0)},window.CloudPlayerWebRTC0=function(e,t,a){var n,o=e,r=t,i=a,s=null,l="[WEBRTC0] ",c={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:turn.vxg.io:3478?transport=udp"],username:"vxgturn",credential:"vxgturn"}]},u=this,d=Math.floor(8990*Math.random()+10).toString();u.onWsError=function(e){console.error(e)},u.onAutoplayBlocked=function(){console.error(l+"onAutoplayBlocked")},CloudHelpers.isSafari()&&navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(function(e){console.log(l+"Camera permission granted")}).catch(function(e,t){console.error(e,t)}),u.pause=function(){o&&o.src&&o.pause()},u.play=function(){o&&o.src&&o.play()},u.resetState=function(){n.close()},u.handleIncomingError=function(e){console.error(l+"IncomingError: ",e),resetState()},u.resetVideoElement=function(){o.pause(),o.src="",o.load()},u.onIncomingSDP=function(e){e.sdp=e.sdp.replace(/profile-level-id=[^;]+/,"profile-level-id=42e01f"),console.log(l+"Incoming SDP is "+JSON.stringify(e)),s.setRemoteDescription(e).then(function(){console.log("Remote SDP set"),"offer"==e.type&&(console.log(l+"Got SDP offer, creating answer"),s.createAnswer().then(u.onLocalDescription).catch(function(e){console.error("[WEBRTC0] createAnswer: ",e)}))}).catch(function(e){console.error(l+"setRemoteDescription: ",e)})},u.onLocalDescription=function(e){console.log(l+"Got local description: "+JSON.stringify(e)),s.setLocalDescription(e).then(function(){var e,t;console.log(l+"Sending SDP answer"),sdp={sdp:s.localDescription},n.send(JSON.stringify(sdp)),console.warn(l+"Streaming (1)"),e=o.play(),t="",-1!==(t=window.Promise?window.Promise.toString():t).indexOf("function Promise()")||-1!==t.indexOf("function ZoneAwarePromise()")?e.catch(function(e){console.error(l+"_checkAutoplay, error:",e),"NotAllowedError"==e.name?(console.error(l+"_checkAutoPlay: error.name:","NotAllowedError"),u.onAutoplayBlocked()):"AbortError"==e.name&&CloudHelpers.isSafari()?(console.error(l+"_checkAutoPlay: AbortError (Safari)"),u.onAutoplayBlocked()):(console.error(e),console.error(l+"checkAutoplay: happened something else"))}).then(function(){console.log(l+"checkAutoplay: then")}):console.error(l+"_checkAutoplay: could not work in your browser ",e)})},u.onIncomingICE=function(e){console.log(l+"Incoming ICE: "+JSON.stringify(e));e=new RTCIceCandidate(e);s.addIceCandidate(e).catch(function(e){console.error(l+"addIceCandidate ",e)})},u.onServerMessage=function(t){if(console.log(l+"Received "+t.data),"HELLO"!==t.data)if(t.data.startsWith("ERROR"))u.handleIncomingError(t.data);else{try{msg=JSON.parse(t.data)}catch(e){return void(e instanceof SyntaxError?handleIncomingError("Error parsing incoming JSON: "+t.data):handleIncomingError("Unknown error parsing response: "+t.data))}null==s&&u.createCall(msg),null!=msg.sdp?u.onIncomingSDP(msg.sdp):null!=msg.ice?u.onIncomingICE(msg.ice):u.handleIncomingError("Unknown incoming JSON: "+msg)}else console.log(l+"Registered with server, waiting for stream")},u.stopWS=function(){n.close()},u.onServerClose=function(e){u.resetVideoElement(),null!=s&&(s.close(),s=null)},u.onServerError=function(e){console.error("[WEBRTC0] Unable to connect to server, did you add an exception for the certificate?")},u.onRemoteStreamAdded=function(e){videoTracks=e.stream.getVideoTracks(),audioTracks=e.stream.getAudioTracks(),0<videoTracks.length?(console.log("[WEBRTC0] Incoming stream: "+videoTracks.length+" video tracks and "+audioTracks.length+" audio tracks"),o.srcObject=e.stream):u.handleIncomingError("[WEBRTC0] Stream with unknown tracks added, resetting")},u.errorUserMediaHandler=function(){console.error("[WEBRTC0] Browser doesn't support getUserMedia!")},u.createCall=function(e){connect_attempts=0,(s=new RTCPeerConnection(c)).onaddstream=u.onRemoteStreamAdded,e.sdp||console.log("[WEBRTC0] WARNING: First message wasn't an SDP message!?"),s.onicecandidate=function(e){null!=e.candidate?n.send(JSON.stringify({ice:e.candidate})):console.error("[WEBRTC0] ICE Candidate was null, done")},console.log("[WEBRTC0] Created peer connection for call, waiting for SDP")},u.startWS=function(){u.connect_attempts++,3<u.connect_attempts?console.error("[WEBRTC0] Too many connection attempts, aborting. Refresh page to try again"):(console.log("[WEBRTC0] Connecting to server..."),loc=null,(n=new WebSocket(r)).addEventListener("open",function(e){n.send("HELLO "+d),console.log(l+"Registering with server"),n.send("SPAWN "+i)}),n.addEventListener("error",u.onServerError),n.addEventListener("message",u.onServerMessage),n.addEventListener("close",u.onServerClose))}},window.CloudPlayerWebRTC2=function(e,t,a,n){n=n||{};var r=this,i="[WEBRTC2] ";console.log(i,n);var s=e,o="",l=t||"",c=n.send_video||!1,u=n.send_audio||!1,d={},m={iceServers:a||[]},p=!1,f=null;function h(){console.warn(i+"loadeddata"),console.warn(i+"currentTime = "+s.currentTime)}r.onWsError=function(e){console.error("[WEBRTC2] onWsError, ",e)},r.resetState=function(){f.close()},r.handleIncomingError=function(e){console.error("[WEBRTC2] ERROR: ",e),r.resetState()},r.pause=function(){s&&s.srcObject&&s.pause()},r.play=function(){s&&s.srcObject&&s.play()},r.reset=function(){s&&s.srcObject&&(s.pause(),s.srcObject=null,o="",s.load())},r.el=function(){return s},r.onAutoplayBlocked=function(){console.error(i+"onAutoplayBlocked")},r.initCalbacks=function(){s&&s.addEventListener("loadeddata",h,!0)},r.removeCalbacks=function(){s&&s.removeEventListener("loadeddata",h,!0)},r.createWatchingConnection=function(t){connect_attempts=0,console.assert(!(t in d)),objPeer=new RTCPeerConnection(m),objPeer.strPeerUID=t,d[t]=objPeer,objPeer.onaddstream=r.onRemoteStreamAdded,objPeer.onicecandidate=function(e){null!=e.candidate?f.send(JSON.stringify({to:t,ice:e.candidate})):console.error("[WEBRTC2] ICE Candidate was null, done")},console.log("[WEBRTC2] Created peer connection for call, waiting for SDP")},r.getUserMediaConstraints=function(){var e={};e.audio=u,e.video=c;try{console.warn(i+"getSupportedConstraints: ",navigator.mediaDevices.getSupportedConstraints())}catch(e){console.error(i+"error on getSupportedConstraints",e)}return e},r.createPublishingConnection=function(a){connect_attempts=0,console.assert(!(a in d)),p=!0,u||c?navigator.mediaDevices.getUserMedia(r.getUserMediaConstraints()).then(function(e){console.log("[WEBRTC2] Local stream successfully received");var t=new RTCPeerConnection(m);t.strPeerUID=a,(d[a]=t).onaddstream=r.onRemoteStreamAdded,t.onicecandidate=function(e){null!=e.candidate?f.send(JSON.stringify({to:a,ice:e.candidate})):console.error("[WEBRTC2] ICE Candidate was null, done")},t.onconnectionstatechange=function(e){console.error("[WEBRTC2] Connection state changed "+t.connectionState)},console.log("[WEBRTC2] Created peer connection for publishing"),t.addStream(e),console.log("[WEBRTC2] Local SDP set"),t.createOffer().then(function(e){t.setLocalDescription(e),console.log("[WEBRTC2] Sending SDP offer"),sdp={to:a,sdp:e},f.send(JSON.stringify(sdp)),console.warn("[WEBRTC2] Streaming (1)")}).catch(function(e){console.error("[WEBRTC2] error on createOffer ",e)})}).catch(function(e,t){console.error("[WEBRTC2] error on getUserMedia a1 = ",e),console.error("[WEBRTC2] error on getUserMedia a2 = ",t)}):console.error("[WEBRTC2] Publisher must send audio or video stream")},r.onIncomingSDP=function(a,n,o){o.sdp=o.sdp.replace(/profile-level-id=[^;]+/,"profile-level-id=42e01f"),console.log("[WEBRTC2] Incoming SDP from "+a+": "+JSON.stringify(o)),n.setRemoteDescription(o).then(function(){console.log("[WEBRTC2] Remote SDP set"),p?(console.assert("answer"===o.type),console.log("[WEBRTC2] Got SDP answer from "+a)):(console.assert("offer"===o.type),console.log("[WEBRTC2] Got SDP offer from "+a),onLocalDescription=function(e){console.log("[WEBRTC2] Got local description: "+JSON.stringify(e)),n.setLocalDescription(e).then(function(){var e,t;console.log("[WEBRTC2] Sending SDP answer to "+a),o={to:a,sdp:n.localDescription},f.send(JSON.stringify(o)),console.warn("[WEBRTC2] Streaming (2)"),r.onStartStreaming(),e=s.play(),t="",-1!==(t=window.Promise?window.Promise.toString():t).indexOf("function Promise()")||-1!==t.indexOf("function ZoneAwarePromise()")?e.catch(function(e){console.error(i+"_checkAutoplay, error:",e),"NotAllowedError"==e.name?(console.error(i+"_checkAutoPlay: error.name:","NotAllowedError"),r.onAutoplayBlocked()):"AbortError"==e.name&&CloudHelpers.isSafari()?(console.error(i+"_checkAutoPlay: AbortError (Safari)"),r.onAutoplayBlocked()):(console.error(e),console.error(i+"checkAutoplay: happened something else"))}).then(function(){console.log(i+"checkAutoplay: then")}):console.error(i+"_checkAutoplay: could not work in your browser ",e)})},c||u?(console.log("[WEBRTC2] Watcher is configured to send stream"),navigator.mediaDevices.getUserMedia({audio:u,video:c}).then(function(e){n.addStream(e),console.log("[WEBRTC2] Local SDP set, creating answer"),n.createAnswer().then(onLocalDescription).catch(function(e){console.error("[WEBRTC2] error on createAnswer (1) ",e)})})):(console.log("[WEBRTC2] Creating answer without stream sending"),n.createAnswer().then(onLocalDescription).catch(function(e){console.error("[WEBRTC2] error on createAnswer (2) ",e)})))}).catch(function(e){console.error("[WEBRTC2] error on setRemoteDescription ",e)})},r.onIncomingICE=function(e,t,a){console.log("[WEBRTC2] Incoming ICE from "+e+": "+JSON.stringify(a));a=new RTCIceCandidate(a);t.addIceCandidate(a).catch(function(e){console.error("[WEBRTC2] error on addIceCandidate ",e)})},r.onServerMessage=function(t){if(console.log("[WEBRTC2] Received "+t.data),t.data.startsWith("HELLO"))console.log("[WEBRTC2] Registered with server, waiting for stream");else if(t.data.startsWith("SESSION_STARTED")){var e=t.data.split(" ")[1];console.log("[WEBRTC2] Publisher "+e+" is going to start session"),r.createWatchingConnection(e)}else if(t.data.startsWith("SESSION_STOPPED")){e=t.data.split(" ")[1];console.log("[WEBRTC2] Session of publisher "+e+" is terminated"),e in d&&(d[e]&&(d[e].close(),d[e]=null),delete d[e],s&&o===e&&r.reset())}else if(t.data.startsWith("START_SESSION")){e=t.data.split(" ")[1];console.log("[WEBRTC2] Watcher "+e+" has come and awaiting for publishing"),r.createPublishingConnection(e)}else if(t.data.startsWith("ERROR"))r.handleIncomingError(t.data);else{var a=null,n="",e=null;try{n=(a=JSON.parse(t.data)).from,e=d[n]}catch(e){return void(e instanceof SyntaxError?r.handleIncomingError("Error parsing incoming JSON: "+t.data):r.handleIncomingError("Unknown error parsing response: "+t.data))}null!=a.sdp?r.onIncomingSDP(n,e,a.sdp):null!=a.ice?r.onIncomingICE(n,e,a.ice):r.handleIncomingError("Unknown incoming JSON: "+a)}},r.stopWS=function(){f.close(),r.removeCalbacks()},r.onServerClose=function(e){for(strSessionPartnerPeerUID in console.error("[WEBRTC2] Closed WebRTC ",e),r.reset(),d)d[strSessionPartnerPeerUID]&&(d[strSessionPartnerPeerUID].close(),d[strSessionPartnerPeerUID]=null);d={}},r.onServerError=function(e){console.error("[WEBRTC2] Unable to connect to server, did you add an exception for the certificate?",e)},r.onStartStreaming=function(){},r.onRemoteStreamAdded=function(e){videoTracks=e.stream.getVideoTracks(),audioTracks=e.stream.getAudioTracks(),0<videoTracks.length||0<audioTracks.length?(console.log("[WEBRTC2] Incoming stream: "+videoTracks.length+" video tracks and "+audioTracks.length+" audio tracks"),s&&""===o&&(s.srcObject=e.stream,o=e.currentTarget.strPeerUID)):r.handleIncomingError("[WEBRTC2] Stream with unknown tracks added, resetting")},r.errorUserMediaHandler=function(){console.error("[WEBRTC2] Browser doesn't support getUserMedia!")},r.startWS=function(){r.connect_attempts++,3<r.connect_attempts?console.error("[WEBRTC2] Too many connection attempts, aborting. Refresh page to try again"):(console.log("[WEBRTC2] Connecting to server..."),(f=new WebSocket(l)).addEventListener("open",function(e){f.send("HELLO "+window.CloudPlayerWebRTC2.version),console.log("[WEBRTC2] Registering with server")}),f.addEventListener("error",r.onServerError),f.addEventListener("message",r.onServerMessage),f.addEventListener("close",r.onServerClose))}},window.CloudPlayerWebRTC2.version="2.0.3";var JpegPlayerQue=function(e){this.limit=e,this.array=[]};JpegPlayerQue.prototype.isEmpty=function(){return 0==this.array.length},JpegPlayerQue.prototype.push=function(e){return this.array.length<this.limit?(this.array.push(e),this.array.length):-1},JpegPlayerQue.prototype.pop=function(){if(!this.isEmpty())return this.array.shift()},JpegPlayerQue.prototype.peek=function(){if(!this.isEmpty())return this.array[0]},JpegPlayerQue.prototype.clear=function(){for(;0<this.array.length;)this.array.pop()},JpegPlayerQue.prototype.size=function(){return this.array.length};var JpegPlayerModel=function(e){this.quelimit=e||100,this.queue=new JpegPlayerQue(e),this.callback_lowdata=void 0,this.callback_time=void 0,this.lasttime=void 0,this.need_more_data=!1,this.data_is_over=!1};JpegPlayerModel.prototype.stop=function(){this.data_is_over=!1,this.need_more_data=!1,this.queue.clear(),this.lasttime=void 0,this.need_more_data=!1},JpegPlayerModel.prototype.pushImageInfo=function(e){null==e?(this.data_is_over=!0,this.need_more_data=!1):(this.queue.push(e),this.need_more_data=!1,this.data_is_over=!1,this.lasttime=e.utctime)},JpegPlayerModel.prototype.getData=function(e){var t={},a=this.queue.pop();if(void 0!==a)try{t.url=a.url,t.width=a.width,t.height=a.height,t.time=a.time,t.utctime=a.utctime}catch(e){t.url=void 0}else t.url=void 0;this.queue.size()<this.quelimit/4&&null!=this.callback_lowdata&&void 0!==this.callback_lowdata&&(this.need_more_data||(this.callback_lowdata(this.lasttime),this.need_more_data=!0)),t.utctime&&null!=this.callback_time&&void 0!==this.callback_time&&this.callback_time(t.utctime),t.data_is_over=this.data_is_over,e(t)};var JpegPlayerView=function(e,t){this.element=e,this.controller=t,this.renderPeriod=1e3,this.startImageUpdateTime=-1,this.updateTO=null,this.isRunning=!1,this.lastHeight=void 0,this.lastWidth=void 0,this.lastRenderTime=-1,this.currentImage=null};JpegPlayerView.prototype.getCurrentImage=function(){return this.currentImage},JpegPlayerView.prototype.needToUpdateData=function(){let e=this;var t;e.isRunning&&(0<e.startImageUpdateTime?(t=(new Date).getTime()-e.startImageUpdateTime)>e.renderPeriod?(console.warn("Slowly imageload (more than "+e.renderPeriod+"ms): render speed is down "),e.updateTO=setTimeout(function(){e.controller.clModel.getData(e.controller.updateDataCB.bind(e.controller))},0)):(t=e.renderPeriod-t,e.updateTO=setTimeout(function(){e.controller.clModel.getData(e.controller.updateDataCB.bind(e.controller))},t)):(console.warn("No image, try again"),e.updateTO=setTimeout(function(){e.controller.clModel.getData(e.controller.updateDataCB.bind(e.controller))},e.renderPeriod)))},JpegPlayerView.prototype.initDraw=function(e,t,a){this.element.innerHTML='<div class= "JpegPlayerContainer" style="width:100%;height:100%;">\t<div class="JpegPlayerImages" style="position:relative;z-index:-1;width: 100%;height:100%;">\t\t<iframe class="JpegPlayerResizeCatcher" style="position:relative;z-index:-10; width:100%; height:100%; border:none;"></iframe>\t\t<img class="JpegPlayerImg0" style="position: absolute; display:none;"></img>\t\t<img class="JpegPlayerImg1" style="position: absolute;"></img>\t</div></div>',this.container=this.element.getElementsByClassName("JpegPlayerContainer")[0],this.images=this.element.getElementsByClassName("JpegPlayerImages")[0],this.inv_img=this.element.getElementsByClassName("JpegPlayerImg0")[0],this.vis_img=this.element.getElementsByClassName("JpegPlayerImg1")[0],this.resizeCatcher=this.element.getElementsByClassName("JpegPlayerResizeCatcher")[0].contentWindow,this.curimg=0;let n=this;this.resizeCatcher.addEventListener("resize",function(e){var t=n.lastWidth||void 0,a=n.lastHeight||void 0;n.fitToContainer(t,a)}),this.inv_img.addEventListener("load",function(){n.currentImage=n.inv_img.src,n.vis_img.src=n.inv_img.src,n.vis_img.style.display="",n.needToUpdateData()})},JpegPlayerView.prototype.fitToContainer=function(e,t){var a;void 0===e&&void 0===t||(a=this.images.clientHeight,(e=e/t)<(t=this.images.clientWidth)/a?(this.inv_img.style.height="100%",this.vis_img.style.height="100%",this.inv_img.style.width=a*e+"px",this.vis_img.style.width=a*e+"px",this.inv_img.style.right=(t-a*e)/2+"px",this.vis_img.style.right=(t-a*e)/2+"px",this.inv_img.style.top=0,this.vis_img.style.top=0):(this.inv_img.style.width="100%",this.vis_img.style.width="100%",this.inv_img.style.height=t/e+"px",this.vis_img.style.height=t/e+"px",this.inv_img.style.top=(a-t/e)/2+"px",this.vis_img.style.top=(a-t/e)/2+"px",this.inv_img.style.right=0,this.vis_img.style.right=0))},JpegPlayerView.prototype.render=function(e){var t=this;t.updateTO&&(clearTimeout(t.updateTO),t.updateTO=null),void 0!==e.url?(t.startImageUpdateTime=(new Date).getTime(),t.lastRenderTime=e.utctime,t.inv_img.src=e.url):(t.startImageUpdateTime=-1,""===t.vis_img.src&&(t.vis_img.style.display="none"),e.data_is_over?console.warn("[jpegplayer] data is over"):t.needToUpdateData());var a=e.width||t.lastWidth||void 0,e=e.height||t.lastHeight||void 0;t.lastHeight=e,t.lastWidth=a,t.fitToContainer(a,e)},JpegPlayerView.prototype.start=function(){this.updateTO&&(clearTimeout(this.updateTO),this.updateTO=null),this.lastRenderTime=-1,this.isRunning=!0},JpegPlayerView.prototype.stop=function(){this.updateTO&&(clearTimeout(this.updateTO),this.updateTO=null),this.lastRenderTime=-1,this.isRunning=!1};var JpegPlayerController=function(e,t){void 0!==e&&(this.clModel=new JpegPlayerModel(t||100),this.clView=new JpegPlayerView(e,this),this.clView.element.run=this.run.bind(this),this.clView.element.stop=this.stop.bind(this),this.clView.element.getShot=this.getShot.bind(this),this.clView.element.pushImageInfo=this.pushImageInfo.bind(this),this.clView.element.setLowDataCB=this.setLowDataCB.bind(this),this.clView.element.setTimeCB=this.setTimeCB.bind(this),this.clView.initDraw(this))};JpegPlayerController.prototype.pushImageInfo=function(e){this.clModel.pushImageInfo(e)},JpegPlayerController.prototype.setLowDataCB=function(e){this.clModel.callback_lowdata=e.bind()},JpegPlayerController.prototype.setTimeCB=function(e){this.clModel.callback_time=e.bind()},JpegPlayerController.prototype.getShot=function(){return this.clView.getCurrentImage()},JpegPlayerController.prototype.run=function(e,t){var a=this;a.clView.isRunning||(a.clView.renderPeriod=e||1e3,a.clView.start(),a.clModel.lasttime=t||void 0,a.clModel.getData(a.updateDataCB.bind(a)))},JpegPlayerController.prototype.stop=function(){this.clView.stop(),this.clModel.stop(),console.log("stop")},JpegPlayerController.prototype.updateDataCB=function(e){this.clView.render(e)},window.CloudPlayerJpegLive=function(e,t,a){var n=e,o=this,r=null,i="[JpegLive]",s=t,l=a,c=1e3,u=null,d=0,m=0,p=0,f=-1;o.getcurrtime=function(){return d},o.updateList=function(e){d+=1e3,void 0!==l&&void 0!==s&&s.cameraPreview(l.getID()).done(function(e){e.url&&((a={}).url=e.url,a.width=e.width,a.height=e.height,a.time=e.time,a.utctime=CloudHelpers.parseUTCTime(a.time),a.url.indexOf("X-Amz-Algorithm")<0&&(0<String(a.url).indexOf("?")?a.url=a.url+"&"+a.utctime:a.url=a.url+"?"+a.utctime),n.pushImageInfo(a));var t=a.utctime,a=(new Date).getTime();(0<=m&&m!=t||0<f&&f<a-p)&&(p=a,s.cameraUpdatePreview(l.getID()).done(function(e){m=t}).fail(function(e){console.error(i,e),m=0}),m=-1)}).fail(function(e){console.error(i,e)})},o.play=function(e,t,a){void(d=m=0)!==a&&(c=a),void 0!==e&&(s=e),void 0!==t&&(l=t),void 0!==r&&null!=r||(r=new JpegPlayerController(n),n.setLowDataCB(o.updateList)),n.run(c)},o.pause=function(){m="",n.stop()},o.stop=function(){d=m=0,clearTimeout(u),u=null,r&&n.stop(),0<n.children.length&&n.removeChild(n.children[0]),r=null},o.reset=function(){o.stop()},o.setForcedUpdatePeriod=function(e){f=e||-1},n.addEventListener("abort",function(){console.warn(i,"abort")},!0),n.addEventListener("canplay",function(){console.warn(i,"canplay")},!0),n.addEventListener("canplaythrough",function(){console.warn(i,"canplaythrough")},!0),n.addEventListener("durationchange",function(){console.warn(i,"durationchange")},!0),n.addEventListener("emptied",function(){console.warn(i,"emptied")},!0),n.addEventListener("encrypted",function(){console.warn(i,"encrypted")},!0),n.addEventListener("ended",function(){console.warn(i,"ended")},!0),n.addEventListener("error",function(e,t){console.error(i,"error ",e),console.error(i,"error ",t)},!0),n.addEventListener("interruptbegin",function(){console.warn(i,"interruptbegin")},!0),n.addEventListener("interruptend",function(){console.warn(i,"interruptend")},!0),n.addEventListener("loadeddata",function(){console.warn(i,"loadeddata"),n.play()},!0),n.addEventListener("loadedmetadata",function(){console.warn(i,"loadedmetadata")},!0),n.addEventListener("loadstart",function(){console.warn(i,"loadstart")},!0),n.addEventListener("mozaudioavailable",function(){console.warn(i,"mozaudioavailable")},!0),n.addEventListener("pause",function(){console.warn(i,"pause")},!0),n.addEventListener("play",function(){console.warn(i,"play")},!0),n.addEventListener("playing",function(){console.warn(i,"playing")},!0),n.addEventListener("progress",function(){console.warn(i,"progress")},!0),n.addEventListener("ratechange",function(){console.warn(i,"ratechange")},!0),n.addEventListener("seeked",function(){console.warn(i,"seeked")},!0),n.addEventListener("seeking",function(){console.warn(i,"seeking")},!0),n.addEventListener("stalled",function(){console.warn(i,"stalled")},!0),n.addEventListener("suspend",function(){console.warn(i,"suspend")},!0),n.addEventListener("timeupdate",function(){console.warn(i,"timeupdate")},!0),n.addEventListener("volumechange",function(){console.warn(i,"volumechange")},!0),n.addEventListener("waiting",function(){console.warn(i,"waiting")},!0)},window.CloudPlayerJpegTimelapse=function(e,a){var n=e,o=this,r=void 0,i=a,s=1e3,l=-1,c="-time",t=null;function u(e){l=e,t&&t(e)}function d(e){var t="";t=(void 0===e&&(e=(new Date).getTime()),CloudHelpers.formatUTCTime(e));e={};e.order_by=c,e.limit=75,"-time"===c?e.end=t:e.start=t,e.origin="recording_thumbnail",i&&i.cameraImages(e).done(function(e){if(console.log("done"),n)if(0<e.objects.length)for(var t=0;t<e.objects.length;t++){var a=e.objects[t];a.utctime=CloudHelpers.parseUTCTime(a.time),n.pushImageInfo(a)}else n.pushImageInfo(null)}).fail(function(e){console.log("err")})}function m(){l=-1,dirrection="-time"}o.getcurrtime=function(){return l},o.play=function(e=1e3,t){s=e,m(),void 0!==a&&(i=a),void 0!==r&&null!=r||(r=new JpegPlayerController(n),n.setLowDataCB(d),n.setTimeCB(u)),o.rewind(t)},o.setApi=function(e){i=e},o.pause=function(){n.stop()},o.rewind=function(e){var t;i&&void 0!==i&&(c="-time",(t=void 0)!==e?t=e:0<l&&(t=l),n.stop(),n.run(s,t))},o.fastforward=function(e){var t;i&&void 0!==i&&(c="time",(t=void 0)!==e?t=e:0<l&&(t=l),n.stop(),n.run(s,t))},o.stop=function(){m(),r&&n.stop(),0<n.children.length&&n.removeChild(n.children[0]),r=null},o.reset=function(){o.stop()},o.setTimeUpdateCallback=function(e){t=e}},window.CloudCameraTimelineMode={},CloudCameraTimelineMode.MINUTES_MODE={name:"MINUTES_MODE",code:0},CloudCameraTimelineMode.HOUR_MODE={name:"HOUR_MODE",code:1},CloudCameraTimelineMode.HOURS_12_MODE={name:"HOURS_12_MODE",code:2},window.CloudCameraTimelineView=function(e,t,a){var C=this;t=C.options=t||{};var p=null,i=0,n=null,f=108e5,h={},o=0,g=!1,r=0,s=0,v=0,l=e,c=null,d=0,m=null,y=-1,_=-1,u=!1,A=0,E=0,P=!1,b=0,T=0,w=!1,S=null,M=null,I=null,R=CloudHelpers.createCallbacks(),k=null,O=null,N=null,D=null;function L(e){if(null==e||"object"!=typeof e)return e;var t,a=e.constructor();for(t in e)e.hasOwnProperty(t)&&(a[t]=e[t]);return a}t.useTimezone&&(S=t.useTimezone,console.warn("[CloudTimeline] useTimezone: "+S)),void 0!==t.calendar&&(w=1==t.calendar),void 0!==t.polingRangeDataEveryInSec&&(M=parseInt(t.polingRangeDataEveryInSec));var x={HOURS_12_MODE:{len_ms:324e5,step_short:18e5,step_long:9e6},HOUR_MODE:{len_ms:54e5,step_short:3e5,step_long:18e5},MINUTES_MODE:{len_ms:9e5,step_short:6e4,step_long:3e5}},U=1086e4,H=L(x.MINUTES_MODE),j=document.createElement("div");j.classList.add("cloudcameratimeline"),j.classList.add("green"),j.classList.add("black"),N=a&&a.player?(k=a.player.getElementsByClassName("cloudplayer-timeline-container")[0],O=a.player.getElementsByClassName("cloudplayer-calendar-container")[0],a.player.getElementsByClassName("cloudplayer-live-container")[0]):(k=document.getElementsByClassName("cloudplayer-timeline-container")[0],O=document.getElementsByClassName("cloudplayer-calendar-container")[0],document.getElementsByClassName("cloudplayer-live-container")[0]),C.left_border=Math.floor(CloudHelpers.getCurrentTimeUTC()-H.len_ms/2),C.right_border=Math.floor(C.left_border+H.len_ms);var z=j.getElementsByClassName("cloudcameratimeline-content")[0],B=j.getElementsByClassName("cloudcameratimeline-data")[0],F=j.getElementsByClassName("cloudcameratimeline-calendar")[0],W=j.getElementsByClassName("cloudcameratimeline-cursor")[0],G=j.getElementsByClassName("cloudcameratimeline-scale")[0],Y=j.getElementsByClassName("cloudcameratimeline-goto-live")[0],q=j.getElementsByClassName("cloudcameratimeline-left")[0],V=j.getElementsByClassName("cloudcameratimeline-right")[0],J=j.getElementsByClassName("shift-minus")[0],K=j.getElementsByClassName("shift-plus")[0];if(O.appendChild(F),N.appendChild(Y),C.elem=document.getElementById(e),D=null!=C.elem&&"DIV"===C.elem.tagName?(C.elem.appendChild(j),C.elem):(k.appendChild(j),k),C.elem=document.getElementById(e),null==C.elem)return console.error("[CloudCameraTimeline] Not found element"),null;if("DIV"!=C.elem.tagName)return console.error("[CloudCameraTimeline] Expected DIV tag but got "+C.elem.tagName),null;C.elem.classList.add("cloudcameratimeline"),C.elem.classList.add("green"),C.elem.classList.add("black");k=document.getElementsByClassName("cloudplayer-timeline-container")[0],O=document.getElementsByClassName("cloudplayer-calendar-container")[0],N=document.getElementsByClassName("cloudplayer-live-container")[0];k.appendChild(C.elem),C.elem.innerHTML='<div class="cloudcameratimeline-calendar" style="display: none"></div><div class="cloudcameratimeline-shift shift-minus">-1h</div><div class="cloudcameratimeline-left"></div><div class="cloudcameratimeline-content">\t\t<div class="cloudcameratimeline-scale"></div>\t\t<div class="cloudcameratimeline-data"></div>\t\t<div class="cloudcameratimeline-cursor"></div></div></div><div class="cloudcameratimeline-right"></div><div class="cloudcameratimeline-shift shift-plus">+1h</div><div class="cloudcameratimeline-goto-live disabled">Live</div>',C.left_border=Math.floor(CloudHelpers.getCurrentTimeUTC()-H.len_ms/2),C.right_border=Math.floor(C.left_border+H.len_ms);z=C.elem.getElementsByClassName("cloudcameratimeline-content")[0],B=C.elem.getElementsByClassName("cloudcameratimeline-data")[0],F=C.elem.getElementsByClassName("cloudcameratimeline-calendar")[0],W=C.elem.getElementsByClassName("cloudcameratimeline-cursor")[0],G=C.elem.getElementsByClassName("cloudcameratimeline-scale")[0],Y=C.elem.getElementsByClassName("cloudcameratimeline-goto-live")[0],q=C.elem.getElementsByClassName("cloudcameratimeline-left")[0],V=C.elem.getElementsByClassName("cloudcameratimeline-right")[0],J=C.elem.getElementsByClassName("shift-minus")[0],K=C.elem.getElementsByClassName("shift-plus")[0];O.appendChild(F),N.appendChild(Y);var Z=null;function $(){r!=G.offsetWidth&&0!=G.offsetWidth&&(r=G.offsetWidth),s=r/(C.right_border-C.left_border),v=(C.right_border-C.left_border)/r}function X(e){return e-=e%1e3,e-=e%f}function Q(){clearInterval(C._polingCursor),Y.classList.remove("now"),Y.classList.add("disabled")}function ee(){var e,t;null!=p&&"camera"==p.type&&(e=p.getID(),t=CloudHelpers.formatUTCTime(d),null!=n._getAPI()&&n._getAPI().storageRecordsFirst(e,t,50).done(function(e){for(var t=!1,a=0;a<e.objects.length;a++){var n=e.objects[a],o=CloudHelpers.parseUTCTime(n.start),r=CloudHelpers.parseUTCTime(n.end),i=X(o);X(r);h[i]||(h[i]={status:1,data:[]});for(var s,l=0,c=0,u=0;u<h[i].data.length;u++)(s=h[i].data[u]).end>c&&(c=s.end),s.start<o&&o-2e3<s.end&&(r>s.end?(h[i].data[u].end=r,l=1,C._eventRedrawTimeline(),t=!0):l=2);0==l&&c<r&&(h[i].data.push(s={start:o,end:r}),C._eventRedrawTimeline(),t=!0),d<r&&(d=r+CloudHelpers.ONE_SECOND)}t&&(R.executeCallbacks(CloudPlayerEvent.TIMELINE_END_UPDATED,{}),null!=m&&setTimeout(m.onTimelineEndUpdate,1))}))}function te(){clearInterval(c),c=null}function ae(){clearInterval(c),d=CloudHelpers.getCurrentTimeUTC()-CloudHelpers.ONE_MINUTE,c=setInterval(ee,3e4)}function ne(e){return Math.floor((e-C.left_border)*s)}function oe(e){var t;e=e||{},null!=m&&null!=m.getSource()?m.isLive()?(Y.classList.remove("disabled"),Y.classList.add("now")):(Y.classList.remove("disabled"),Y.classList.remove("now")):(Y.classList.remove("now"),Y.classList.add("disabled")),o<C.left_border-1e3||o>C.right_border+1e3?"none"!=W.style.display&&(W.style.display="none"):("inline-block"!=W.style.display&&(W.style.display="inline-block"),0!=o?-5<(t=ne(o))&&t<r?(W.style.left=t+b+-10+"px",100*(r-t)/r<3&&("poling"!=e.sender&&"click"!=e.sender||C.isRange()||u||P||(console.log("[TIMELINE] Auto move if not user drag"),setTimeout(function(){console.log("[TIMELINE] mCursorPosition: "+o),C.moveToPosition(o)},100)))):"none"!=W.style.display&&(W.style.display="none"):"none"!=W.style.display&&(W.style.display="none"))}function re(){(new Date).getTime();var e=X(C.left_border),t=X(C.right_border)+f;if(t<e)console.error("[ERROR] start must be more than end");else{if(C.isRange()){if(e<mRangeMin_Normalize)return void console.error("[ERROR] Going beyond the range (start)");if(t>mRangeMax_Normalize)return void console.error("[ERROR] Going beyond the range (end)")}for(var a=B.getElementsByTagName("crect"),n=0,o=e;o<=t;o+=f){var r=h[o];if(r&&1==r.status)for(var i,s,l=0;l<r.data.length;l++)r.data[l].end<C.left_border||r.data[l].start>C.right_border||(i=(s=ne(r.data[l].start))+"px",s=ne(r.data[l].end)-s+"px",n<a.length?(a[n].style.display="",a[n].style.left=i,a[n].style.width=s):B.innerHTML+='<crect style="left: '+i+"; width: "+s+'"></crect>',n++)}for(o=n;o<a.length;o++)"none"!=a[o].style.display&&(a[o].style.display="none")}}function ie(e,t){var a=X(e),n=X(t)+f;if(n<a)console.error("[ERROR] start must be more than end");else{if(C.isRange()){if(e<mRangeMin_Normalize)return void console.error("[ERROR] Going beyond the range (left)");if(n>mRangeMax_Normalize)return void console.error("[ERROR] Going beyond the range (right)")}if(null!=p)for(var o=a;o<=n;o+=f){var r=h[o];(!r||r&&-1==r.status)&&function(t){var e=CloudHelpers.promise(),a=h[t];a&&1==a.status?e.resolve():null!=p?(h[t]={},h[t].status=0,h[t].data=[],p.getTimeline(t,t+f).done(function(e){h[t]&&(h[t].status=1,h[t].data=e.periods),re()}).fail(function(){h[t]&&(h[t].status=-1),e.reject()})):e.reject()}(o)}}}function se(t){p.getTimeline(t,t+f).done(function(e){!function(e,t){if(0!=e.length||0!=t.length){for(var a=0;a<e.length;a++){for(var n=e[a],o=!1,r=0;r<t.length;r++){var i=t[r];n.start==i.start&&n.end==i.end&&(o=!0)}if(!o)return 1}for(r=0;r<t.length;r++){for(i=t[r],o=!1,a=0;a<e.length;a++)(n=e[a]).start==i.start&&n.end==i.end&&(o=!0);if(!o)return 1}}}(h[t].data,e.periods)||(h[t].data=e.periods,re())})}function le(){console.log("_reloadRangeData");var e=X(y),t=X(_)+f;if(null!=p)for(var a=e;a<=t;a+=f){var n=h[a];n&&1==n.status&&se(a)}}function ce(){console.log("_stopPolingRangeData"),clearInterval(I)}function ue(){console.warn("_disposeTimeline"),d=0,h={},B.innerHTML="",Q(),te(),ce(),null!=Z&&Z.dispose()}function de(){console.warn("_changedSource"),ue(),null!=m?(p=m.getSource())?(i=S?CloudHelpers.getOffsetTimezone(S):CloudHelpers.getOffsetTimezone(p.getTimezone()),n=p._getConn(),null!=Z&&Z.setSource(p),Q(),C._polingCursor=setInterval(function(){null!=m?0!=m.getPosition()&&(o=m.getPosition()):o=0,oe({sender:"poling"})},1e3),ae(),ce(),null!=M&&C.isRange()&&(I=setInterval(function(){null!=p&&le()},1e3*M))):(p=n=null,i=0):p=null,C.redrawTimeline({sender:"changed_source"})}function me(e,t){console.warn("_playerEvent ",e),"SOURCE_CHANGED"==e.name?de():"POSITION_JUMPED"==e.name?(console.warn("POSITION_JUMPED",m),o=t.new_pos,oe({sender:"pos jumped"}),C.moveToPosition(t.new_pos)):"STOPED"==e.name?te():"PLAYED"==e.name&&(console.log("Timeline catch event: Player played "+t),c||ae())}function pe(){b=0,"none"!=q.style.display&&(b+=80),T=0,"none"!=V.style.display&&(T+=80),0==b&&(b=80),0==T&&(T=80),z.style.width="calc(100% - "+(b+T)+"px)",z.style.left=b+"px",B.style.width="calc(100% - "+(b+T)+"px)",B.style.left=b+"px",G.style.width="calc(100% - "+(b+T)+"px)",G.style.left=b+"px"}F.onclick=function(){null!=Z&&(console.log(m),m.player.classList.remove("showing-settings","showing-zoom"),Z.toggleCalendar(F))},J.onclick=function(){var e=m.getPosition();0!=(e=0==e?CloudHelpers.getCurrentTimeUTC():e)?(m.stop("by_timeline_2"),m.setPosition(e-36e5),C.moveToPosition(e-36e5),m.play()):console.log("Invalid current position")},K.onclick=function(){var e;1!=m.isLive()&&(0!=(e=0==(e=m.getPosition())?CloudHelpers.getCurrentTimeUTC():e)?(m.stop("by_timeline_2"),m.setPosition(e+36e5),C.moveToPosition(e+36e5),m.play()):console.log("Invalid current position "))},Y.onclick=function(e){var t;null!=m&&null!=m.getSource()&&(0==(t=Y.classList).contains("now")&&0==t.contains("disabled")&&(m.setPosition(CloudPlayer.POSITION_LIVE),m.play(e),C.moveToPosition(CloudHelpers.getCurrentTimeUTC())),0!=t.contains("now")&&C.moveToPosition(CloudHelpers.getCurrentTimeUTC()))},$(),C.removeCallback=function(e){R.removeCallback(e)},C.addCallback=function(e,t){R.addCallback(e,t)},C.reloadRangeData=function(){le()},C.hideCalendarButton=function(){"none"!=F.style.display&&(F.style.display="none"),pe(),C.redrawTimeline()},C.showCalendarButton=function(){"none"==F.style.display&&(F.style.display=""),pe(),C.redrawTimeline()},C.hideArrowsButtons=function(){"none"!=q.style.display&&(q.style.display="none"),"none"!=V.style.display&&(V.style.display="none"),pe(),C.redrawTimeline()},C.showArrowsButtons=function(){"none"==q.style.display&&(q.style.display=""),"none"==V.style.display&&(V.style.display=""),pe(),C.redrawTimeline()},C.hideShiftButtons=function(){"none"!=J.style.display&&(J.style.display="none"),"none"!=K.style.display&&(K.style.display="none"),pe(),C.redrawTimeline()},C.showShiftButtons=function(){"none"==J.style.display&&(J.style.display=""),"none"==K.style.display&&(K.style.display=""),pe(),C.redrawTimeline()},C.hideGotoLiveButton=function(){"none"!=Y.style.display&&(Y.style.display="none"),pe(),C.redrawTimeline()},C.showGotoLiveButton=function(){"none"==Y.style.display&&(Y.style.display=""),pe(),C.redrawTimeline()},C.setPlayer=function(e){ue(),m&&m.removeCallback(l),e?(null!=(m=e)?w&&((Z=new CloudCameraCalendarView(m.getCalendarContent(),t)).onChangeDate=function(e,t){null!=m?(m.setPosition(e-i),C.moveToPosition(e-i),m.play(t)):console.error("[TIMELINE] player is null")},C.calendar=Z):console.error("[TIMELINE] player is null"),de(),m.addCallback(l,me),m.setFullscreenCallback(function(){console.warn("fullscreenCallback"),C.redrawTimeline()})):(m=null,de())},C.setRange=function(e,t){console.warn("[TIMELINE] setRange todo"),mRangeMin_Normalize=X(y=e),mRangeMax_Normalize=X(_=t)+f,D.classList.add("range"),$();var a=_-y,e=y,t=_;a<=U?(C.hideArrowsButtons(),C.hideShiftButtons(),H.len_ms=a):(t=y+U,H.len_ms=U,(a=CloudHelpers.getCurrentTimeUTC())<_&&y<a&&t<a&&(t=a+Math.floor(U/2),e=(t=_<t?_:t)-U)),C.left_border=Math.floor(e),C.right_border=Math.floor(t),C.redrawTimeline({sender:"animation"})},C.isRange=function(){return-1!=y&&-1!=_},C.resetRange=function(){console.warn("[TIMELINE] resetRange"),_=y=-1,D.classList.remove("range"),C.showArrowsButtons(),C.showShiftButtons(),$()},C.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Spt","Oct","Nov","Dec"],C.dateFormat=function(e,t,a){var n,o,r="";return C.isRange()?(o=(e=((e=Math.floor((e-y)/1e3))-e%60)/60)%60,r=("00"+(e-o)/60).slice(-2)+":"+("00"+o).slice(-2)):((n=new Date).setTime(e+i),o=n.getUTCHours(),e="",a&&(e=12<=o?" pm":" am",o=0==o?12:12<o?o-12:o),r=("00"+o).slice(-2)+":"+("00"+n.getUTCMinutes()).slice(-2),r+=e,t&&(r+=" ("+n.getUTCDate()+" "+C.months[n.getUTCMonth()]+")")),r},C._eventRedrawTimeline=function(){setTimeout(C.redrawTimeline,10)},C.redrawTimeline=function(e){if(e=e||{},g)console.warn("redrawTimeline busy");else{g=!0,$();var t=Math.floor(C.left_border/H.step_short),a=Math.floor(C.right_border/H.step_short)+1;C.isRange()&&(C.left_border<=y?q.classList.add("disabled"):q.classList.remove("disabled"),C.right_border>=_?V.classList.add("disabled"):V.classList.remove("disabled")),G.innerHTML='<vtext id="texttimelinetest"><vtext>';var n=document.getElementById("texttimelinetest");if(n){n.innerHTML=C.dateFormat(C.left_border,!1,!0===C.options.timelineampm);var o=n.clientWidth;n.innerHTML=C.dateFormat(C.left_border,!0,!0===C.options.timelineampm);for(var r=n.clientWidth,i=H.step_long;i<o*v;)i+=H.step_long;var s=2*i;G.innerHTML+="<hline></hline>";for(var l=t;l<a;l++){var c,u,d=l*H.step_short,m=ne(d);d%H.step_long==0?(u=m-((c=d%s==0)?r:o)/2,G.innerHTML+='<vline style="left: '+m+'px"></vline>',d%i==0&&(G.innerHTML+='<vtext style="left: '+u+'px">'+C.dateFormat(d,c,!0===C.options.timelineampm)+"</vtext>")):G.innerHTML+='<vline style="left: '+m+'px"></vline>'}if(oe(e),null!=p)if(function(e,t){var e=X(e),a=X(t)+f;if(!(a<e)){for(var n=!0,o=e;o<=a;o+=f)(!h[o]||1!=h[o].status)&&(n=!1);return n}console.error("[ERROR] start must be more than end")}(C.left_border,C.right_border))re();else{if(C.isRange()&&(C.left_border<mRangeMin_Normalize||C.right_border>mRangeMax_Normalize))return void(g=!1);ie(C.left_border,C.right_border)}g=!1}}},C.redrawTimeline(),C.onTimeLineResize=function(){C.redrawTimeline()},window.addEventListener("resize",C.onTimeLineResize),C.animationTo=function(t,a,n){P=!0,n=n||H;var o=25,e=t-C.left_border,r=a-C.right_border;if(0==e&&0==r)return console.warn("Already in current position"),C.redrawTimeline({sender:"animation"}),void(P=!1);for(var i=n.step_short-H.step_short,s=n.step_long-H.step_long,l=0!=i&&0!=s,c=(C.left_border,C.right_border,[]),u=3.14/o,d=0,m=0;m<o;m++)d+=v=Math.sin(m*u),c.push({k:v});var p=e/d,f=r/d,h=i/d,g=s/d,s=c[0].k;c[0].left=C.left_border+s*p,c[0].right=C.right_border+s*f,l&&(c[0].step_short=H.step_short+s*h,c[0].step_long=H.step_long+s*g);for(m=1;m<o;m++){var v=c[m].k;c[m].left=c[m-1].left+v*p,c[m].right=c[m-1].right+v*f,l&&(c[m].step_short=c[m-1].step_short+v*h,c[m].step_long=c[m-1].step_short+v*g)}c[o-1].left=t,c[o-1].right=a;var y=0;setTimeout(function e(){C.left_border=Math.floor(c[y].left),C.right_border=Math.floor(c[y].right),l&&(H.step_short=Math.floor(c[y].step_short),H.step_long=Math.floor(c[y].step_long)),C.redrawTimeline({sender:"animation"}),++y<o?setTimeout(e,10):(l&&(H=L(n)),C.left_border=t,C.right_border=a,C.redrawTimeline({sender:"animation"}),P=!1)},15)},C.fixBorderLimit=function(e,t){var a={};return a.left=e,a.right=t,C.isRange()?(a.right>_&&(a.right=_,a.left=a.right-H.len_ms),a.left<y&&(a.left=y,a.right=a.left+H.len_ms)):(t=CloudHelpers.getCurrentTimeUTC()+H.len_ms/2,a.right>t&&(t=a.right-t,a.left=a.left-t,a.right=a.right-t)),a},C.moveToRight=function(){var e=C.right_border-C.left_border,e=Math.floor(.75*e),t=C.left_border+e,e=C.right_border+e,e=C.fixBorderLimit(t,e);C.animationTo(e.left,e.right)},V.onclick=C.moveToRight,C.moveToLeft=function(){var e=C.right_border-C.left_border,e=Math.floor(.75*e),t=C.left_border-e,e=C.right_border-e,e=C.fixBorderLimit(t,e);C.animationTo(e.left,e.right)},q.onclick=C.moveToLeft,C.moveToPosition=function(e){console.log("moveToPosition");var t=Math.floor((C.right_border-C.left_border)/2),a=e-t,t=e+t;C.isRange()&&(a<y||_<t)?console.error("Can not move beyond range"):C.animationTo(a,t)},C.mousedown=function(e){if(!u){A=e.offsetX,E=e.offsetX,u=!0,z.style.cursor="move";try{window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}catch(e){console.error(e)}}},C.mousemove=function(e){var t;u&&!C.isRange()&&(t=e.offsetX-E,0!=(t=void 0!==e.movementX?e.movementX:t)&&(e=Math.floor(t*v),E+=t,e=C.fixBorderLimit(C.left_border-e,C.right_border-e),C.left_border=e.left,C.right_border=e.right,C.redrawTimeline({sender:"mousemove"})))},C.mouseup=function(e){u&&(z.style.cursor="default",u=!1)},C.mouseout=function(e){u&&(e.relatedTarget&&"CRECT"==e.relatedTarget.nodeName||e.target&&"CRECT"==e.target.nodeName||e.relatedTarget&&"cloudcameratimeline-cursor"==e.relatedTarget.className||e.target&&"cloudcameratimeline-cursor"==e.target.className||(z.style.cursor="default",u=!1))},z.addEventListener("mousedown",C.mousedown),z.addEventListener("mousemove",C.mousemove),z.addEventListener("mouseup",C.mouseup),z.addEventListener("mouseout",C.mouseout),B.onclick=function(e){var t;null!=m?null!=p?A==E&&(t=e.currentTarget.getBoundingClientRect(),t=e.clientX-t.left,t=Math.floor(t*v),(t+=C.left_border)>=CloudHelpers.getCurrentTimeUTC()&&m?(o=CloudHelpers.getCurrentTimeUTC(),oe({sender:"click"}),m.stop("by_timeline_1"),m.setPosition(CloudPlayer.POSITION_LIVE),m.play(),R.executeCallbacks(CloudPlayerEvent.USER_CLICKED_ON_TIMELINE,{pos:CloudPlayer.POSITION_LIVE})):t&&m?(o=t,oe({sender:"click"}),m.stop("by_timeline_2"),m.setPosition(t),m.play(),R.executeCallbacks(CloudPlayerEvent.USER_CLICKED_ON_TIMELINE,{pos:t})):oe({sender:"click"})):console.log("[CloudCameraTimeline] source is null"):console.log("[CloudCameraTimeline] player is null")},C.setMode=function(e){var t=null;if(!x[e.name])return console.error("Unknown timeline mode"),-1;var t=x[e.name],a=(C.right_border-C.left_border)/2+C.left_border,e=L(t),t=t.len_ms/2;return C.animationTo(a-t,a+t,e),0},C.getMode=function(){return H},C.destroy=function(){if(window.removeEventListener("resize",C.onTimeLineResize),C.elem&&"DIV"===C.elem.tagName)for(;C.elem.firstChild;)C.elem.removeChild(C.elem.firstChild);clearInterval(c)},void 0!==t.arrows&&(1==t.arrows?C.showArrowsButtons():C.hideArrowsButtons()),void 0!==t.gotoLive&&(1==t.gotoLive?C.showGotoLiveButton():C.hideGotoLiveButton()),void 0!==t.range&&(O=t.range.min,N=t.range.max,C.setRange(O,N)),w?C.showCalendarButton():C.hideCalendarButton(),console.log("options: ",t)},window.CloudCameraCalendarView=function(e,t){var n=e;var o=this,a=null,v={},r=null,i=null,s=(new Date).getMonth(),l=(new Date).getFullYear(),c=100*l+s,u=100*l+s;function d(e,t){return["January","February","March","April","May","June","July","August","September","October","November","December"][t%12]+" "+e}function y(e,t,a){return e+"-"+("00"+(t+1)).slice(-2)+"-"+("00"+a).slice(-2)}function m(e,t){var a=new Date;a.setFullYear(e),a.setMonth(t),a.setDate(1);for(var n=a.getDay(),o=(t-1+12)%12,r=0==t?e-1:e,i=(t+1+12)%12,s=11==t?e+1:e,a=new Date(s,i,0),l=a.getDate(),a=a.getDay(),c=["Su","Mo","Tu","We","Th","Fr","Sa"],u=[],d=(d=new Date(r,1+o,0).getDate())-n+1,m=0;m<n;m++)u.push({d:d,cl:"disabled",dt:y(s,i,d)}),d++;for(m=1;m<=l;m++)u.push({d:m,cl:"",dt:y(e,t,m)});for(var p=0,m=a+1;m<7;m++)u.push({d:++p,cl:"disabled",dt:y(s,i,p)});for(m=0;m<v.length;m++)for(var f=v[m],h=0;h<u.length;h++)u[h].dt===f&&(u[h].cl+="active-day");for(var g='<div class="cal-row week">',m=0;m<c.length;m++)g+='<div class="cal-day name">'+c[m]+"</div>";g+="</div>",g+='<div class="cal-row">';for(m=0;m<u.length;m++)m%7==0&&0<m&&(g+='</div><div class="cal-row">'),g+='<div class="cal-day '+u[m].cl+'" dt="'+u[m].dt+'">'+u[m].d+"</div>";return g+="</div>"}n.innerHTML='\t<div class="cloudcameracalendar-header">\t\t<div class="cloudcameracalendar-prev-month"></div>\t\t<div class="cloudcameracalendar-title">'+d(l,s)+"</div>\t\t<div class=\"cloudcameracalendar-next-month\"></div>\t</div>\t<div class='cloudcameracalendar-table'>"+m(l,s)+"\t</div>";n.getElementsByClassName("cloudcameracalendar-close")[0];var p=n.getElementsByClassName("cloudcameracalendar-prev-month")[0],f=n.getElementsByClassName("cloudcameracalendar-next-month")[0],h=n.getElementsByClassName("cloudcameracalendar-table")[0],g=n.getElementsByClassName("cloudcameracalendar-title")[0];o.renderContent=function(){g.innerHTML=d(l,s),h.innerHTML=m(l,s);for(var e=n.getElementsByClassName("active-day"),t=0;t<e.length;t++)e[t].onclick=function(e){var t=this.getAttribute("dt");o.onChangeDate&&o.onChangeDate(Date.parse(t),e)};var a=100*l+s;p.style.display=a<=c?"none":"",f.style.display=u<=a?"none":""},o.renderContent(),o.updateActivity=function(){if(null==a)return console.log("[CALENDAR] mConn is null"),v=[],void o.renderContent();mApi=a._getAPI(),mApi&&mApi.storageActivity(r,!0).done(function(e){i=new Date,v=e.objects;for(var t=0;t<v.length;t++){var a=v[t].split("-"),n=parseInt(a[1],10)-1,n=100*parseInt(a[0],10)+n;u=0==t?c=n:(c=Math.min(n,c),Math.max(n,u))}o.renderContent()})},o.setSource=function(e){s=(new Date).getMonth(),l=(new Date).getFullYear(),(i=null)!=e?(a=e._getConn(),r=e.getID(),CloudHelpers.getOffsetTimezone(e.getTimezone()),o.updateActivity()):(a=null,v=[],o.renderContent())},o.dispose=function(){a=null},p.onclick=function(){(s-=1)<0&&(s=11,l-=1),o.renderContent()},f.onclick=function(){11<(s+=1)&&(s=0,l+=1),o.renderContent()},o.isVisible=function(){return""!==n.style.display},o.showCalendar=function(){var e;console.log("[CALENDAR] show"),n.style.display="block",null!=a?null!=i?((e=new Date).setUTCHours(24),e.setUTCMinutes(0),e.setUTCSeconds(0),(new Date).getTime()>e.getTime()&&i.getTime()<e.getTime()&&o.updateActivity()):o.updateActivity():o.renderContent()},o.hideCalendar=function(){console.log("[CALENDAR] hide"),n.style.display=""},o.toggleCalendar=function(e){console.log("[CALENDAR] toggle"),o.isVisible()?(o.hideCalendar(),e.classList.remove("shadowed")):(o.showCalendar(),e.classList.add("shadowed"))}},window.CloudSessionTimeline=function(e){var y=this,m=null,t={};function C(e){if(null==e||"object"!=typeof e)return e;var t,a=e.constructor();for(t in e)e.hasOwnProperty(t)&&(a[t]=e[t]);return a}t.h12={to:"min",len_ms:324e5,step_short:18e5,step_long:9e6},t.hr={to:"h12",len_ms:54e5,step_short:3e5,step_long:18e5},t.min={to:"hr",len_ms:9e5,step_short:6e4,step_long:3e5};var _=C(t.min);if(y.elem=document.getElementById(e),null==y.elem)return console.error("[CloudPlayerTimeline] Not found element"),null;if("DIV"!=y.elem.tagName)return console.error("[CloudPlayerTimeline] Expected DIV tag but got "+y.elem.tagName),null;y.elem.classList.add("cloudplayertimeline"),y.elem.classList.add("green"),y.elem.classList.add("black"),y.elem.innerHTML='<div class="cloudplayertimeline-content">\t\t<div class="cloudplayertimeline-scale session"></div>\t\t<div class="cloudplayertimeline-data session"></div>\t\t<div class="cloudplayertimeline-cursor"></div></div>',y.left_border=CloudHelpers.getCurrentTimeUTC()-_.len_ms/2,y.right_border=y.left_border+_.len_ms,y.el_data=y.elem.getElementsByClassName("cloudplayertimeline-data")[0];var p=y.elem.getElementsByClassName("cloudplayertimeline-cursor")[0];function a(){clearInterval(y._polingCursor)}y.el_scale=y.elem.getElementsByClassName("cloudplayertimeline-scale")[0],y.setPlayer=function(e){a(),y.plr=e,y.plr&&(a(),y._polingCursor=setInterval(function(){var e=y.plr.getPosition();(e<y.left_border||e>y.right_border)&&"none"!=p.style.display&&(p.style.display="none"),"inline-block"!=p.style.display&&(p.style.display="inline-block"),0!=e&&(e=y.calcPosition(e)+50+"px",p.style.left=e)},1e3))},y.calcPosition=function(e){return Math.floor((e-y.left_border)*y.distPx)},y.months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Spt","Oct","Nov","Dec"],y.dateFormat=function(e,t){var a=new Date;a.setTime(e);e=("00"+a.getUTCHours()).slice(-2)+":"+("00"+a.getUTCMinutes()).slice(-2);return t&&(e+=" ("+a.getUTCDate()+" "+y.months[a.getUTCMonth()]+")"),e},y.redrawTimeline=function(){null!=(m=null!=y.plr?y.plr.getSource():null)&&(y.left_border=m.getStartTime(),y.right_border=m.getEndTime(),_.step_short=(y.right_border-y.left_border)/20),p.style.display="none",y.containerWidth=y.el_scale.offsetWidth,y.distPx=y.containerWidth/(y.right_border-y.left_border),y.distSec=(y.right_border-y.left_border)/y.containerWidth;var e=Math.floor(y.left_border/_.step_short),t=Math.floor(y.right_border/_.step_short)+1;y.el_data.innerHTML="",y.el_scale.innerHTML='<vtext id="texttimelinetest"><vtext>';var a=document.getElementById("texttimelinetest");a.innerHTML=y.dateFormat(y.left_border,!1);var n=a.clientWidth;a.innerHTML=y.dateFormat(y.left_border,!0);for(var o=a.clientWidth,r=_.step_long;n*y.distSec>r;)r+=_.step_long;var i=2*r;y.el_scale.innerHTML+="<hline></hline>";for(var s=e;s<t;s++){var l,c,u=s*_.step_short,d=y.calcPosition(u);u%_.step_long==0?(c=d-((l=u%i==0)?o:n)/2,y.el_scale.innerHTML+='<vline style="left: '+d+'px"></vline>',u%r==0&&(y.el_scale.innerHTML+='<vtext style="left: '+c+'px">'+y.dateFormat(u,l)+"</vtext>")):y.el_scale.innerHTML+='<vline style="left: '+d+'px"></vline>'}y.el_data.innerHTML="",null!=m&&m.getTimeline(y.left_border,y.right_border).done(function(e){var t=e.periods;y.el_data.innerHTML="";for(var a=0;a<t.length;a++){var n=y.calcPosition(t[a].start),o=y.calcPosition(t[a].end);y.el_data.innerHTML+='<crect style="left: '+n+"px; width: "+(o-n)+'px"></crect>'}}).fail(function(e){console.error(e)})},y.redrawTimeline(),window.addEventListener("resize",y.redrawTimeline),y.animationTo=function(e,t,a){for(var n=25,o=e-y.left_border,r=t-y.right_border,i=(a=a||_).step_short-_.step_short,s=a.step_long-_.step_long,l=0!=i&&0!=s,c=[],u=[],d=[],m=[],p=3.14/n,f=0,h=0;h<n;h++)f+=g=Math.sin(h*p);for(h=0;h<n;h++){var g=Math.sin(h*(3.14/n));c.push(g*(o/f)),u.push(g*(r/f)),l&&(d.push(g*(i/f)),m.push(g*(s/f)))}var v=0;setTimeout(function e(){y.left_border+=c[v],y.right_border+=u[v],l&&(_.step_short+=d[v],_.step_long+=m[v]),y.redrawTimeline(),++v<n?setTimeout(e,10):(l&&(_=C(a)),y.redrawTimeline())},15)},y.fixBorderLimit=function(e,t){var a={};a.left=e,a.right=t;t=CloudHelpers.getCurrentTimeUTC()+_.len_ms/2;return a.right>t&&(t=a.right-t,a.left=a.left-t,a.right=a.right-t),a},y._clickOnData=function(e){null!=y.plr?null!=m?(e=Math.floor(e.offsetX*y.distSec),(e+=y.left_border)&&y.plr&&(y.plr.stop("by_session_timeline_1"),y.plr.setPosition(e),y.plr.play())):console.log("[CloudCameraTimeline] source is null"):console.log("[CloudCameraTimeline] player is null")},y.el_data.onclick=y._clickOnData,y._startMove=!1,y._lastMoveX=0,y.mousedown=function(e){y._lastMoveX=e.offsetX,y._startMove=!0,y.el_data.style.cursor="move"},y.mousemove=function(e){var t;!y._startMove||0!=(t=e.offsetX-y._lastMoveX)&&(t=Math.floor(t*y.distSec),y._lastMoveX=e.offsetX,t=y.fixBorderLimit(y.left_border-t,y.right_border-t),y.left_border=t.left,y.right_border=t.right,y.redrawTimeline())},y.mouseup=function(e){y._startMove=!1,y.el_data.style.cursor="default"},y.el_data.addEventListener("mousedown",y.mousedown),y.el_data.addEventListener("mousemove",y.mousemove),y.el_data.addEventListener("mouseup",y.mouseup),y.el_data.addEventListener("mouseout",y.mouseup)},window.VXGCloudPlayerTimelineView=function(e,t,n){var a=this;t=a.options=t||{};var o=null,r=0,i=0,s=e,l=null,c=!1,u=null,d=(CloudHelpers.createCallbacks(),null),m=null,p=null,f=null,h=!1;t.useTimezone&&(u=t.useTimezone,console.warn("[CloudTimeline] useTimezone: "+u)),void 0!==t.calendar&&(c=1==t.calendar),void 0!==t.polingRangeDataEveryInSec&&parseInt(t.polingRangeDataEveryInSec);var g={HOURS_12_MODE:{len_ms:324e5,step_short:18e5,step_long:9e6},HOUR_MODE:{len_ms:54e5,step_short:3e5,step_long:18e5},MINUTES_MODE:{len_ms:9e5,step_short:6e4,step_long:3e5}},p=(function(e){if(null==e||"object"!=typeof e)return;var t,a=e.constructor();for(t in e)e.hasOwnProperty(t)&&(a[t]=e[t])}(g.MINUTES_MODE),n&&n.player?(d=n.player.getElementsByClassName("cloudplayer-timeline-container")[0],m=n.player.getElementsByClassName("cloudplayer-calendar-container")[0],n.player.getElementsByClassName("cloudplayer-live-container")[0],n.player.getElementsByClassName("cloudplayer-vxgcloudplayer")[0]):(d=document.getElementsByClassName("cloudplayer-timeline-container")[0],m=document.getElementsByClassName("cloudplayer-calendar-container")[0],document.getElementsByClassName("cloudplayer-live-container")[0],document.getElementsByClassName("cloudplayer-vxgcloudplayer")[0])),g=document.createElement("div");g.classList.add("cloudcameratimeline"),g.classList.add("green"),g.classList.add("black"),g.innerHTML='<div id="'+e+'_timeline" class="ktimepicker-container" style="color:white;background:rgba(0,0,0,0);width:100%;height:36px;position:absolute;bottom:0;"></div><div class="cloudcameratimeline-calendar" style="display: none"></div><div class="cloudcameratimeline-goto-live disabled" style="position:absolute;right:0;top:0;">Live</div>';g.getElementsByClassName("cloudcameratimeline-content")[0],g.getElementsByClassName("cloudcameratimeline-data")[0];var v=g.getElementsByClassName("cloudcameratimeline-calendar")[0],y=(g.getElementsByClassName("cloudcameratimeline-cursor")[0],g.getElementsByClassName("cloudcameratimeline-scale")[0],g.getElementsByClassName("cloudcameratimeline-goto-live")[0]);g.getElementsByClassName("cloudcameratimeline-left")[0],g.getElementsByClassName("cloudcameratimeline-right")[0],g.getElementsByClassName("shift-minus")[0],g.getElementsByClassName("shift-plus")[0];m.appendChild(v),d.appendChild(g),p.setAttribute("timelineselector","#"+e+"_timeline");var C=null,p=d.getElementsByClassName("ktimepicker-container")[0],e=new MutationObserver(function(e){for(var t of e)"childList"==t.type&&(console.log("A child node has been added or removed."),(f=d.getElementsByTagName("k-timeline-picker")[0])&&(f.addEventListener("change",function(e){var t,a;void 0!==n.mSrc&&null!=n.mSrc&&(h=!0,t=Number(f.getAttribute("centerutctime")),a=n.getPosition(),t>Date.now()?n.isLive()||(n.setPosition(CloudHelpers.POSITION_LIVE),n.play("timepicker")):a!=t&&(n.setPosition(t),n.play("timepicker")),h=!1)}),C.disconnect()))}),C=e;e.observe(p,{childList:!0});var _=null;function A(){clearInterval(a._polingCursor),y.classList.remove("now"),y.classList.add("disabled"),a._polingCursor=setInterval(function(){null!=n?0!=n.getPosition()&&(i=n.getPosition()):i=0,void 0===n.mSrc||null==n.mSrc?(y.classList.remove("now"),y.classList.add("disabled")):n.isLive()?(y.classList.remove("disabled"),y.classList.add("now")):(y.classList.remove("disabled"),y.classList.remove("now")),(f=d.getElementsByTagName("k-timeline-picker")[0])&&0!=i&&!h&&n.isLive()&&n.player.getElementsByTagName("vxg-cloud-player")[0].setTimePromise(i).then(function(e){}).catch(function(e){})},1e3)}function E(e,t){console.warn("_playerEvent ",e),"SOURCE_CHANGED"==e.name?(console.warn("_changedSource"),null!=l&&(o=l.getSource())&&(r=u?CloudHelpers.getOffsetTimezone(u):CloudHelpers.getOffsetTimezone(o.getTimezone()),null!=_&&_.setSource(o)),null!=n&&A()):"POSITION_JUMPED"==e.name?(console.warn("POSITION_JUMPED",l),i=t.new_pos):"STOPED"==e.name?console.log("Timeline catch event: Player stoped "+t):"PLAYED"==e.name&&console.log("Timeline catch event: Player played "+t)}v.onclick=function(){null!=_&&(console.log(l),l.player.classList.remove("showing-settings","showing-zoom"),_.toggleCalendar(v))},y.onclick=function(e){var t;void 0!==n.mSrc&&null!=n.mSrc&&null!=n&&null!=n.getSource()&&(0==(t=y.classList).contains("now")&&0==t.contains("disabled")&&(n.setPosition(CloudPlayer.POSITION_LIVE),n.play()),t.contains("now"))},a.hideCalendarButton=function(){"none"!=v.style.display&&(v.style.display="none")},a.showCalendarButton=function(){"none"==v.style.display&&(v.style.display="")},a.hideGotoLiveButton=function(){"none"!=y.style.display&&(y.style.display="none")},a.showGotoLiveButton=function(){"none"==y.style.display&&(y.style.display="")},a.setPlayer=function(e){l&&l.removeCallback(s),e?(null!=(l=e)?c&&((_=new CloudCameraCalendarView(l.getCalendarContent(),t)).onChangeDate=function(e,t){null!=l?(l.setPosition(e-r),l.play(t)):console.error("[TIMELINE] player is null")},a.calendar=_):console.error("[TIMELINE] player is null"),l.addCallback(s,E),l.setFullscreenCallback(function(){console.warn("fullscreenCallback")})):l=null},void 0!==t.gotoLive&&(1==t.gotoLive?a.showGotoLiveButton():a.hideGotoLiveButton()),c?a.showCalendarButton():a.hideCalendarButton(),console.log("options: ",t)},window.CloudSDK=window.CloudSDK||{},CloudSDK.version="3.2.1",CloudSDK.datebuild="221220",console.log("CloudSDK.version="+CloudSDK.version+"_"+CloudSDK.datebuild),window.CloudPlayerSDK=function(e,t){console.log(t);var r=this;r.options=t||{},r.player=null,r.conn=null,r.filter=null,r.cm=null,r.mCameraID=null;var i=CloudPlayer.POSITION_LIVE;if(r.camera=null,r.svcp_url=null,r.sharedKey=null,r.playerElementID=null,r.tokenExpire=null,window._CloudPlayerSDK=window._CloudPlayerSDK||{},!e||""===e)throw"Player container element ID is required.";if(r.playerElementID=e,-1===r.playerElementID.indexOf("%")&&(r.playerElementID=encodeURIComponent(r.playerElementID)),r.conn=new CloudShareConnection(r.options),window._CloudPlayerSDK[e])throw"Oops! CloudPlayerSDK instance with player element ID: "+e+" already exist. Try use another ID.";window._CloudPlayerSDK[e]={},r.player=new CloudPlayer(e,r.options),console.log("self.options: ",r.options),null!=r.options.timeline&&0!=r.options.timeline&&(r.timeline=new VXGCloudPlayerTimelineView(e,r.options,r.player),r.timeline.setPlayer(r.player),r.player.player.classList.add("with-timeline"),r.player.calendar=r.timeline.calendar,console.log(r.player)),r.setSource=function(t){CloudHelpers.promise();if(!t||""===t)return r.player._showerror(CloudReturnCode.ERROR_ACCESS_TOKEN_REQUIRED),CloudReturnCode.ERROR_ACCESS_TOKEN_REQUIRED;var e=!1,a=!1;try{var n,o=atob(t),o=JSON.parse(o);if(console.log("[CloudPlayerSDK] access_token: ",o),r.tokenExpire=null,o.expires)if(r.tokenExpire=o.expires,CloudHelpers.parseUTCTime(r.tokenExpire)-(new Date).getTime()<0)return r.player._showerror(CloudReturnCode.ERROR_ACCESS_TOKEN_EXPIRED),CloudReturnCode.ERROR_ACCESS_TOKEN_EXPIRED;o.token&&o.camid&&o.access&&""!==o.token&&""!==o.camid&&""!==o.access&&(r.sharedKey=o.token,r.mCameraID==o.camid&&(a=!0),r.mCameraID=o.camid),o.svcp&&""!=o.svcp&&(r.svcp_url==o.svcp&&(e=!0),r.svcp_url=o.svcp),o.api&&""!=o.api&&(n="",n=("file:"==location.protocol?"http:":location.protocol)+"//"+o.api,"http:"==location.protocol||"file:"==location.protocol?n+=o.api_p?":"+o.api_p:"":"https:"==location.protocol&&(n+=o.api_sp?":"+o.api_sp:""),n+="/",o.path&&""!=o.path&&(n+=o.path,n+="/"),r.svcp_url==n&&(e=!0),r.svcp_url=n)}catch(e){r.player._showerror(CloudReturnCode.ERROR_INVALID_ACCESS_TOKEN_FORMAT)}a&&e?(console.log("DEBUG: Same camid and svcp for newly token"),r.conn.updateToken(r.sharedKey),r.player.setAccessToken(t),r.player.setAccessTokenExpire(r.tokenExpire)):(r.player.stop("by_plrsdk_3"),null!=r.svcp_url&&(r.conn.ServiceProviderUrl=r.svcp_url.replace("file://","https://")),r.conn.open(r.sharedKey).done(function(e){r.conn&&(r.cm=new CloudCameraList(r.conn),r.cm.getCamera(r.mCameraID).done(function(e){r.player.setAccessToken(t),r.player.setAccessTokenExpire(r.tokenExpire),r.player.setSource(e),r.camera=e,console.log(r.camera),console.log(r.camera._origJson()),r.player.setPosition(i),r.player.play()}).fail(function(e){console.log(e),r.player&&r.player._showerror(CloudReturnCode.ERROR_CHANNEL_NOT_FOUND)}))}).fail(function(e){r.player._showerror(CloudReturnCode.ERROR_NETWORK_ERROR)}))},r.getSource=function(){return r.sharedKey||CloudReturnCode.ERROR_SOURCE_NOT_CONFIGURED},r.play=function(){if(!r.camera)return CloudReturnCode.ERROR_SOURCE_NOT_CONFIGURED;r.player.play()},r.stop=function(){r.svcp_url=null,r.mCameraID=null,r.player.stop("by_plrsdk_1")},r.pause=function(){if(!r.camera)return CloudReturnCode.ERROR_SOURCE_NOT_CONFIGURED},r.close=function(){r.player.stop("by_plrsdk_2"),r.player.close(),r.player.player.innerHTML="",r.conn.close(),window._CloudPlayerSDK[e]&&delete window._CloudPlayerSDK[e]},r.sendBackwardAudio=function(){return r.player.sendBackwardAudio()},r.destroy=function(){r.player.destroy(),r.conn.close(),r.player.player.innerHTML="",r.player=null,window._CloudPlayerSDK[r.playerElementID]&&delete window._CloudPlayerSDK[r.playerElementID]},r.isPlaying=function(){return r.camera?r.player.isPlaying():CloudReturnCode.ERROR_SOURCE_NOT_CONFIGURED},r.setPosition=function(e){if(e=Number(e),i=e,!r.camera)return CloudReturnCode.ERROR_SOURCE_NOT_CONFIGURED;r.player.stop("by_plrsdk_2"),r.player.setPosition(e),r.player.play()},r.getPosition=function(){return r.camera?r.player.getPosition():CloudReturnCode.ERROR_SOURCE_NOT_CONFIGURED},r.showTimeline=function(e){return!0},r.showCalendarControl=function(e){},r.getChannelName=function(){return r.camera?r.camera.getName():CloudReturnCode.ERROR_SOURCE_NOT_CONFIGURED},r.setRange=function(e,t){r.player.setRange(e,t)},r.resetRange=function(){r.player.resetRange()},r.showZoomControl=function(e){r.player&&r.player._showZoomControl(e)},r.showPTZControl=function(e){r.player&&r.player.showPTZControl(e)},r.mOnError_callback=null,r.onError=function(e){e?(r.mOnError_callback=e,r.player.onError(function(e,t){r.mOnError_callback(r,t)})):r.player.onError(null)},r.mOnChannelStatus_callback=null,r.onChannelStatus=function(e){if(!e)return r.mOnChannelStatus_callback=null,void r.player.onChannelStatus(null);r.mOnChannelStatus_callback=e,r.player.onChannelStatus(function(e,t){r.mOnChannelStatus_callback(r,t)})},r.setIOsFullscreenCallback=function(e){r.player.setIOsFullscreenCallback(e)},r.addCallback=function(e,t){r.player.addCallback(e,t)},r.removeCallback=function(e){r.player.removeCallback(e)},r.getImages=function(){r.player.getImages()}},window.StreamerSWF=window.StreamerSWF||{},StreamerSWF.elemId="streamer_swf",StreamerSWF.obj=void 0,StreamerSWF.log=function(e){console.log("[StreamerSWF] "+e)},StreamerSWF.warn=function(e){console.warn("[StreamerSWF] "+e)},StreamerSWF.error=function(e){console.error("[StreamerSWF] "+e)},StreamerSWF.startedPublish=function(){},StreamerSWF.stoppedPublish=function(){},StreamerSWF.showSecuritySettings=function(){},StreamerSWF.hideSecuritySettings=function(){},StreamerSWF.activityLevel=function(e){console.log("audio lvl "+e)},StreamerSWF.flash=function(){return StreamerSWF.obj?StreamerSWF.obj.vjs_activate||(StreamerSWF.obj=document.getElementById(StreamerSWF.elemId),StreamerSWF.obj||StreamerSWF.error("Element '"+StreamerSWF.elemId+"' not found"),StreamerSWF.log("reinit")):(StreamerSWF.obj=document.getElementById(StreamerSWF.elemId),StreamerSWF.obj||StreamerSWF.error("Element '"+StreamerSWF.elemId+"' not found"),StreamerSWF.log("Init")),StreamerSWF.obj},StreamerSWF.activate=function(e,t){var a,n=StreamerSWF.flash();n&&(n.vjs_activate?(a=StreamerSWF.private.is()||!1,n.vjs_activate(e,a,t)):(StreamerSWF.error("Function vjs_activate not found"),StreamerSWF.obj=void 0))},StreamerSWF.support=function(){var e=StreamerSWF.flash();if(e)return e.vjs_support?e.vjs_support():(StreamerSWF.error("Function vjs_support not found"),void(StreamerSWF.obj=void 0))},StreamerSWF.status=function(){var e=StreamerSWF.flash();if(e)return e.vjs_status?e.vjs_status():(StreamerSWF.error("Function vjs_status not found"),void(StreamerSWF.obj=void 0))},StreamerSWF.deactivate=function(){var e=StreamerSWF.flash();e&&(e.vjs_deactivate?e.vjs_deactivate():(console.error("Function vjs_deactivate not found"),StreamerSWF.obj=void 0))},StreamerSWF.isActivated=function(){return"activated"==StreamerSWF.status()},StreamerSWF.isDeactivated=function(){return"deactivated"==StreamerSWF.status()},StreamerSWF.isTransitive=function(){return"transitive"==StreamerSWF.status()},StreamerSWF.private={},StreamerSWF.private.retry=function(e,t){var a=0,n=!1,o=window.setInterval(function(){e()&&(window.clearInterval(o),t(n)),50<a++&&(window.clearInterval(o),t(n=!0))},10)},StreamerSWF.private.isIE10OrLater=function(e){var t=e.toLowerCase();if(0===t.indexOf("msie")&&0===t.indexOf("trident"))return!1;e=/(?:msie|rv:)\s?([\d\.]+)/.exec(t);if(e&&10<=parseInt(e[1],10))return!0;t=/edge/.exec(t);return!(!t||"edge"!=t[0])},StreamerSWF.private.detectPrivateMode=function(t){var a,n;if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,1,function(){a=!1},function(e){console.log(e),a=!0});else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){try{n=window.indexedDB.open("test")}catch(e){a=!0}void 0===a&&StreamerSWF.private.retry(function(){return"done"===n.readyState},function(e){e||(a=!n.result)})}else if(StreamerSWF.private.isIE10OrLater(window.navigator.userAgent)){a=!1;try{window.indexedDB||(a=!0)}catch(e){a=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(e){a=!0}void 0===a&&(a=!1,window.localStorage.removeItem("test"))}StreamerSWF.private.retry(function(){return void 0!==a},function(e){t(a)})},StreamerSWF.private.is=function(){return void 0===StreamerSWF.private.is_&&console.error("[StreamerSWF.private] cannot detect"),StreamerSWF.private.is_},StreamerSWF.private.detectPrivateMode(function(e){void 0===(StreamerSWF.private.is_=e)?console.error("[StreamerSWF.private] cannot detect"):(StreamerSWF.private.is_=e,console.log(e?"[StreamerSWF.private] private":"[StreamerSWF.private] not private"))});for(var ptzconfig={xRot:-48.6,zRot:145,xScale:1,yScale:1,xShift:0,yShift:0,zCamShift:.2,zZoom:-.6,xLens:1,zLens:1,divider:4},jsscript=document.getElementsByTagName("script"),i=0;i<jsscript.length;i++){var pattern=/CloudSDK/i;pattern.test(jsscript[i].getAttribute("src"))&&(ptzconfig.src=jsscript[i].getAttribute("src").replace(/(\/[^\/]+)$/,"/"))}function changepztconfig(e,t){ptzconfig[t]=e}function testplay(){$("#player1_vjs_html5_api").attr("src","/video.mp4"),player1_vjs_html5_api.play()}function testplay2(){$("#player1_vjs_html5_api").attr("src","/fisheye.mp4"),player1_vjs_html5_api.play()}window.CloudPano=function(e,t){var r={};function s(e,t,a){var n=e.RGBA,o=e.RGBA,r=e.UNSIGNED_BYTE;try{e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,n,o,r,a)}catch(e){console.warn("CloudPano.updateTexture: "+e.message)}}r.container=e,r.pano_player=t,r.ptzconfig=Object.assign({},ptzconfig),r.beMouseDown=!1,r.bezRot=r.bexRot=0,r.beX=r.beY=0,r.model={vertex:[],indices:[],texture:[]},r.load_model=function(){if(!r.textureBuffer){var t;try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){try{t=new XMLHttpRequest}catch(e){t=!1}}}t.onreadystatechange=function(){if(!r.textureBuffer&&4==t.readyState&&(200==t.status||0==t.status)&&t.response){for(r.model=JSON.parse(t.response),r.model.indices=[],c=0,i=0;i<r.model.vertex.length;i+=3)r.model.indices.push(c++);r.vertexBuffer=r.gl.createBuffer(),r.gl.bindBuffer(r.gl.ARRAY_BUFFER,r.vertexBuffer),r.gl.bufferData(r.gl.ARRAY_BUFFER,new Float32Array(r.model.vertex),r.gl.STATIC_DRAW),r.gl.bindBuffer(r.gl.ARRAY_BUFFER,null),r.indexBuffer=r.gl.createBuffer(),r.gl.bindBuffer(r.gl.ELEMENT_ARRAY_BUFFER,r.indexBuffer),r.gl.bufferData(r.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(r.model.indices),r.gl.STATIC_DRAW),r.gl.bindBuffer(r.gl.ELEMENT_ARRAY_BUFFER,null),r.textureBuffer=r.gl.createBuffer(),r.gl.bindBuffer(r.gl.ARRAY_BUFFER,r.textureBuffer),r.gl.bufferData(r.gl.ARRAY_BUFFER,new Float32Array(r.model.texture),r.gl.STATIC_DRAW),r.gl.bindBuffer(r.gl.ARRAY_BUFFER,null),console.log("[CloudPlayer] vehicles count is "+r.model.vertex.length/3)}},r.pano_player.options&&r.pano_player.options.model3d?t.open("GET",r.pano_player.options.model3d,!0):t.open("GET",r.ptzconfig.src+"model.json",!0),t.send(null)}},r.mouseMoveHandler=function(e){var t=e.clientX,a=e.clientY;r.beMouseDown||1!=e.buttons||(r.bezRot=r.ptzconfig.zRot,r.bexRot=r.ptzconfig.xRot,r.beMouseDown=!0,r.beX=t,r.beY=a),0==e.buttons&&(r.beMouseDown=!1),r.beMouseDown&&(r.ptzconfig.zRot=r.bezRot+(r.beX-t)/5,r.ptzconfig.xRot=r.bexRot+(r.beY-a)/5,0<r.ptzconfig.xRot&&(r.ptzconfig.xRot=0),r.ptzconfig.xRot<-65.2&&(r.ptzconfig.xRot=-65.2))},r.mouseWheelHandler=function(e){var t=(e=e||window.event).deltaY||e.detail||e.wheelDelta;r.ptzconfig.zZoom-=t/1e3,.6<r.ptzconfig.zZoom&&(r.ptzconfig.zZoom=.6),r.ptzconfig.zZoom<-.6&&(r.ptzconfig.zZoom=-.6),e.preventDefault()},r.createGLContext=function(){var e=document.createElement("div");e.style.top="90px",e.style.position="absolute",e.style.color="black",e.style.fontSize="12px",e.innerHTML='            <span style="background:rgba(255,255,255,.7);padding:0 5px">Vertical camera move</span><br/>               <input style="width:250px" id="zCamShift" type="range" min="-1" max="2" step=".01" value="'+r.ptzconfig.zCamShift+'" onchange="changepztconfig(this.value,\'zCamShift\')"><br/>            <span for="zZoom" style="background:rgba(255,255,255,.7);padding:0 5px">Zooming</span><br/>                    <input style="width:250px" id="zZoom" type="range" min="-5" max="2" step=".1" value="'+r.ptzconfig.zZoom+'" onchange="changepztconfig(this.value,\'zZoom\')"><br/>            <span for="xRot" style="background:rgba(255,255,255,.7);padding:0 5px">Down camera</span><br/>              <input style="width:250px" id="xRot" type="range" min="-120" max="0" step="5" value="'+r.ptzconfig.xRot+'" onchange="changepztconfig(this.value,\'xRot\')"><br/>            <span for="xScale" style="background:rgba(255,255,255,.7);padding:0 5px">Zoom texture by X</span><br/> <input style="width:250px" id="xScale" type="range" min="-2.5" max="2.5" step=".01" value="'+r.ptzconfig.xScale+'" onchange="changepztconfig(this.value,\'xScale\')"><br/>            <span for="yScale" style="background:rgba(255,255,255,.7);padding:0 5px">Zoom texture by Y</span><br/> <input style="width:250px" id="yScale" type="range" min="-2.5" max="2.5" step=".01" value="'+r.ptzconfig.yScale+'" onchange="changepztconfig(this.value,\'yScale\')"><br/>            <span for="xShift" style="background:rgba(255,255,255,.7);padding:0 5px">Shift texture by X</span><br/>        <input style="width:250px" id="xShift" type="range" min="-2.5" max="2.5" step=".01" value="'+r.ptzconfig.xShift+'" onchange="changepztconfig(this.value,\'xShift\')"><br/>            <span for="yShift" style="background:rgba(255,255,255,.7);padding:0 5px">Shift texture by Y</span><br/>        <input style="width:250px" id="yShift" type="range" min="-2.5" max="2.5" step=".01" value="'+r.ptzconfig.yShift+'" onchange="changepztconfig(this.value,\'yShift\')"><br/>            <span for="zLens" style="background:rgba(255,255,255,.7);padding:0 5px">lens convexity correction </span><br/>     <input style="width:250px" id="yShift" type="range" min="-2.5" max="2.5" step=".01" value="'+r.ptzconfig.zLens+'" onchange="changepztconfig(this.value,\'zLens\')"><br/>            <span for="xLens" style="background:rgba(255,255,255,.7);padding:0 5px">lens zoom correction by X</span><br/>     <input style="width:250px" id="xLens" type="range" min=".5" max="2" step=".01" value="'+r.ptzconfig.xLens+'" onchange="changepztconfig(this.value,\'xLens\')"><br/>            <button onclick="testplay()">Play test sample</button>&nbsp;<button onclick="testplay2()">Play second sample</button>        ',r.canvas=document.createElement("canvas"),r.canvas.style.width="100%",r.canvas.style.height="100%",r.canvas.style.display="none",r.container.parentElement.insertBefore(r.canvas,r.container),r.canvas.setAttribute("width",r.container.parentElement.offsetWidth),r.canvas.setAttribute("height",r.container.parentElement.offsetHeight),r.image=document.createElement("img"),r.image.style.opacity="0",r.image.style.width="100%",r.image.style.height="100%",r.image.style.position="absolute",r.image.style.zIndex="-5",r.image.style.display="block",r.container.parentElement.insertBefore(r.image,r.canvas),r.canvas.addEventListener("mousemove",r.mouseMoveHandler),r.canvas.addEventListener("wheel",r.mouseWheelHandler);for(var t,a=["webgl","experimental-webgl","webkit-3d","moz-webgl"],n=0;n<a.length;++n){try{t=r.canvas.getContext(a[n])}catch(e){continue}if(t)return t}throw new Error("WebGL is not supported!")},r.compileShader=function(t,e,a){var n=t.createShader(t.VERTEX_SHADER);t.shaderSource(n,e),t.compileShader(n),o(n);e=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(e,a),t.compileShader(e),o(e);a=t.createProgram();return t.attachShader(a,n),t.attachShader(a,e),t.linkProgram(a),a;function o(e){if(!t.getShaderParameter(e,t.COMPILE_STATUS))throw new Error(t.getShaderInfoLog(e))}},r.run=function(n){var o=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;if(!o)throw new Error("do not support 'requestAnimationFram'");o(function e(t){r=r||t;var a=t-r;r=t;n(a);o(e)});var r=null},r.ptz_enabled=!1,r.start=function(){r.load_model(),r.ptz_enabled=!0,r.canvas.style.display="block",r.container.style.visibility="hidden",r.container.style.position="fixed",r.container.style.top="0",r.container.style.height="1px",r.container.style.width="1px",r.container.style.zIndex="-1"},r.stop=function(){r.ptz_enabled=!1,r.canvas.style.display="none",r.container.style.visibility="",r.container.style.position="",r.container.style.top="",r.container.style.height="100%",r.container.style.width="100%",r.container.style.zIndex=""},r.model,r.gl=r.createGLContext();t=r.compileShader(r.gl,"        attribute vec3 aVertexPosition;\n        attribute vec2 aTextureCoord;\n        uniform mat4 uMVMatrix;\n        uniform mat4 uPMatrix;\n        uniform float fCamShift;\n        uniform float zLens;\n        varying vec2 vTextureCoord;\n        void main(void) {\n            gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition.x, aVertexPosition.y, aVertexPosition.z*zLens+fCamShift, 1.0);\n            vTextureCoord = aTextureCoord;\n        }","        precision mediump float;\n        varying vec2 vTextureCoord;\n        uniform sampler2D uSampler;\n        uniform vec4 uScale;\n        void main(void) {\n            gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x / uScale.x + uScale.z, vTextureCoord.y / uScale.y + uScale.w));\n        }");function l(e){return e*Math.PI/180}return r.gl.useProgram(t),r.aVertexPosition=r.gl.getAttribLocation(t,"aVertexPosition"),r.aTextureCoord=r.gl.getAttribLocation(t,"aTextureCoord"),r.uSampler=r.gl.getUniformLocation(t,"uSampler"),r.uScale=r.gl.getUniformLocation(t,"uScale"),r.pMatrixUniform=r.gl.getUniformLocation(t,"uPMatrix"),r.mvMatrixUniform=r.gl.getUniformLocation(t,"uMVMatrix"),r.fCamShift=r.gl.getUniformLocation(t,"fCamShift"),r.zLens=r.gl.getUniformLocation(t,"zLens"),r.texture=function(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);var a=e.RGBA,n=e.RGBA,o=e.UNSIGNED_BYTE,r=new Uint8Array([0,0,0,255]);return e.texImage2D(e.TEXTURE_2D,0,a,1,1,0,n,o,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameterf(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),t}(r.gl),r.mvMatrix=glMatrix.mat4.create(),r.pMatrix=glMatrix.mat4.create(),r.run(function(e){if(r.ptz_enabled&&r.textureBuffer&&r.indexBuffer){for(var t,a=r.container.querySelectorAll("video"),n=null,o=0;o<a.length;++o)if("none"!=getComputedStyle(a[o],null).display&&"none"!=getComputedStyle(a[o].parentElement,null).display){n=a[o];break}null==n&&(null===(n=r.container.getElementsByTagName("vxg-cloud-player")[0].getVideo())||null!=(t=n.getAttribute("poster"))&&(r.image.src=t)),r.canvas.setAttribute("width",r.container.parentElement.offsetWidth),r.canvas.setAttribute("height",r.container.parentElement.offsetHeight),null!=n&&(r.pano_player.isPlaying()?s(r.gl,r.texture,n):s(r.gl,r.texture,r.image),s(r.gl,r.texture,n),r.gl.clearColor(0,0,0,1),r.gl.enable(r.gl.DEPTH_TEST),r.gl.clear(r.gl.COLOR_BUFFER_BIT|r.gl.DEPTH_BUFFER_BIT),r.gl.viewport(0,0,r.canvas.width,r.canvas.height),glMatrix.mat4.perspective(r.pMatrix,45,r.canvas.width/r.canvas.height,.1,100),glMatrix.mat4.identity(r.mvMatrix),glMatrix.mat4.translate(r.mvMatrix,r.mvMatrix,[0,0,r.ptzconfig.zZoom]),glMatrix.mat4.rotate(r.mvMatrix,r.mvMatrix,l(r.ptzconfig.xRot),[1,0,0]),glMatrix.mat4.rotate(r.mvMatrix,r.mvMatrix,l(r.ptzconfig.zRot),[0,0,1]),r.gl.enableVertexAttribArray(r.aVertexPosition),r.gl.bindBuffer(r.gl.ARRAY_BUFFER,r.vertexBuffer),r.gl.vertexAttribPointer(r.aVertexPosition,3,r.gl.FLOAT,!1,0,0),r.gl.enableVertexAttribArray(r.aTextureCoord),r.gl.bindBuffer(r.gl.ARRAY_BUFFER,r.textureBuffer),r.gl.vertexAttribPointer(r.aTextureCoord,2,r.gl.FLOAT,!1,0,0),r.gl.activeTexture(r.gl.TEXTURE0),r.gl.bindTexture(r.gl.TEXTURE_2D,r.texture),r.gl.pixelStorei(r.gl.UNPACK_FLIP_Y_WEBGL,!0),r.gl.uniform1i(r.uSampler,0),r.gl.uniform4f(r.uScale,r.ptzconfig.xScale,r.ptzconfig.yScale,r.ptzconfig.xShift,r.ptzconfig.yShift),r.gl.bindBuffer(r.gl.ELEMENT_ARRAY_BUFFER,r.indexBuffer),r.gl.uniformMatrix4fv(r.pMatrixUniform,!1,r.pMatrix),r.gl.uniformMatrix4fv(r.mvMatrixUniform,!1,r.mvMatrix),r.gl.uniform1f(r.fCamShift,r.ptzconfig.zCamShift),r.gl.uniform1f(r.zLens,r.ptzconfig.zLens),r.gl.drawElements(r.gl.TRIANGLES,r.model.vertex.length/3,r.gl.UNSIGNED_SHORT,r.model.indices))}}),r},function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("rangeSlider",[],t):"object"==typeof exports?exports.rangeSlider=t():e.rangeSlider=t()}(window,function(){return n={},o.m=a=[function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uuid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},t.delay=function(e,t){for(var a=arguments.length,n=Array(2<a?a-2:0),o=2;o<a;o++)n[o-2]=arguments[o];return setTimeout(function(){return e.apply(null,n)},t)},t.debounce=function(n){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100;return function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return n.debouncing||(n.lastReturnVal=n.apply(window,t),n.debouncing=!0),clearTimeout(n.debounceTimeout),n.debounceTimeout=setTimeout(function(){n.debouncing=!1},o),n.lastReturnVal}};var n=t.isString=function(e){return e===""+e},r=(t.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},t.isNumberLike=function(e){return null!=e&&(n(e)&&isFinite(parseFloat(e))||isFinite(e))});t.getFirsNumberLike=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];if(!t.length)return null;for(var n=0,o=t.length;n<o;n++)if(r(t[n]))return t[n];return null},t.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},t.simpleExtend=function(e,t){var a,n,o={};for(a in e)o[a]=e[a];for(n in t)o[n]=t[n];return o},t.between=function(e,t,a){return e<t?t:a<e?a:e}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,a){return t&&o(e.prototype,t),a&&o(e,a),e},r=s(a(2)),i=s(a(0));function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}a(3);var l=new RegExp("/[\\n\\t]/","g"),c="rangeSlider",u=r.supportsRange(),d={polyfill:!0,root:document,rangeClass:"rangeSlider",disabledClass:"rangeSlider--disabled",fillClass:"rangeSlider__fill",bufferClass:"rangeSlider__buffer",handleClass:"rangeSlider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"],min:null,max:null,step:null,value:null,buffer:null,stick:null,borderRadius:10,vertical:!1},n=(n(m,[{key:"update",value:function(e,t){return t&&(this.needTriggerEvents=!0),i.isObject(e)&&(i.isNumberLike(e.min)&&(this.element.setAttribute("min",""+e.min),this.min=e.min),i.isNumberLike(e.max)&&(this.element.setAttribute("max",""+e.max),this.max=e.max),i.isNumberLike(e.step)&&(this.element.setAttribute("step",""+e.step),this.step=e.step,this.toFixed=this._toFixed(e.step)),i.isNumberLike(e.buffer)&&this._setBufferPosition(e.buffer),i.isNumberLike(e.value)&&this._setValue(e.value)),this._update(),this.onSlideEventsCount=0,this.needTriggerEvents=!1,this}},{key:"destroy",value:function(){r.removeAllListenersFromEl(this,this.options.root),window.removeEventListener("resize",this._handleResize,!1),this.element.removeEventListener("change",this._changeEventListener,!1),this.element.style.cssText="",delete this.element[c],this.range&&this.range.parentNode.removeChild(this.range)}},{key:"_toFixed",value:function(e){return(e+"").replace(".","").length-1}},{key:"_init",value:function(){this.onInit&&"function"==typeof this.onInit&&this.onInit(),this._update(!1)}},{key:"_updatePercentFromValue",value:function(){this.percent=(this.value-this.min)/(this.max-this.min)}},{key:"_startEventListener",value:function(e,t){var a=this,n=e.target,o=!1;(1===e.which||"touches"in e)&&(r.forEachAncestors(n,function(e){return o=e.id===a.identifier&&!r.hasClass(e,a.options.disabledClass)},!0),o&&this._handleDown(e,t))}},{key:"_changeEventListener",value:function(e,t){t&&t.origin===this.identifier||(e=e.target.value,e=this._getPositionFromValue(e),this._setPosition(e))}},{key:"_update",value:function(e){var t=this.vertical?"offsetHeight":"offsetWidth";this.handleSize=r.getDimension(this.handle,t),this.rangeSize=r.getDimension(this.range,t),this.maxHandleX=this.rangeSize-this.handleSize,this.grabX=this.handleSize/2,this.position=this._getPositionFromValue(this.value),this.element.disabled?r.addClass(this.range,this.options.disabledClass):r.removeClass(this.range,this.options.disabledClass),this._setPosition(this.position),this.options.bufferClass&&this.options.buffer&&this._setBufferPosition(this.options.buffer),this._updatePercentFromValue(),!1!==e&&r.triggerEvent(this.element,"change",{origin:this.identifier})}},{key:"_handleResize",value:function(){var e=this;return i.debounce(function(){i.delay(function(){e._update()},300)},50)()}},{key:"_handleDown",value:function(e){var t,a;this.isInteractsNow=!0,e.preventDefault(),r.addEventListeners(this.options.root,this.options.moveEvent,this._handleMove),r.addEventListeners(this.options.root,this.options.endEvent,this._handleEnd),-1<(" "+e.target.className+" ").replace(l," ").indexOf(this.options.handleClass)||(a=this.range.getBoundingClientRect(),t=this._getRelativePosition(e),e=this.vertical?a.bottom:a.left,a=this._getPositionFromNode(this.handle)-e,e=t-this.grabX,this._setPosition(e),a<=t&&t<a+2*this.options.borderRadius&&(this.grabX=t-a),this._updatePercentFromValue())}},{key:"_handleMove",value:function(e){var t=this._getRelativePosition(e);this.isInteractsNow=!0,e.preventDefault(),this._setPosition(t-this.grabX)}},{key:"_handleEnd",value:function(e){e.preventDefault(),r.removeEventListeners(this.options.root,this.options.moveEvent,this._handleMove),r.removeEventListeners(this.options.root,this.options.endEvent,this._handleEnd),r.triggerEvent(this.element,"change",{origin:this.identifier}),(this.isInteractsNow||this.needTriggerEvents)&&this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.value,this.percent,this.position),this.onSlideEventsCount=0,this.isInteractsNow=!1}},{key:"_setPosition",value:function(e){var t,a,n,e=this._getValueFromPosition(i.between(e,0,this.maxHandleX));this.stick&&((a=e%(n=this.stick[0]))<(t=this.stick[1]||.1)?e-=a:Math.abs(n-a)<t&&(e=e-a+n)),n=this._getPositionFromValue(e),this.vertical?(this.container.style.height=n+this.grabX+"px",this.handle.style.webkitTransform="translateY(-"+n+"px)",this.handle.style.msTransform="translateY(-"+n+"px)",this.handle.style.transform="translateY(-"+n+"px)"):(this.container.style.width=n+this.grabX+"px",this.handle.style.webkitTransform="translateX("+n+"px)",this.handle.style.msTransform="translateX("+n+"px)",this.handle.style.transform="translateX("+n+"px)"),this._setValue(e),this.position=n,this.value=e,this._updatePercentFromValue(),(this.isInteractsNow||this.needTriggerEvents)&&(this.onSlideStart&&"function"==typeof this.onSlideStart&&0===this.onSlideEventsCount&&this.onSlideStart(this.value,this.percent,this.position),this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(this.value,this.percent,this.position)),this.onSlideEventsCount++}},{key:"_setBufferPosition",value:function(e){var t,a=!0;if(isFinite(e))e=parseFloat(e);else{if(!i.isString(e))return void console.warn("New position must be XXpx or XX%");0<e.indexOf("px")&&(a=!1),e=parseFloat(e)}isNaN(e)?console.warn("New position is NaN"):this.options.bufferClass?(t=a?e:e/this.rangeSize*100,this.options.buffer=t=100<(t=t<0?0:t)?100:t,(e=t-(a=this.options.borderRadius/this.rangeSize*100))<0&&(e=0),this.vertical?(this.buffer.style.height=e+"%",this.buffer.style.bottom=.5*a+"%"):(this.buffer.style.width=e+"%",this.buffer.style.left=.5*a+"%"),this.element.setAttribute("data-buffer",t)):console.warn("You disabled buffer, it's className is empty")}},{key:"_getPositionFromNode",value:function(e){for(var t=this.vertical?this.maxHandleX:0;null!==e;)t+=this.vertical?e.offsetTop:e.offsetLeft,e=e.offsetParent;return t}},{key:"_getRelativePosition",value:function(e){var t=this.range.getBoundingClientRect(),a=this.vertical?t.bottom:t.left,n=0,t=this.vertical?"pageY":"pageX";return void 0!==e[t]?n=(e.touches&&e.touches.length?e.touches[0]:e)[t]:void 0!==e.originalEvent?void 0!==e.originalEvent[t]?n=e.originalEvent[t]:e.originalEvent.touches&&e.originalEvent.touches[0]&&void 0!==e.originalEvent.touches[0][t]&&(n=e.originalEvent.touches[0][t]):e.touches&&e.touches[0]&&void 0!==e.touches[0][t]?n=e.touches[0][t]:!e.currentPoint||void 0===e.currentPoint.x&&void 0===e.currentPoint.y||(n=this.vertical?e.currentPoint.y:e.currentPoint.x),this.vertical&&(n-=window.pageYOffset),this.vertical?a-n:n-a}},{key:"_getPositionFromValue",value:function(e){e=(e-this.min)/(this.max-this.min)*this.maxHandleX;return isNaN(e)?0:e}},{key:"_getValueFromPosition",value:function(e){e/=this.maxHandleX||1,e=this.step*Math.round(e*(this.max-this.min)/this.step)+this.min;return Number(e.toFixed(this.toFixed))}},{key:"_setValue",value:function(e,t){e===this.value&&!t||(this.element.value=e,this.value=e,r.triggerEvent(this.element,"input",{origin:this.identifier}))}}],[{key:"create",value:function(e,a){function t(e){var t=e[c];t||(t=new m(e,a),e[c]=t)}e.length?Array.prototype.slice.call(e).forEach(function(e){t(e)}):t(e)}}]),m);function m(e,t){!function(e){if(!(e instanceof m))throw new TypeError("Cannot call a class as a function")}(this);var a=void 0,n=void 0,o=void 0;this.element=e,this.options=i.simpleExtend(d,t),this.polyfill=this.options.polyfill,this.vertical=this.options.vertical,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideStart=this.options.onSlideStart,this.onSlideEnd=this.options.onSlideEnd,this.onSlideEventsCount=-1,this.isInteractsNow=!1,this.needTriggerEvents=!1,!this.polyfill&&u||(this.options.buffer=this.options.buffer||parseFloat(this.element.getAttribute("data-buffer")),this.identifier="js-"+c+"-"+i.uuid(),this.min=i.getFirsNumberLike(this.options.min,parseFloat(this.element.getAttribute("min")),0),this.max=i.getFirsNumberLike(this.options.max,parseFloat(this.element.getAttribute("max")),100),this.value=i.getFirsNumberLike(this.options.value,this.element.value,parseFloat(this.element.value||this.min+(this.max-this.min)/2)),this.step=i.getFirsNumberLike(this.options.step,parseFloat(this.element.getAttribute("step"))||(a=1)),this.percent=null,i.isArray(this.options.stick)&&1<=this.options.stick.length?this.stick=this.options.stick:(n=this.element.getAttribute("stick"))&&1<=(o=n.split(" ")).length&&(this.stick=o.map(parseFloat)),this.stick&&1===this.stick.length&&this.stick.push(1.5*this.step),this._updatePercentFromValue(),this.toFixed=this._toFixed(this.step),o=void 0,this.container=document.createElement("div"),r.addClass(this.container,this.options.fillClass),o=this.vertical?this.options.fillClass+"__vertical":this.options.fillClass+"__horizontal",r.addClass(this.container,o),this.handle=document.createElement("div"),r.addClass(this.handle,this.options.handleClass),o=this.vertical?this.options.handleClass+"__vertical":this.options.handleClass+"__horizontal",r.addClass(this.handle,o),this.range=document.createElement("div"),r.addClass(this.range,this.options.rangeClass),this.range.id=this.identifier,(e=e.getAttribute("title"))&&0<e.length&&this.range.setAttribute("title",e),this.options.bufferClass&&(this.buffer=document.createElement("div"),r.addClass(this.buffer,this.options.bufferClass),this.range.appendChild(this.buffer),o=this.vertical?this.options.bufferClass+"__vertical":this.options.bufferClass+"__horizontal",r.addClass(this.buffer,o)),this.range.appendChild(this.container),this.range.appendChild(this.handle),o=this.vertical?this.options.rangeClass+"__vertical":this.options.rangeClass+"__horizontal",r.addClass(this.range,o),i.isNumberLike(this.options.value)&&(this._setValue(this.options.value,!0),this.element.value=this.options.value),i.isNumberLike(this.options.buffer)&&this.element.setAttribute("data-buffer",this.options.buffer),i.isNumberLike(this.options.min)&&this.element.setAttribute("min",""+this.min),i.isNumberLike(this.options.max),this.element.setAttribute("max",""+this.max),(i.isNumberLike(this.options.step)||a)&&this.element.setAttribute("step",""+this.step),r.insertAfter(this.element,this.range),r.setCss(this.element,{position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this._handleDown=this._handleDown.bind(this),this._handleMove=this._handleMove.bind(this),this._handleEnd=this._handleEnd.bind(this),this._startEventListener=this._startEventListener.bind(this),this._changeEventListener=this._changeEventListener.bind(this),this._handleResize=this._handleResize.bind(this),this._init(),window.addEventListener("resize",this._handleResize,!1),r.addEventListeners(this.options.root,this.options.startEvent,this._startEventListener),this.element.addEventListener("change",this._changeEventListener,!1))}(t.default=n).version="0.4.10",n.dom=r,n.functions=i,e.exports=t.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.supportsRange=t.removeAllListenersFromEl=t.removeEventListeners=t.addEventListeners=t.insertAfter=t.triggerEvent=t.forEachAncestors=t.removeClass=t.addClass=t.hasClass=t.setCss=t.getDimension=t.getHiddenParentNodes=t.isHidden=t.detectIE=void 0;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(0)),r="eventListenerList",a=(t.detectIE=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<e.indexOf("Trident/")){var a=e.indexOf("rv:");return parseInt(e.substring(a+3,e.indexOf(".",a)),10)}a=e.indexOf("Edge/");return 0<a&&parseInt(e.substring(a+5,e.indexOf(".",a)),10)})(),n=!(!window.PointerEvent||a)&&{passive:!1},i=t.isHidden=function(e){return 0===e.offsetWidth||0===e.offsetHeight||!1===e.open},c=t.getHiddenParentNodes=function(e){for(var t=[],a=e.parentNode;a&&i(a);)t.push(a),a=a.parentNode;return t},s=(t.getDimension=function(e,t){function a(e){void 0!==e.open&&(e.open=!e.open)}var n=c(e),o=n.length,r=[],i=e[t];if(o){for(var s=0;s<o;s++)r.push({display:n[s].style.display,height:n[s].style.height,overflow:n[s].style.overflow,visibility:n[s].style.visibility}),n[s].style.display="block",n[s].style.height="0",n[s].style.overflow="hidden",n[s].style.visibility="hidden",a(n[s]);for(var i=e[t],l=0;l<o;l++)a(n[l]),n[l].style.display=r[l].display,n[l].style.height=r[l].height,n[l].style.overflow=r[l].overflow,n[l].style.visibility=r[l].visibility}return i},t.setCss=function(e,t){for(var a in t)e.style[a]=t[a];return e.style},t.hasClass=function(e,t){return new RegExp(" "+t+" ").test(" "+e.className+" ")});t.addClass=function(e,t){s(e,t)||(e.className+=" "+t)},t.removeClass=function(e,t){var a=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(s(e,t)){for(;0<=a.indexOf(" "+t+" ");)a=a.replace(" "+t+" "," ");e.className=a.replace(/^\s+|\s+$/g,"")}},t.forEachAncestors=function(e,t,a){for(a&&t(e);e.parentNode&&!t(e);)e=e.parentNode;return e},t.triggerEvent=function(e,t,a){if(!o.isString(t))throw new TypeError("event name must be String");if(!(e instanceof HTMLElement))throw new TypeError("element must be HTMLElement");t=t.trim();var n=document.createEvent("CustomEvent");n.initCustomEvent(t,!1,!1,a),e.dispatchEvent(n)},t.insertAfter=function(e,t){return e.parentNode.insertBefore(t,e.nextSibling)},t.addEventListeners=function(t,e,a){e.forEach(function(e){t[r]||(t[r]={}),t[r][e]||(t[r][e]=[]),t.addEventListener(e,a,n),t[r][e].indexOf(a)<0&&t[r][e].push(a)})},t.removeEventListeners=function(a,e,n){e.forEach(function(e){var t=void 0;a.removeEventListener(e,n,!1),a[r]&&a[r][e]&&-1<(t=a[r][e].indexOf(n))&&a[r][e].splice(t,1)})},t.removeAllListenersFromEl=function(t,e){if(e[r]){for(var a in e[r])e[r][a].forEach(n,{eventName:a,el:e});e[r]={}}function n(e){e===t._startEventListener&&this.el.removeEventListener(this.eventName,e,!1)}},t.supportsRange=function(){var e=document.createElement("input");return e.setAttribute("type","range"),"text"!==e.type}},function(e,t,a){}],o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1);function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var a,n}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).glMatrix={})}(this,function(e){"use strict";var v="undefined"!=typeof Float32Array?Float32Array:Array,c=Math.random,t=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var a=Object.freeze({__proto__:null,EPSILON:1e-6,get ARRAY_TYPE(){return v},RANDOM:c,setMatrixArrayType:function(e){v=e},toRadian:function(e){return e*t},equals:function(e,t){return Math.abs(e-t)<=1e-6*Math.max(1,Math.abs(e),Math.abs(t))}});function n(e,t,a){var n=t[0],o=t[1],r=t[2],i=t[3],s=a[0],l=a[1],t=a[2],a=a[3];return e[0]=n*s+r*l,e[1]=o*s+i*l,e[2]=n*t+r*a,e[3]=o*t+i*a,e}function o(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e}var r=Object.freeze({__proto__:null,create:function(){var e=new v(4);return v!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},clone:function(e){var t=new v(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},fromValues:function(e,t,a,n){var o=new v(4);return o[0]=e,o[1]=t,o[2]=a,o[3]=n,o},set:function(e,t,a,n,o){return e[0]=t,e[1]=a,e[2]=n,e[3]=o,e},transpose:function(e,t){var a;return e===t?(a=t[1],e[1]=t[2],e[2]=a):(e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3]),e},invert:function(e,t){var a=t[0],n=t[1],o=t[2],r=t[3],t=a*r-o*n;return t?(e[0]=r*(t=1/t),e[1]=-n*t,e[2]=-o*t,e[3]=a*t,e):null},adjoint:function(e,t){var a=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=a,e},determinant:function(e){return e[0]*e[3]-e[2]*e[1]},multiply:n,rotate:function(e,t,a){var n=t[0],o=t[1],r=t[2],i=t[3],t=Math.sin(a),a=Math.cos(a);return e[0]=n*a+r*t,e[1]=o*a+i*t,e[2]=n*-t+r*a,e[3]=o*-t+i*a,e},scale:function(e,t,a){var n=t[0],o=t[1],r=t[2],i=t[3],t=a[0],a=a[1];return e[0]=n*t,e[1]=o*t,e[2]=r*a,e[3]=i*a,e},fromRotation:function(e,t){var a=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=a,e[2]=-a,e[3]=t,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},str:function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},frob:function(e){return Math.hypot(e[0],e[1],e[2],e[3])},LDU:function(e,t,a,n){return e[2]=n[2]/n[0],a[0]=n[0],a[1]=n[1],a[3]=n[3]-e[2]*a[1],[e,t,a]},add:function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e},subtract:o,exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},equals:function(e,t){var a=e[0],n=e[1],o=e[2],r=e[3],i=t[0],s=t[1],e=t[2],t=t[3];return Math.abs(a-i)<=1e-6*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(n-s)<=1e-6*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-e)<=1e-6*Math.max(1,Math.abs(o),Math.abs(e))&&Math.abs(r-t)<=1e-6*Math.max(1,Math.abs(r),Math.abs(t))},multiplyScalar:function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e},multiplyScalarAndAdd:function(e,t,a,n){return e[0]=t[0]+a[0]*n,e[1]=t[1]+a[1]*n,e[2]=t[2]+a[2]*n,e[3]=t[3]+a[3]*n,e},mul:n,sub:o});function i(e,t,a){var n=t[0],o=t[1],r=t[2],i=t[3],s=t[4],l=t[5],c=a[0],u=a[1],d=a[2],m=a[3],t=a[4],a=a[5];return e[0]=n*c+r*u,e[1]=o*c+i*u,e[2]=n*d+r*m,e[3]=o*d+i*m,e[4]=n*t+r*a+s,e[5]=o*t+i*a+l,e}function s(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e[4]=t[4]-a[4],e[5]=t[5]-a[5],e}var l=Object.freeze({__proto__:null,create:function(){var e=new v(6);return v!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e},clone:function(e){var t=new v(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},fromValues:function(e,t,a,n,o,r){var i=new v(6);return i[0]=e,i[1]=t,i[2]=a,i[3]=n,i[4]=o,i[5]=r,i},set:function(e,t,a,n,o,r,i){return e[0]=t,e[1]=a,e[2]=n,e[3]=o,e[4]=r,e[5]=i,e},invert:function(e,t){var a=t[0],n=t[1],o=t[2],r=t[3],i=t[4],s=t[5],t=a*r-n*o;return t?(e[0]=r*(t=1/t),e[1]=-n*t,e[2]=-o*t,e[3]=a*t,e[4]=(o*s-r*i)*t,e[5]=(n*i-a*s)*t,e):null},determinant:function(e){return e[0]*e[3]-e[1]*e[2]},multiply:i,rotate:function(e,t,a){var n=t[0],o=t[1],r=t[2],i=t[3],s=t[4],l=t[5],t=Math.sin(a),a=Math.cos(a);return e[0]=n*a+r*t,e[1]=o*a+i*t,e[2]=n*-t+r*a,e[3]=o*-t+i*a,e[4]=s,e[5]=l,e},scale:function(e,t,a){var n=t[0],o=t[1],r=t[2],i=t[3],s=t[4],l=t[5],t=a[0],a=a[1];return e[0]=n*t,e[1]=o*t,e[2]=r*a,e[3]=i*a,e[4]=s,e[5]=l,e},translate:function(e,t,a){var n=t[0],o=t[1],r=t[2],i=t[3],s=t[4],l=t[5],t=a[0],a=a[1];return e[0]=n,e[1]=o,e[2]=r,e[3]=i,e[4]=n*t+r*a+s,e[5]=o*t+i*a+l,e},fromRotation:function(e,t){var a=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=a,e[2]=-a,e[3]=t,e[4]=0,e[5]=0,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},str:function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},frob:function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],1)},add:function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e},subtract:s,multiplyScalar:function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e},multiplyScalarAndAdd:function(e,t,a,n){return e[0]=t[0]+a[0]*n,e[1]=t[1]+a[1]*n,e[2]=t[2]+a[2]*n,e[3]=t[3]+a[3]*n,e[4]=t[4]+a[4]*n,e[5]=t[5]+a[5]*n,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},equals:function(e,t){var a=e[0],n=e[1],o=e[2],r=e[3],i=e[4],s=e[5],l=t[0],c=t[1],u=t[2],d=t[3],e=t[4],t=t[5];return Math.abs(a-l)<=1e-6*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(n-c)<=1e-6*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(o-u)<=1e-6*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(r-d)<=1e-6*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-e)<=1e-6*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(s-t)<=1e-6*Math.max(1,Math.abs(s),Math.abs(t))},mul:i,sub:s});function u(){var e=new v(9);return v!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function d(e,t,a){var n=t[0],o=t[1],r=t[2],i=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],m=a[0],p=a[1],f=a[2],h=a[3],g=a[4],v=a[5],y=a[6],t=a[7],a=a[8];return e[0]=m*n+p*i+f*c,e[1]=m*o+p*s+f*u,e[2]=m*r+p*l+f*d,e[3]=h*n+g*i+v*c,e[4]=h*o+g*s+v*u,e[5]=h*r+g*l+v*d,e[6]=y*n+t*i+a*c,e[7]=y*o+t*s+a*u,e[8]=y*r+t*l+a*d,e}function m(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e[4]=t[4]-a[4],e[5]=t[5]-a[5],e[6]=t[6]-a[6],e[7]=t[7]-a[7],e[8]=t[8]-a[8],e}var p=Object.freeze({__proto__:null,create:u,fromMat4:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},clone:function(e){var t=new v(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},fromValues:function(e,t,a,n,o,r,i,s,l){var c=new v(9);return c[0]=e,c[1]=t,c[2]=a,c[3]=n,c[4]=o,c[5]=r,c[6]=i,c[7]=s,c[8]=l,c},set:function(e,t,a,n,o,r,i,s,l,c){return e[0]=t,e[1]=a,e[2]=n,e[3]=o,e[4]=r,e[5]=i,e[6]=s,e[7]=l,e[8]=c,e},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},transpose:function(e,t){var a,n,o;return e===t?(a=t[1],n=t[2],o=t[5],e[1]=t[3],e[2]=t[6],e[3]=a,e[5]=t[7],e[6]=n,e[7]=o):(e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8]),e},invert:function(e,t){var a=t[0],n=t[1],o=t[2],r=t[3],i=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=u*i-s*c,m=-u*r+s*l,p=c*r-i*l,t=a*d+n*m+o*p;return t?(e[0]=d*(t=1/t),e[1]=(-u*n+o*c)*t,e[2]=(s*n-o*i)*t,e[3]=m*t,e[4]=(u*a-o*l)*t,e[5]=(-s*a+o*r)*t,e[6]=p*t,e[7]=(-c*a+n*l)*t,e[8]=(i*a-n*r)*t,e):null},adjoint:function(e,t){var a=t[0],n=t[1],o=t[2],r=t[3],i=t[4],s=t[5],l=t[6],c=t[7],t=t[8];return e[0]=i*t-s*c,e[1]=o*c-n*t,e[2]=n*s-o*i,e[3]=s*l-r*t,e[4]=a*t-o*l,e[5]=o*r-a*s,e[6]=r*c-i*l,e[7]=n*l-a*c,e[8]=a*i-n*r,e},determinant:function(e){var t=e[0],a=e[1],n=e[2],o=e[3],r=e[4],i=e[5],s=e[6],l=e[7],e=e[8];return t*(e*r-i*l)+a*(-e*o+i*s)+n*(l*o-r*s)},multiply:d,translate:function(e,t,a){var n=t[0],o=t[1],r=t[2],i=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],t=a[0],a=a[1];return e[0]=n,e[1]=o,e[2]=r,e[3]=i,e[4]=s,e[5]=l,e[6]=t*n+a*i+c,e[7]=t*o+a*s+u,e[8]=t*r+a*l+d,e},rotate:function(e,t,a){var n=t[0],o=t[1],r=t[2],i=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],t=Math.sin(a),a=Math.cos(a);return e[0]=a*n+t*i,e[1]=a*o+t*s,e[2]=a*r+t*l,e[3]=a*i-t*n,e[4]=a*s-t*o,e[5]=a*l-t*r,e[6]=c,e[7]=u,e[8]=d,e},scale:function(e,t,a){var n=a[0],a=a[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},fromRotation:function(e,t){var a=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=a,e[2]=0,e[3]=-a,e[4]=t,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},fromMat2d:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},fromQuat:function(e,t){var a=t[0],n=t[1],o=t[2],r=t[3],i=a+a,s=n+n,l=o+o,c=a*i,u=n*i,t=n*s,a=o*i,n=o*s,o=o*l,i=r*i,s=r*s,l=r*l;return e[0]=1-t-o,e[3]=u-l,e[6]=a+s,e[1]=u+l,e[4]=1-c-o,e[7]=n-i,e[2]=a-s,e[5]=n+i,e[8]=1-c-t,e},normalFromMat4:function(e,t){var a=t[0],n=t[1],o=t[2],r=t[3],i=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],m=t[10],p=t[11],f=t[12],h=t[13],g=t[14],v=t[15],y=a*s-n*i,C=a*l-o*i,_=a*c-r*i,A=n*l-o*s,E=n*c-r*s,P=o*c-r*l,b=u*h-d*f,T=u*g-m*f,t=u*v-p*f,u=d*g-m*h,d=d*v-p*h,m=m*v-p*g,p=y*m-C*d+_*u+A*t-E*T+P*b;return p?(e[0]=(s*m-l*d+c*u)*(p=1/p),e[1]=(l*t-i*m-c*T)*p,e[2]=(i*d-s*t+c*b)*p,e[3]=(o*d-n*m-r*u)*p,e[4]=(a*m-o*t+r*T)*p,e[5]=(n*t-a*d-r*b)*p,e[6]=(h*P-g*E+v*A)*p,e[7]=(g*_-f*P-v*C)*p,e[8]=(f*E-h*_+v*y)*p,e):null},projection:function(e,t,a){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/a,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e},str:function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},frob:function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},add:function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e[6]=t[6]+a[6],e[7]=t[7]+a[7],e[8]=t[8]+a[8],e},subtract:m,multiplyScalar:function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*a,e},multiplyScalarAndAdd:function(e,t,a,n){return e[0]=t[0]+a[0]*n,e[1]=t[1]+a[1]*n,e[2]=t[2]+a[2]*n,e[3]=t[3]+a[3]*n,e[4]=t[4]+a[4]*n,e[5]=t[5]+a[5]*n,e[6]=t[6]+a[6]*n,e[7]=t[7]+a[7]*n,e[8]=t[8]+a[8]*n,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},equals:function(e,t){var a=e[0],n=e[1],o=e[2],r=e[3],i=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=t[0],m=t[1],p=t[2],f=t[3],h=t[4],g=t[5],v=t[6],e=t[7],t=t[8];return Math.abs(a-d)<=1e-6*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(n-m)<=1e-6*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(o-p)<=1e-6*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(r-f)<=1e-6*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(i-h)<=1e-6*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-g)<=1e-6*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-v)<=1e-6*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(c-e)<=1e-6*Math.max(1,Math.abs(c),Math.abs(e))&&Math.abs(u-t)<=1e-6*Math.max(1,Math.abs(u),Math.abs(t))},mul:d,sub:m});function f(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function h(e,t,a){var n=t[0],o=t[1],r=t[2],i=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],m=t[9],p=t[10],f=t[11],h=t[12],g=t[13],v=t[14],y=t[15],C=a[0],_=a[1],A=a[2],t=a[3];return e[0]=C*n+_*s+A*d+t*h,e[1]=C*o+_*l+A*m+t*g,e[2]=C*r+_*c+A*p+t*v,e[3]=C*i+_*u+A*f+t*y,C=a[4],_=a[5],A=a[6],t=a[7],e[4]=C*n+_*s+A*d+t*h,e[5]=C*o+_*l+A*m+t*g,e[6]=C*r+_*c+A*p+t*v,e[7]=C*i+_*u+A*f+t*y,C=a[8],_=a[9],A=a[10],t=a[11],e[8]=C*n+_*s+A*d+t*h,e[9]=C*o+_*l+A*m+t*g,e[10]=C*r+_*c+A*p+t*v,e[11]=C*i+_*u+A*f+t*y,C=a[12],_=a[13],A=a[14],t=a[15],e[12]=C*n+_*s+A*d+t*h,e[13]=C*o+_*l+A*m+t*g,e[14]=C*r+_*c+A*p+t*v,e[15]=C*i+_*u+A*f+t*y,e}function g(e,t,a){var n=t[0],o=t[1],r=t[2],i=t[3],s=n+n,l=o+o,c=r+r,u=n*s,d=n*l,t=n*c,n=o*l,o=o*c,r=r*c,s=i*s,l=i*l,c=i*c;return e[0]=1-(n+r),e[1]=d+c,e[2]=t-l,e[3]=0,e[4]=d-c,e[5]=1-(u+r),e[6]=o+s,e[7]=0,e[8]=t+l,e[9]=o-s,e[10]=1-(u+n),e[11]=0,e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=1,e}function y(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function C(e,t){var a=t[0],n=t[1],o=t[2],r=t[4],i=t[5],s=t[6],l=t[8],c=t[9],t=t[10];return e[0]=Math.hypot(a,n,o),e[1]=Math.hypot(r,i,s),e[2]=Math.hypot(l,c,t),e}function _(e,t){var a=new v(3);C(a,t);var n=1/a[0],o=1/a[1],r=1/a[2],i=t[0]*n,s=t[1]*o,l=t[2]*r,c=t[4]*n,u=t[5]*o,d=t[6]*r,a=t[8]*n,n=t[9]*o,o=t[10]*r,t=i+u+o,r=0;return 0<t?(r=2*Math.sqrt(1+t),e[3]=.25*r,e[0]=(d-n)/r,e[1]=(a-l)/r,e[2]=(s-c)/r):u<i&&o<i?(r=2*Math.sqrt(1+i-u-o),e[3]=(d-n)/r,e[0]=.25*r,e[1]=(s+c)/r,e[2]=(a+l)/r):o<u?(r=2*Math.sqrt(1+u-i-o),e[3]=(a-l)/r,e[0]=(s+c)/r,e[1]=.25*r,e[2]=(d+n)/r):(r=2*Math.sqrt(1+o-i-u),e[3]=(s-c)/r,e[0]=(a+l)/r,e[1]=(d+n)/r,e[2]=.25*r),e}function A(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e[4]=t[4]-a[4],e[5]=t[5]-a[5],e[6]=t[6]-a[6],e[7]=t[7]-a[7],e[8]=t[8]-a[8],e[9]=t[9]-a[9],e[10]=t[10]-a[10],e[11]=t[11]-a[11],e[12]=t[12]-a[12],e[13]=t[13]-a[13],e[14]=t[14]-a[14],e[15]=t[15]-a[15],e}var E=Object.freeze({__proto__:null,create:function(){var e=new v(16);return v!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},clone:function(e){var t=new v(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},fromValues:function(e,t,a,n,o,r,i,s,l,c,u,d,m,p,f,h){var g=new v(16);return g[0]=e,g[1]=t,g[2]=a,g[3]=n,g[4]=o,g[5]=r,g[6]=i,g[7]=s,g[8]=l,g[9]=c,g[10]=u,g[11]=d,g[12]=m,g[13]=p,g[14]=f,g[15]=h,g},set:function(e,t,a,n,o,r,i,s,l,c,u,d,m,p,f,h,g){return e[0]=t,e[1]=a,e[2]=n,e[3]=o,e[4]=r,e[5]=i,e[6]=s,e[7]=l,e[8]=c,e[9]=u,e[10]=d,e[11]=m,e[12]=p,e[13]=f,e[14]=h,e[15]=g,e},identity:f,transpose:function(e,t){var a,n,o,r,i,s;return e===t?(a=t[1],n=t[2],o=t[3],r=t[6],i=t[7],s=t[11],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=a,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=r,e[11]=t[14],e[12]=o,e[13]=i,e[14]=s):(e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15]),e},invert:function(e,t){var a=t[0],n=t[1],o=t[2],r=t[3],i=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],m=t[10],p=t[11],f=t[12],h=t[13],g=t[14],v=t[15],y=a*s-n*i,C=a*l-o*i,_=a*c-r*i,A=n*l-o*s,E=n*c-r*s,P=o*c-r*l,b=u*h-d*f,T=u*g-m*f,w=u*v-p*f,S=d*g-m*h,M=d*v-p*h,I=m*v-p*g,t=y*I-C*M+_*S+A*w-E*T+P*b;return t?(e[0]=(s*I-l*M+c*S)*(t=1/t),e[1]=(o*M-n*I-r*S)*t,e[2]=(h*P-g*E+v*A)*t,e[3]=(m*E-d*P-p*A)*t,e[4]=(l*w-i*I-c*T)*t,e[5]=(a*I-o*w+r*T)*t,e[6]=(g*_-f*P-v*C)*t,e[7]=(u*P-m*_+p*C)*t,e[8]=(i*M-s*w+c*b)*t,e[9]=(n*w-a*M-r*b)*t,e[10]=(f*E-h*_+v*y)*t,e[11]=(d*_-u*E-p*y)*t,e[12]=(s*T-i*S-l*b)*t,e[13]=(a*S-n*T+o*b)*t,e[14]=(h*C-f*A-g*y)*t,e[15]=(u*A-d*C+m*y)*t,e):null},adjoint:function(e,t){var a=t[0],n=t[1],o=t[2],r=t[3],i=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],m=t[10],p=t[11],f=t[12],h=t[13],g=t[14],t=t[15];return e[0]=s*(m*t-p*g)-d*(l*t-c*g)+h*(l*p-c*m),e[1]=-(n*(m*t-p*g)-d*(o*t-r*g)+h*(o*p-r*m)),e[2]=n*(l*t-c*g)-s*(o*t-r*g)+h*(o*c-r*l),e[3]=-(n*(l*p-c*m)-s*(o*p-r*m)+d*(o*c-r*l)),e[4]=-(i*(m*t-p*g)-u*(l*t-c*g)+f*(l*p-c*m)),e[5]=a*(m*t-p*g)-u*(o*t-r*g)+f*(o*p-r*m),e[6]=-(a*(l*t-c*g)-i*(o*t-r*g)+f*(o*c-r*l)),e[7]=a*(l*p-c*m)-i*(o*p-r*m)+u*(o*c-r*l),e[8]=i*(d*t-p*h)-u*(s*t-c*h)+f*(s*p-c*d),e[9]=-(a*(d*t-p*h)-u*(n*t-r*h)+f*(n*p-r*d)),e[10]=a*(s*t-c*h)-i*(n*t-r*h)+f*(n*c-r*s),e[11]=-(a*(s*p-c*d)-i*(n*p-r*d)+u*(n*c-r*s)),e[12]=-(i*(d*g-m*h)-u*(s*g-l*h)+f*(s*m-l*d)),e[13]=a*(d*g-m*h)-u*(n*g-o*h)+f*(n*m-o*d),e[14]=-(a*(s*g-l*h)-i*(n*g-o*h)+f*(n*l-o*s)),e[15]=a*(s*m-l*d)-i*(n*m-o*d)+u*(n*l-o*s),e},determinant:function(e){var t=e[0],a=e[1],n=e[2],o=e[3],r=e[4],i=e[5],s=e[6],l=e[7],c=e[8],u=e[9],d=e[10],m=e[11],p=e[12],f=e[13],h=e[14],e=e[15];return(t*i-a*r)*(d*e-m*h)-(t*s-n*r)*(u*e-m*f)+(t*l-o*r)*(u*h-d*f)+(a*s-n*i)*(c*e-m*p)-(a*l-o*i)*(c*h-d*p)+(n*l-o*s)*(c*f-u*p)},multiply:h,translate:function(e,t,a){var n,o,r,i,s,l,c,u,d,m,p,f=a[0],h=a[1],g=a[2];return t===e?(e[12]=t[0]*f+t[4]*h+t[8]*g+t[12],e[13]=t[1]*f+t[5]*h+t[9]*g+t[13],e[14]=t[2]*f+t[6]*h+t[10]*g+t[14],e[15]=t[3]*f+t[7]*h+t[11]*g+t[15]):(n=t[0],o=t[1],r=t[2],i=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],m=t[9],p=t[10],a=t[11],e[0]=n,e[1]=o,e[2]=r,e[3]=i,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=m,e[10]=p,e[11]=a,e[12]=n*f+s*h+d*g+t[12],e[13]=o*f+l*h+m*g+t[13],e[14]=r*f+c*h+p*g+t[14],e[15]=i*f+u*h+a*g+t[15]),e},scale:function(e,t,a){var n=a[0],o=a[1],a=a[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},rotate:function(e,t,a,n){var o,r,i,s,l,c,u,d,m,p,f,h,g,v,y,C,_,A,E,P=n[0],b=n[1],T=n[2],w=Math.hypot(P,b,T);return w<1e-6?null:(P*=w=1/w,b*=w,T*=w,y=Math.sin(a),o=1-(v=Math.cos(a)),r=t[0],i=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],m=t[7],p=t[8],f=t[9],h=t[10],g=t[11],C=P*b*o-T*y,_=b*b*o+v,A=T*b*o+P*y,E=P*T*o+b*y,n=b*T*o-P*y,w=T*T*o+v,e[0]=r*(a=P*P*o+v)+c*(v=b*P*o+T*y)+p*(y=T*P*o-b*y),e[1]=i*a+u*v+f*y,e[2]=s*a+d*v+h*y,e[3]=l*a+m*v+g*y,e[4]=r*C+c*_+p*A,e[5]=i*C+u*_+f*A,e[6]=s*C+d*_+h*A,e[7]=l*C+m*_+g*A,e[8]=r*E+c*n+p*w,e[9]=i*E+u*n+f*w,e[10]=s*E+d*n+h*w,e[11]=l*E+m*n+g*w,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},rotateX:function(e,t,a){var n=Math.sin(a),o=Math.cos(a),r=t[4],i=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],a=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=r*o+c*n,e[5]=i*o+u*n,e[6]=s*o+d*n,e[7]=l*o+a*n,e[8]=c*o-r*n,e[9]=u*o-i*n,e[10]=d*o-s*n,e[11]=a*o-l*n,e},rotateY:function(e,t,a){var n=Math.sin(a),o=Math.cos(a),r=t[0],i=t[1],s=t[2],l=t[3],c=t[8],u=t[9],d=t[10],a=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=r*o-c*n,e[1]=i*o-u*n,e[2]=s*o-d*n,e[3]=l*o-a*n,e[8]=r*n+c*o,e[9]=i*n+u*o,e[10]=s*n+d*o,e[11]=l*n+a*o,e},rotateZ:function(e,t,a){var n=Math.sin(a),o=Math.cos(a),r=t[0],i=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],a=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=r*o+c*n,e[1]=i*o+u*n,e[2]=s*o+d*n,e[3]=l*o+a*n,e[4]=c*o-r*n,e[5]=u*o-i*n,e[6]=d*o-s*n,e[7]=a*o-l*n,e},fromTranslation:function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},fromScaling:function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromRotation:function(e,t,a){var n=a[0],o=a[1],r=a[2],i=Math.hypot(n,o,r);return i<1e-6?null:(n*=i=1/i,o*=i,r*=i,a=Math.sin(t),t=1-(i=Math.cos(t)),e[0]=n*n*t+i,e[1]=o*n*t+r*a,e[2]=r*n*t-o*a,e[3]=0,e[4]=n*o*t-r*a,e[5]=o*o*t+i,e[6]=r*o*t+n*a,e[7]=0,e[8]=n*r*t+o*a,e[9]=o*r*t-n*a,e[10]=r*r*t+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},fromXRotation:function(e,t){var a=Math.sin(t),t=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=a,e[7]=0,e[8]=0,e[9]=-a,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromYRotation:function(e,t){var a=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=0,e[2]=-a,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=a,e[9]=0,e[10]=t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromZRotation:function(e,t){var a=Math.sin(t),t=Math.cos(t);return e[0]=t,e[1]=a,e[2]=0,e[3]=0,e[4]=-a,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},fromRotationTranslation:g,fromQuat2:function(e,t){var a=new v(3),n=-t[0],o=-t[1],r=-t[2],i=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=n*n+o*o+r*r+i*i;return 0<d?(a[0]=2*(s*i+u*n+l*r-c*o)/d,a[1]=2*(l*i+u*o+c*n-s*r)/d,a[2]=2*(c*i+u*r+s*o-l*n)/d):(a[0]=2*(s*i+u*n+l*r-c*o),a[1]=2*(l*i+u*o+c*n-s*r),a[2]=2*(c*i+u*r+s*o-l*n)),g(e,t,a),e},getTranslation:y,getScaling:C,getRotation:_,fromRotationTranslationScale:function(e,t,a,n){var o=t[0],r=t[1],i=t[2],s=t[3],l=o+o,c=r+r,u=i+i,d=o*l,m=o*c,p=o*u,t=r*c,o=r*u,r=i*u,i=s*l,l=s*c,c=s*u,s=n[0],u=n[1],n=n[2];return e[0]=(1-(t+r))*s,e[1]=(m+c)*s,e[2]=(p-l)*s,e[3]=0,e[4]=(m-c)*u,e[5]=(1-(d+r))*u,e[6]=(o+i)*u,e[7]=0,e[8]=(p+l)*n,e[9]=(o-i)*n,e[10]=(1-(d+t))*n,e[11]=0,e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=1,e},fromRotationTranslationScaleOrigin:function(e,t,a,n,o){var r=t[0],i=t[1],s=t[2],l=t[3],c=r+r,u=i+i,d=s+s,m=r*c,p=r*u,f=r*d,h=i*u,g=i*d,v=s*d,y=l*c,t=l*u,r=l*d,i=n[0],s=n[1],c=n[2],u=o[0],l=o[1],d=o[2],n=(1-(h+v))*i,o=(p+r)*i,i=(f-t)*i,r=(p-r)*s,v=(1-(m+v))*s,s=(g+y)*s,t=(f+t)*c,y=(g-y)*c,c=(1-(m+h))*c;return e[0]=n,e[1]=o,e[2]=i,e[3]=0,e[4]=r,e[5]=v,e[6]=s,e[7]=0,e[8]=t,e[9]=y,e[10]=c,e[11]=0,e[12]=a[0]+u-(n*u+r*l+t*d),e[13]=a[1]+l-(o*u+v*l+y*d),e[14]=a[2]+d-(i*u+s*l+c*d),e[15]=1,e},fromQuat:function(e,t){var a=t[0],n=t[1],o=t[2],r=t[3],i=a+a,s=n+n,l=o+o,c=a*i,u=n*i,t=n*s,a=o*i,n=o*s,o=o*l,i=r*i,s=r*s,l=r*l;return e[0]=1-t-o,e[1]=u+l,e[2]=a-s,e[3]=0,e[4]=u-l,e[5]=1-c-o,e[6]=n+i,e[7]=0,e[8]=a+s,e[9]=n-i,e[10]=1-c-t,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},frustum:function(e,t,a,n,o,r,i){var s=1/(a-t),l=1/(o-n),c=1/(r-i);return e[0]=2*r*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*r*l,e[6]=0,e[7]=0,e[8]=(a+t)*s,e[9]=(o+n)*l,e[10]=(i+r)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r*2*c,e[15]=0,e},perspective:function(e,t,a,n,o){var t=1/Math.tan(t/2);return e[0]=t/a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=o&&o!==1/0?(e[10]=(o+n)*(t=1/(n-o)),e[14]=2*o*n*t):(e[10]=-1,e[14]=-2*n),e},perspectiveFromFieldOfView:function(e,t,a,n){var o=Math.tan(t.upDegrees*Math.PI/180),r=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(i+s),t=2/(o+r);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=-(i-s)*l*.5,e[9]=(o-r)*t*.5,e[10]=n/(a-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*a/(a-n),e[15]=0,e},ortho:function(e,t,a,n,o,r,i){var s=1/(t-a),l=1/(n-o),c=1/(r-i);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+a)*s,e[13]=(o+n)*l,e[14]=(i+r)*c,e[15]=1,e},lookAt:function(e,t,a,n){var o,r=t[0],i=t[1],s=t[2],l=n[0],c=n[1],u=n[2],d=a[0],m=a[1],p=a[2];return Math.abs(r-d)<1e-6&&Math.abs(i-m)<1e-6&&Math.abs(s-p)<1e-6?f(e):(o=r-d,t=i-m,n=s-p,d=c*(n*=a=1/Math.hypot(o,t,n))-u*(t*=a),m=u*(o*=a)-l*n,p=l*t-c*o,(a=Math.hypot(d,m,p))?(d*=a=1/a,m*=a,p*=a):p=m=d=0,u=t*p-n*m,l=n*d-o*p,c=o*m-t*d,(a=Math.hypot(u,l,c))?(u*=a=1/a,l*=a,c*=a):c=l=u=0,e[0]=d,e[1]=u,e[2]=o,e[3]=0,e[4]=m,e[5]=l,e[6]=t,e[7]=0,e[8]=p,e[9]=c,e[10]=n,e[11]=0,e[12]=-(d*r+m*i+p*s),e[13]=-(u*r+l*i+c*s),e[14]=-(o*r+t*i+n*s),e[15]=1,e)},targetTo:function(e,t,a,n){var o=t[0],r=t[1],i=t[2],s=n[0],l=n[1],c=n[2],u=o-a[0],d=r-a[1],t=i-a[2],n=u*u+d*d+t*t;0<n&&(u*=n=1/Math.sqrt(n),d*=n,t*=n);a=l*t-c*d,c=c*u-s*t,l=s*d-l*u;return 0<(n=a*a+c*c+l*l)&&(a*=n=1/Math.sqrt(n),c*=n,l*=n),e[0]=a,e[1]=c,e[2]=l,e[3]=0,e[4]=d*l-t*c,e[5]=t*a-u*l,e[6]=u*c-d*a,e[7]=0,e[8]=u,e[9]=d,e[10]=t,e[11]=0,e[12]=o,e[13]=r,e[14]=i,e[15]=1,e},str:function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},frob:function(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},add:function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e[6]=t[6]+a[6],e[7]=t[7]+a[7],e[8]=t[8]+a[8],e[9]=t[9]+a[9],e[10]=t[10]+a[10],e[11]=t[11]+a[11],e[12]=t[12]+a[12],e[13]=t[13]+a[13],e[14]=t[14]+a[14],e[15]=t[15]+a[15],e},subtract:A,multiplyScalar:function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12]*a,e[13]=t[13]*a,e[14]=t[14]*a,e[15]=t[15]*a,e},multiplyScalarAndAdd:function(e,t,a,n){return e[0]=t[0]+a[0]*n,e[1]=t[1]+a[1]*n,e[2]=t[2]+a[2]*n,e[3]=t[3]+a[3]*n,e[4]=t[4]+a[4]*n,e[5]=t[5]+a[5]*n,e[6]=t[6]+a[6]*n,e[7]=t[7]+a[7]*n,e[8]=t[8]+a[8]*n,e[9]=t[9]+a[9]*n,e[10]=t[10]+a[10]*n,e[11]=t[11]+a[11]*n,e[12]=t[12]+a[12]*n,e[13]=t[13]+a[13]*n,e[14]=t[14]+a[14]*n,e[15]=t[15]+a[15]*n,e},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},equals:function(e,t){var a=e[0],n=e[1],o=e[2],r=e[3],i=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=e[9],m=e[10],p=e[11],f=e[12],h=e[13],g=e[14],v=e[15],y=t[0],C=t[1],_=t[2],A=t[3],E=t[4],P=t[5],b=t[6],T=t[7],w=t[8],S=t[9],M=t[10],I=t[11],R=t[12],k=t[13],e=t[14],t=t[15];return Math.abs(a-y)<=1e-6*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(n-C)<=1e-6*Math.max(1,Math.abs(n),Math.abs(C))&&Math.abs(o-_)<=1e-6*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(r-A)<=1e-6*Math.max(1,Math.abs(r),Math.abs(A))&&Math.abs(i-E)<=1e-6*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(s-P)<=1e-6*Math.max(1,Math.abs(s),Math.abs(P))&&Math.abs(l-b)<=1e-6*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(c-T)<=1e-6*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(u-w)<=1e-6*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(d-S)<=1e-6*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(m-M)<=1e-6*Math.max(1,Math.abs(m),Math.abs(M))&&Math.abs(p-I)<=1e-6*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(f-R)<=1e-6*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(h-k)<=1e-6*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(g-e)<=1e-6*Math.max(1,Math.abs(g),Math.abs(e))&&Math.abs(v-t)<=1e-6*Math.max(1,Math.abs(v),Math.abs(t))},mul:h,sub:A});function P(){var e=new v(3);return v!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function b(e){var t=e[0],a=e[1],e=e[2];return Math.hypot(t,a,e)}function T(e,t,a){var n=new v(3);return n[0]=e,n[1]=t,n[2]=a,n}function w(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e}function S(e,t,a){return e[0]=t[0]*a[0],e[1]=t[1]*a[1],e[2]=t[2]*a[2],e}function M(e,t,a){return e[0]=t[0]/a[0],e[1]=t[1]/a[1],e[2]=t[2]/a[2],e}function I(e,t){var a=t[0]-e[0],n=t[1]-e[1],e=t[2]-e[2];return Math.hypot(a,n,e)}function R(e,t){var a=t[0]-e[0],n=t[1]-e[1],e=t[2]-e[2];return a*a+n*n+e*e}function k(e){var t=e[0],a=e[1],e=e[2];return t*t+a*a+e*e}function O(e,t){var a=t[0],n=t[1],o=t[2],o=a*a+n*n+o*o;return 0<o&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function N(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function D(e,t,a){var n=t[0],o=t[1],r=t[2],i=a[0],t=a[1],a=a[2];return e[0]=o*a-r*t,e[1]=r*i-n*a,e[2]=n*t-o*i,e}var L,x=w,U=S,H=M,j=I,z=R,B=b,F=k,W=(L=P(),function(e,t,a,n,o,r){var i,s;for(t=t||3,a=a||0,s=n?Math.min(n*t+a,e.length):e.length,i=a;i<s;i+=t)L[0]=e[i],L[1]=e[i+1],L[2]=e[i+2],o(L,L,r),e[i]=L[0],e[i+1]=L[1],e[i+2]=L[2];return e}),G=Object.freeze({__proto__:null,create:P,clone:function(e){var t=new v(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},length:b,fromValues:T,copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},set:function(e,t,a,n){return e[0]=t,e[1]=a,e[2]=n,e},add:function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e},subtract:w,multiply:S,divide:M,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},min:function(e,t,a){return e[0]=Math.min(t[0],a[0]),e[1]=Math.min(t[1],a[1]),e[2]=Math.min(t[2],a[2]),e},max:function(e,t,a){return e[0]=Math.max(t[0],a[0]),e[1]=Math.max(t[1],a[1]),e[2]=Math.max(t[2],a[2]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},scale:function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e},scaleAndAdd:function(e,t,a,n){return e[0]=t[0]+a[0]*n,e[1]=t[1]+a[1]*n,e[2]=t[2]+a[2]*n,e},distance:I,squaredDistance:R,squaredLength:k,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},normalize:O,dot:N,cross:D,lerp:function(e,t,a,n){var o=t[0],r=t[1],t=t[2];return e[0]=o+n*(a[0]-o),e[1]=r+n*(a[1]-r),e[2]=t+n*(a[2]-t),e},hermite:function(e,t,a,n,o,r){var i=r*r,s=i*(2*r-3)+1,l=i*(r-2)+r,c=i*(r-1),r=i*(3-2*r);return e[0]=t[0]*s+a[0]*l+n[0]*c+o[0]*r,e[1]=t[1]*s+a[1]*l+n[1]*c+o[1]*r,e[2]=t[2]*s+a[2]*l+n[2]*c+o[2]*r,e},bezier:function(e,t,a,n,o,r){var i=1-r,s=i*i,l=r*r,c=s*i,s=3*r*s,i=3*l*i,r=l*r;return e[0]=t[0]*c+a[0]*s+n[0]*i+o[0]*r,e[1]=t[1]*c+a[1]*s+n[1]*i+o[1]*r,e[2]=t[2]*c+a[2]*s+n[2]*i+o[2]*r,e},random:function(e,t){t=t||1;var a=2*c()*Math.PI,n=2*c()-1,o=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(a)*o,e[1]=Math.sin(a)*o,e[2]=n*t,e},transformMat4:function(e,t,a){var n=t[0],o=t[1],r=t[2],t=a[3]*n+a[7]*o+a[11]*r+a[15];return e[0]=(a[0]*n+a[4]*o+a[8]*r+a[12])/(t=t||1),e[1]=(a[1]*n+a[5]*o+a[9]*r+a[13])/t,e[2]=(a[2]*n+a[6]*o+a[10]*r+a[14])/t,e},transformMat3:function(e,t,a){var n=t[0],o=t[1],t=t[2];return e[0]=n*a[0]+o*a[3]+t*a[6],e[1]=n*a[1]+o*a[4]+t*a[7],e[2]=n*a[2]+o*a[5]+t*a[8],e},transformQuat:function(e,t,a){var n=a[0],o=a[1],r=a[2],i=a[3],s=t[0],l=t[1],c=t[2],u=o*c-r*l,d=r*s-n*c,a=n*l-o*s,t=o*a-r*d,r=r*u-n*a,o=n*d-o*u,i=2*i;return d*=i,a*=i,r*=2,o*=2,e[0]=s+(u*=i)+(t*=2),e[1]=l+d+r,e[2]=c+a+o,e},rotateX:function(e,t,a,n){var o=[],r=[];return o[0]=t[0]-a[0],o[1]=t[1]-a[1],o[2]=t[2]-a[2],r[0]=o[0],r[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),r[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),e[0]=r[0]+a[0],e[1]=r[1]+a[1],e[2]=r[2]+a[2],e},rotateY:function(e,t,a,n){var o=[],r=[];return o[0]=t[0]-a[0],o[1]=t[1]-a[1],o[2]=t[2]-a[2],r[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),r[1]=o[1],r[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),e[0]=r[0]+a[0],e[1]=r[1]+a[1],e[2]=r[2]+a[2],e},rotateZ:function(e,t,a,n){var o=[],r=[];return o[0]=t[0]-a[0],o[1]=t[1]-a[1],o[2]=t[2]-a[2],r[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),r[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),r[2]=o[2],e[0]=r[0]+a[0],e[1]=r[1]+a[1],e[2]=r[2]+a[2],e},angle:function(e,t){var a=e[0],n=e[1],o=e[2],r=t[0],i=t[1],s=t[2],s=Math.sqrt(a*a+n*n+o*o)*Math.sqrt(r*r+i*i+s*s),s=s&&N(e,t)/s;return Math.acos(Math.min(Math.max(s,-1),1))},zero:function(e){return e[0]=0,e[1]=0,e[2]=0,e},str:function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},equals:function(e,t){var a=e[0],n=e[1],o=e[2],r=t[0],e=t[1],t=t[2];return Math.abs(a-r)<=1e-6*Math.max(1,Math.abs(a),Math.abs(r))&&Math.abs(n-e)<=1e-6*Math.max(1,Math.abs(n),Math.abs(e))&&Math.abs(o-t)<=1e-6*Math.max(1,Math.abs(o),Math.abs(t))},sub:x,mul:U,div:H,dist:j,sqrDist:z,len:B,sqrLen:F,forEach:W});function Y(){var e=new v(4);return v!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function q(e){var t=new v(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function V(e,t,a,n){var o=new v(4);return o[0]=e,o[1]=t,o[2]=a,o[3]=n,o}function J(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function K(e,t,a,n,o){return e[0]=t,e[1]=a,e[2]=n,e[3]=o,e}function Z(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e}function $(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e[2]=t[2]-a[2],e[3]=t[3]-a[3],e}function X(e,t,a){return e[0]=t[0]*a[0],e[1]=t[1]*a[1],e[2]=t[2]*a[2],e[3]=t[3]*a[3],e}function Q(e,t,a){return e[0]=t[0]/a[0],e[1]=t[1]/a[1],e[2]=t[2]/a[2],e[3]=t[3]/a[3],e}function ee(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e}function te(e,t){var a=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2],e=t[3]-e[3];return Math.hypot(a,n,o,e)}function ae(e,t){var a=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2],e=t[3]-e[3];return a*a+n*n+o*o+e*e}function ne(e){var t=e[0],a=e[1],n=e[2],e=e[3];return Math.hypot(t,a,n,e)}function oe(e){var t=e[0],a=e[1],n=e[2],e=e[3];return t*t+a*a+n*n+e*e}function re(e,t){var a=t[0],n=t[1],o=t[2],r=t[3],t=a*a+n*n+o*o+r*r;return 0<t&&(t=1/Math.sqrt(t)),e[0]=a*t,e[1]=n*t,e[2]=o*t,e[3]=r*t,e}function ie(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function se(e,t,a,n){var o=t[0],r=t[1],i=t[2],t=t[3];return e[0]=o+n*(a[0]-o),e[1]=r+n*(a[1]-r),e[2]=i+n*(a[2]-i),e[3]=t+n*(a[3]-t),e}function le(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function ce(e,t){var a=e[0],n=e[1],o=e[2],r=e[3],i=t[0],s=t[1],e=t[2],t=t[3];return Math.abs(a-i)<=1e-6*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(n-s)<=1e-6*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-e)<=1e-6*Math.max(1,Math.abs(o),Math.abs(e))&&Math.abs(r-t)<=1e-6*Math.max(1,Math.abs(r),Math.abs(t))}var ue,de=$,me=X,pe=Q,fe=te,he=ae,ge=ne,ve=oe,ye=(ue=Y(),function(e,t,a,n,o,r){var i,s;for(t=t||4,a=a||0,s=n?Math.min(n*t+a,e.length):e.length,i=a;i<s;i+=t)ue[0]=e[i],ue[1]=e[i+1],ue[2]=e[i+2],ue[3]=e[i+3],o(ue,ue,r),e[i]=ue[0],e[i+1]=ue[1],e[i+2]=ue[2],e[i+3]=ue[3];return e}),Ce=Object.freeze({__proto__:null,create:Y,clone:q,fromValues:V,copy:J,set:K,add:Z,subtract:$,multiply:X,divide:Q,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},min:function(e,t,a){return e[0]=Math.min(t[0],a[0]),e[1]=Math.min(t[1],a[1]),e[2]=Math.min(t[2],a[2]),e[3]=Math.min(t[3],a[3]),e},max:function(e,t,a){return e[0]=Math.max(t[0],a[0]),e[1]=Math.max(t[1],a[1]),e[2]=Math.max(t[2],a[2]),e[3]=Math.max(t[3],a[3]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},scale:ee,scaleAndAdd:function(e,t,a,n){return e[0]=t[0]+a[0]*n,e[1]=t[1]+a[1]*n,e[2]=t[2]+a[2]*n,e[3]=t[3]+a[3]*n,e},distance:te,squaredDistance:ae,length:ne,squaredLength:oe,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},normalize:re,dot:ie,cross:function(e,t,a,n){var o=a[0]*n[1]-a[1]*n[0],r=a[0]*n[2]-a[2]*n[0],i=a[0]*n[3]-a[3]*n[0],s=a[1]*n[2]-a[2]*n[1],l=a[1]*n[3]-a[3]*n[1],c=a[2]*n[3]-a[3]*n[2],u=t[0],a=t[1],n=t[2],t=t[3];return e[0]=a*c-n*l+t*s,e[1]=-u*c+n*i-t*r,e[2]=u*l-a*i+t*o,e[3]=-u*s+a*r-n*o,e},lerp:se,random:function(e,t){var a,n,o,r,i,s;for(t=t||1;1<=(i=(a=2*c()-1)*a+(n=2*c()-1)*n););for(;1<=(s=(o=2*c()-1)*o+(r=2*c()-1)*r););var l=Math.sqrt((1-i)/s);return e[0]=t*a,e[1]=t*n,e[2]=t*o*l,e[3]=t*r*l,e},transformMat4:function(e,t,a){var n=t[0],o=t[1],r=t[2],t=t[3];return e[0]=a[0]*n+a[4]*o+a[8]*r+a[12]*t,e[1]=a[1]*n+a[5]*o+a[9]*r+a[13]*t,e[2]=a[2]*n+a[6]*o+a[10]*r+a[14]*t,e[3]=a[3]*n+a[7]*o+a[11]*r+a[15]*t,e},transformQuat:function(e,t,a){var n=t[0],o=t[1],r=t[2],i=a[0],s=a[1],l=a[2],c=a[3],u=c*n+s*r-l*o,d=c*o+l*n-i*r,a=c*r+i*o-s*n,r=-i*n-s*o-l*r;return e[0]=u*c+r*-i+d*-l-a*-s,e[1]=d*c+r*-s+a*-i-u*-l,e[2]=a*c+r*-l+u*-s-d*-i,e[3]=t[3],e},zero:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},str:function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},exactEquals:le,equals:ce,sub:de,mul:me,div:pe,dist:fe,sqrDist:he,len:ge,sqrLen:ve,forEach:ye});function _e(){var e=new v(4);return v!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Ae(e,t,a){a*=.5;var n=Math.sin(a);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(a),e}function Ee(e,t,a){var n=t[0],o=t[1],r=t[2],i=t[3],s=a[0],l=a[1],t=a[2],a=a[3];return e[0]=n*a+i*s+o*t-r*l,e[1]=o*a+i*l+r*s-n*t,e[2]=r*a+i*t+n*l-o*s,e[3]=i*a-n*s-o*l-r*t,e}function Pe(e,t,a){a*=.5;var n=t[0],o=t[1],r=t[2],i=t[3],t=Math.sin(a),a=Math.cos(a);return e[0]=n*a+i*t,e[1]=o*a+r*t,e[2]=r*a-o*t,e[3]=i*a-n*t,e}function be(e,t,a){a*=.5;var n=t[0],o=t[1],r=t[2],i=t[3],t=Math.sin(a),a=Math.cos(a);return e[0]=n*a-r*t,e[1]=o*a+i*t,e[2]=r*a+n*t,e[3]=i*a-o*t,e}function Te(e,t,a){a*=.5;var n=t[0],o=t[1],r=t[2],i=t[3],t=Math.sin(a),a=Math.cos(a);return e[0]=n*a+o*t,e[1]=o*a-n*t,e[2]=r*a+i*t,e[3]=i*a-r*t,e}function we(e,t){var a=t[0],n=t[1],o=t[2],r=t[3],i=Math.sqrt(a*a+n*n+o*o),t=Math.exp(r),r=0<i?t*Math.sin(i)/i:0;return e[0]=a*r,e[1]=n*r,e[2]=o*r,e[3]=t*Math.cos(i),e}function Se(e,t){var a=t[0],n=t[1],o=t[2],r=t[3],t=Math.sqrt(a*a+n*n+o*o),t=0<t?Math.atan2(t,r)/t:0;return e[0]=a*t,e[1]=n*t,e[2]=o*t,e[3]=.5*Math.log(a*a+n*n+o*o+r*r),e}function Me(e,t,a,n){var o,r=t[0],i=t[1],s=t[2],l=t[3],c=a[0],u=a[1],d=a[2],m=a[3];return(t=r*c+i*u+s*d+l*m)<0&&(t=-t,c=-c,u=-u,d=-d,m=-m),n=1e-6<1-t?(a=Math.acos(t),t=Math.sin(a),o=Math.sin((1-n)*a)/t,Math.sin(n*a)/t):(o=1-n,n),e[0]=o*r+n*c,e[1]=o*i+n*u,e[2]=o*s+n*d,e[3]=o*l+n*m,e}function Ie(e,t){var a,n,o,r=t[0]+t[4]+t[8];return 0<r?(o=Math.sqrt(r+1),e[3]=.5*o,e[0]=(t[5]-t[7])*(o=.5/o),e[1]=(t[6]-t[2])*o,e[2]=(t[1]-t[3])*o):(t[4]>t[a=0]&&(a=1),n=((a=t[8]>t[3*a+a]?2:a)+1)%3,r=(a+2)%3,o=Math.sqrt(t[3*a+a]-t[3*n+n]-t[3*r+r]+1),e[a]=.5*o,e[3]=(t[3*n+r]-t[3*r+n])*(o=.5/o),e[n]=(t[3*n+a]+t[3*a+n])*o,e[r]=(t[3*r+a]+t[3*a+r])*o),e}var Re,ke,Oe,Ne,De,Le,xe=q,x=V,U=J,H=K,j=Z,z=Ee,Ue=ee,He=ie,F=se,W=ne,de=W,me=oe,pe=me,je=re,fe=le,he=ce,ge=(Re=P(),ke=T(1,0,0),Oe=T(0,1,0),function(e,t,a){var n=N(t,a);return n<-.999999?(D(Re,ke,t),B(Re)<1e-6&&D(Re,Oe,t),O(Re,Re),Ae(e,Re,Math.PI),e):.999999<n?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(D(Re,t,a),e[0]=Re[0],e[1]=Re[1],e[2]=Re[2],e[3]=1+n,je(e,e))}),ve=(Ne=_e(),De=_e(),function(e,t,a,n,o,r){return Me(Ne,t,o,r),Me(De,a,n,r),Me(e,Ne,De,2*r*(1-r)),e}),ye=(Le=u(),function(e,t,a,n){return Le[0]=a[0],Le[3]=a[1],Le[6]=a[2],Le[1]=n[0],Le[4]=n[1],Le[7]=n[2],Le[2]=-t[0],Le[5]=-t[1],Le[8]=-t[2],je(e,Ie(e,Le))}),de=Object.freeze({__proto__:null,create:_e,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},setAxisAngle:Ae,getAxisAngle:function(e,t){var a=2*Math.acos(t[3]),n=Math.sin(a/2);return 1e-6<n?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=1,e[1]=0,e[2]=0),a},getAngle:function(e,t){t=He(e,t);return Math.acos(2*t*t-1)},multiply:Ee,rotateX:Pe,rotateY:be,rotateZ:Te,calculateW:function(e,t){var a=t[0],n=t[1],t=t[2];return e[0]=a,e[1]=n,e[2]=t,e[3]=Math.sqrt(Math.abs(1-a*a-n*n-t*t)),e},exp:we,ln:Se,pow:function(e,t,a){return Se(e,t),Ue(e,e,a),we(e,e),e},slerp:Me,random:function(e){var t=c(),a=c(),n=c(),o=Math.sqrt(1-t),t=Math.sqrt(t);return e[0]=o*Math.sin(2*Math.PI*a),e[1]=o*Math.cos(2*Math.PI*a),e[2]=t*Math.sin(2*Math.PI*n),e[3]=t*Math.cos(2*Math.PI*n),e},invert:function(e,t){var a=t[0],n=t[1],o=t[2],r=t[3],t=a*a+n*n+o*o+r*r,t=t?1/t:0;return e[0]=-a*t,e[1]=-n*t,e[2]=-o*t,e[3]=r*t,e},conjugate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},fromMat3:Ie,fromEuler:function(e,t,a,n){var o=.5*Math.PI/180;t*=o,a*=o,n*=o;var r=Math.sin(t),i=Math.cos(t),o=Math.sin(a),t=Math.cos(a),a=Math.sin(n),n=Math.cos(n);return e[0]=r*t*n-i*o*a,e[1]=i*o*n+r*t*a,e[2]=i*t*a-r*o*n,e[3]=i*t*n+r*o*a,e},str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},clone:xe,fromValues:x,copy:U,set:H,add:j,mul:z,scale:Ue,dot:He,lerp:F,length:W,len:de,squaredLength:me,sqrLen:pe,normalize:je,exactEquals:fe,equals:he,rotationTo:ge,sqlerp:ve,setAxes:ye});function ze(e,t,a){var n=.5*a[0],o=.5*a[1],r=.5*a[2],i=t[0],s=t[1],a=t[2],t=t[3];return e[0]=i,e[1]=s,e[2]=a,e[3]=t,e[4]=n*t+o*a-r*s,e[5]=o*t+r*i-n*a,e[6]=r*t+n*s-o*i,e[7]=-n*i-o*s-r*a,e}function Be(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function Fe(e,t,a){var n=t[0],o=t[1],r=t[2],i=t[3],s=a[4],l=a[5],c=a[6],u=a[7],d=t[4],m=t[5],p=t[6],f=t[7],h=a[0],g=a[1],t=a[2],a=a[3];return e[0]=n*a+i*h+o*t-r*g,e[1]=o*a+i*g+r*h-n*t,e[2]=r*a+i*t+n*g-o*h,e[3]=i*a-n*h-o*g-r*t,e[4]=n*u+i*s+o*c-r*l+d*a+f*h+m*t-p*g,e[5]=o*u+i*l+r*s-n*c+m*a+f*g+p*h-d*t,e[6]=r*u+i*c+n*l-o*s+p*a+f*t+d*g-m*h,e[7]=i*u-n*s-o*l-r*c+f*a-d*h-m*g-p*t,e}var We=He,Ge=me,pe=Object.freeze({__proto__:null,create:function(){var e=new v(8);return v!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e},clone:function(e){var t=new v(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t},fromValues:function(e,t,a,n,o,r,i,s){var l=new v(8);return l[0]=e,l[1]=t,l[2]=a,l[3]=n,l[4]=o,l[5]=r,l[6]=i,l[7]=s,l},fromRotationTranslationValues:function(e,t,a,n,o,r,i){var s=new v(8);s[0]=e,s[1]=t,s[2]=a,s[3]=n;o*=.5,r*=.5,i*=.5;return s[4]=o*n+r*a-i*t,s[5]=r*n+i*e-o*a,s[6]=i*n+o*t-r*e,s[7]=-o*e-r*t-i*a,s},fromRotationTranslation:ze,fromTranslation:function(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e},fromRotation:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},fromMat4:function(e,t){var a=_e();_(a,t);var n=new v(3);return y(n,t),ze(e,a,n),e},copy:Be,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e},set:function(e,t,a,n,o,r,i,s,l){return e[0]=t,e[1]=a,e[2]=n,e[3]=o,e[4]=r,e[5]=i,e[6]=s,e[7]=l,e},getReal:U,getDual:function(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e},setReal:U,setDual:function(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e},getTranslation:function(e,t){var a=t[4],n=t[5],o=t[6],r=t[7],i=-t[0],s=-t[1],l=-t[2],t=t[3];return e[0]=2*(a*t+r*i+n*l-o*s),e[1]=2*(n*t+r*s+o*i-a*l),e[2]=2*(o*t+r*l+a*s-n*i),e},translate:function(e,t,a){var n=t[0],o=t[1],r=t[2],i=t[3],s=.5*a[0],l=.5*a[1],c=.5*a[2],u=t[4],d=t[5],a=t[6],t=t[7];return e[0]=n,e[1]=o,e[2]=r,e[3]=i,e[4]=i*s+o*c-r*l+u,e[5]=i*l+r*s-n*c+d,e[6]=i*c+n*l-o*s+a,e[7]=-n*s-o*l-r*c+t,e},rotateX:function(e,t,a){var n=-t[0],o=-t[1],r=-t[2],i=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=s*i+u*n+l*r-c*o,m=l*i+u*o+c*n-s*r,p=c*i+u*r+s*o-l*n,c=u*i-s*n-l*o-c*r;return Pe(e,t,a),n=e[0],o=e[1],r=e[2],i=e[3],e[4]=d*i+c*n+m*r-p*o,e[5]=m*i+c*o+p*n-d*r,e[6]=p*i+c*r+d*o-m*n,e[7]=c*i-d*n-m*o-p*r,e},rotateY:function(e,t,a){var n=-t[0],o=-t[1],r=-t[2],i=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=s*i+u*n+l*r-c*o,m=l*i+u*o+c*n-s*r,p=c*i+u*r+s*o-l*n,c=u*i-s*n-l*o-c*r;return be(e,t,a),n=e[0],o=e[1],r=e[2],i=e[3],e[4]=d*i+c*n+m*r-p*o,e[5]=m*i+c*o+p*n-d*r,e[6]=p*i+c*r+d*o-m*n,e[7]=c*i-d*n-m*o-p*r,e},rotateZ:function(e,t,a){var n=-t[0],o=-t[1],r=-t[2],i=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=s*i+u*n+l*r-c*o,m=l*i+u*o+c*n-s*r,p=c*i+u*r+s*o-l*n,c=u*i-s*n-l*o-c*r;return Te(e,t,a),n=e[0],o=e[1],r=e[2],i=e[3],e[4]=d*i+c*n+m*r-p*o,e[5]=m*i+c*o+p*n-d*r,e[6]=p*i+c*r+d*o-m*n,e[7]=c*i-d*n-m*o-p*r,e},rotateByQuatAppend:function(e,t,a){var n=a[0],o=a[1],r=a[2],i=a[3],s=t[0],l=t[1],c=t[2],a=t[3];return e[0]=s*i+a*n+l*r-c*o,e[1]=l*i+a*o+c*n-s*r,e[2]=c*i+a*r+s*o-l*n,e[3]=a*i-s*n-l*o-c*r,s=t[4],l=t[5],c=t[6],a=t[7],e[4]=s*i+a*n+l*r-c*o,e[5]=l*i+a*o+c*n-s*r,e[6]=c*i+a*r+s*o-l*n,e[7]=a*i-s*n-l*o-c*r,e},rotateByQuatPrepend:function(e,t,a){var n=t[0],o=t[1],r=t[2],i=t[3],s=a[0],l=a[1],c=a[2],t=a[3];return e[0]=n*t+i*s+o*c-r*l,e[1]=o*t+i*l+r*s-n*c,e[2]=r*t+i*c+n*l-o*s,e[3]=i*t-n*s-o*l-r*c,s=a[4],l=a[5],c=a[6],t=a[7],e[4]=n*t+i*s+o*c-r*l,e[5]=o*t+i*l+r*s-n*c,e[6]=r*t+i*c+n*l-o*s,e[7]=i*t-n*s-o*l-r*c,e},rotateAroundAxis:function(e,t,a,n){if(Math.abs(n)<1e-6)return Be(e,t);var o=Math.hypot(a[0],a[1],a[2]);n*=.5;var r=Math.sin(n),i=r*a[0]/o,s=r*a[1]/o,l=r*a[2]/o,c=Math.cos(n),r=t[0],a=t[1],o=t[2],n=t[3];e[0]=r*c+n*i+a*l-o*s,e[1]=a*c+n*s+o*i-r*l,e[2]=o*c+n*l+r*s-a*i,e[3]=n*c-r*i-a*s-o*l;r=t[4],a=t[5],o=t[6],t=t[7];return e[4]=r*c+t*i+a*l-o*s,e[5]=a*c+t*s+o*i-r*l,e[6]=o*c+t*l+r*s-a*i,e[7]=t*c-r*i-a*s-o*l,e},add:function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e[2]=t[2]+a[2],e[3]=t[3]+a[3],e[4]=t[4]+a[4],e[5]=t[5]+a[5],e[6]=t[6]+a[6],e[7]=t[7]+a[7],e},multiply:Fe,mul:Fe,scale:function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e},dot:We,lerp:function(e,t,a,n){var o=1-n;return We(t,a)<0&&(n=-n),e[0]=t[0]*o+a[0]*n,e[1]=t[1]*o+a[1]*n,e[2]=t[2]*o+a[2]*n,e[3]=t[3]*o+a[3]*n,e[4]=t[4]*o+a[4]*n,e[5]=t[5]*o+a[5]*n,e[6]=t[6]*o+a[6]*n,e[7]=t[7]*o+a[7]*n,e},invert:function(e,t){var a=Ge(t);return e[0]=-t[0]/a,e[1]=-t[1]/a,e[2]=-t[2]/a,e[3]=t[3]/a,e[4]=-t[4]/a,e[5]=-t[5]/a,e[6]=-t[6]/a,e[7]=t[7]/a,e},conjugate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e},length:W,len:W,squaredLength:Ge,sqrLen:Ge,normalize:function(e,t){var a,n,o,r,i,s,l,c,u=Ge(t);return 0<u&&(u=Math.sqrt(u),a=t[0]/u,n=t[1]/u,o=t[2]/u,r=t[3]/u,t=a*(i=t[4])+n*(s=t[5])+o*(l=t[6])+r*(c=t[7]),e[0]=a,e[1]=n,e[2]=o,e[3]=r,e[4]=(i-a*t)/u,e[5]=(s-n*t)/u,e[6]=(l-o*t)/u,e[7]=(c-r*t)/u),e},str:function(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]},equals:function(e,t){var a=e[0],n=e[1],o=e[2],r=e[3],i=e[4],s=e[5],l=e[6],c=e[7],u=t[0],d=t[1],m=t[2],p=t[3],f=t[4],h=t[5],e=t[6],t=t[7];return Math.abs(a-u)<=1e-6*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(n-d)<=1e-6*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-m)<=1e-6*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(r-p)<=1e-6*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(i-f)<=1e-6*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(s-h)<=1e-6*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(l-e)<=1e-6*Math.max(1,Math.abs(l),Math.abs(e))&&Math.abs(c-t)<=1e-6*Math.max(1,Math.abs(c),Math.abs(t))}});function Ye(){var e=new v(2);return v!=Float32Array&&(e[0]=0,e[1]=0),e}function qe(e,t,a){return e[0]=t[0]-a[0],e[1]=t[1]-a[1],e}function Ve(e,t,a){return e[0]=t[0]*a[0],e[1]=t[1]*a[1],e}function Je(e,t,a){return e[0]=t[0]/a[0],e[1]=t[1]/a[1],e}function Ke(e,t){var a=t[0]-e[0],e=t[1]-e[1];return Math.hypot(a,e)}function Ze(e,t){var a=t[0]-e[0],e=t[1]-e[1];return a*a+e*e}function $e(e){var t=e[0],e=e[1];return Math.hypot(t,e)}function Xe(e){var t=e[0],e=e[1];return t*t+e*e}var Qe,fe=$e,he=qe,ge=Ve,ve=Je,ye=Ke,me=Ze,U=Xe,W=(Qe=Ye(),function(e,t,a,n,o,r){var i,s;for(t=t||2,a=a||0,s=n?Math.min(n*t+a,e.length):e.length,i=a;i<s;i+=t)Qe[0]=e[i],Qe[1]=e[i+1],o(Qe,Qe,r),e[i]=Qe[0],e[i+1]=Qe[1];return e}),W=Object.freeze({__proto__:null,create:Ye,clone:function(e){var t=new v(2);return t[0]=e[0],t[1]=e[1],t},fromValues:function(e,t){var a=new v(2);return a[0]=e,a[1]=t,a},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e},set:function(e,t,a){return e[0]=t,e[1]=a,e},add:function(e,t,a){return e[0]=t[0]+a[0],e[1]=t[1]+a[1],e},subtract:qe,multiply:Ve,divide:Je,ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},min:function(e,t,a){return e[0]=Math.min(t[0],a[0]),e[1]=Math.min(t[1],a[1]),e},max:function(e,t,a){return e[0]=Math.max(t[0],a[0]),e[1]=Math.max(t[1],a[1]),e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},scale:function(e,t,a){return e[0]=t[0]*a,e[1]=t[1]*a,e},scaleAndAdd:function(e,t,a,n){return e[0]=t[0]+a[0]*n,e[1]=t[1]+a[1]*n,e},distance:Ke,squaredDistance:Ze,length:$e,squaredLength:Xe,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},normalize:function(e,t){var a=t[0],n=t[1],n=a*a+n*n;return 0<n&&(n=1/Math.sqrt(n)),e[0]=t[0]*n,e[1]=t[1]*n,e},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]},cross:function(e,t,a){a=t[0]*a[1]-t[1]*a[0];return e[0]=e[1]=0,e[2]=a,e},lerp:function(e,t,a,n){var o=t[0],t=t[1];return e[0]=o+n*(a[0]-o),e[1]=t+n*(a[1]-t),e},random:function(e,t){t=t||1;var a=2*c()*Math.PI;return e[0]=Math.cos(a)*t,e[1]=Math.sin(a)*t,e},transformMat2:function(e,t,a){var n=t[0],t=t[1];return e[0]=a[0]*n+a[2]*t,e[1]=a[1]*n+a[3]*t,e},transformMat2d:function(e,t,a){var n=t[0],t=t[1];return e[0]=a[0]*n+a[2]*t+a[4],e[1]=a[1]*n+a[3]*t+a[5],e},transformMat3:function(e,t,a){var n=t[0],t=t[1];return e[0]=a[0]*n+a[3]*t+a[6],e[1]=a[1]*n+a[4]*t+a[7],e},transformMat4:function(e,t,a){var n=t[0],t=t[1];return e[0]=a[0]*n+a[4]*t+a[12],e[1]=a[1]*n+a[5]*t+a[13],e},rotate:function(e,t,a,n){var o=t[0]-a[0],r=t[1]-a[1],t=Math.sin(n),n=Math.cos(n);return e[0]=o*n-r*t+a[0],e[1]=o*t+r*n+a[1],e},angle:function(e,t){var a=e[0],n=e[1],o=t[0],e=t[1],t=Math.sqrt(a*a+n*n)*Math.sqrt(o*o+e*e);return Math.acos(Math.min(Math.max(t&&(a*o+n*e)/t,-1),1))},zero:function(e){return e[0]=0,e[1]=0,e},str:function(e){return"vec2("+e[0]+", "+e[1]+")"},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]},equals:function(e,t){var a=e[0],n=e[1],e=t[0],t=t[1];return Math.abs(a-e)<=1e-6*Math.max(1,Math.abs(a),Math.abs(e))&&Math.abs(n-t)<=1e-6*Math.max(1,Math.abs(n),Math.abs(t))},len:fe,sub:he,mul:ge,div:ve,dist:ye,sqrDist:me,sqrLen:U,forEach:W});e.glMatrix=a,e.mat2=r,e.mat2d=l,e.mat3=p,e.mat4=E,e.quat=de,e.quat2=pe,e.vec2=W,e.vec3=G,e.vec4=Ce,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";var e;function f(){return e.apply(null,arguments)}function i(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function s(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;for(var t in e)if(p(e,t))return;return 1}function c(e){return void 0===e}function u(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function d(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function m(e,t){for(var a=[],n=0;n<e.length;++n)a.push(t(e[n],n));return a}function h(e,t){for(var a in t)p(t,a)&&(e[a]=t[a]);return p(t,"toString")&&(e.toString=t.toString),p(t,"valueOf")&&(e.valueOf=t.valueOf),e}function g(e,t,a,n){return Tt(e,t,a,n,!0).utc()}function v(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function y(e){if(null==e._isValid){var t=v(e),a=n.call(t.parsedDateParts,function(e){return null!=e}),a=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&a);if(e._strict&&(a=a&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return a;e._isValid=a}return e._isValid}function C(e){var t=g(NaN);return null!=e?h(v(t),e):v(t).userInvalidated=!0,t}var n=Array.prototype.some||function(e){for(var t=Object(this),a=t.length>>>0,n=0;n<a;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1},r=f.momentProperties=[],t=!1;function _(e,t){var a,n,o;if(c(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),c(t._i)||(e._i=t._i),c(t._f)||(e._f=t._f),c(t._l)||(e._l=t._l),c(t._strict)||(e._strict=t._strict),c(t._tzm)||(e._tzm=t._tzm),c(t._isUTC)||(e._isUTC=t._isUTC),c(t._offset)||(e._offset=t._offset),c(t._pf)||(e._pf=v(t)),c(t._locale)||(e._locale=t._locale),0<r.length)for(a=0;a<r.length;a++)c(o=t[n=r[a]])||(e[n]=o);return e}function A(e){_(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===t&&(t=!0,f.updateOffset(this),t=!1)}function E(e){return e instanceof A||null!=e&&null!=e._isAMomentObject}function P(e){!1===f.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function a(o,r){var i=!0;return h(function(){if(null!=f.deprecationHandler&&f.deprecationHandler(null,o),i){for(var e,t,a=[],n=0;n<arguments.length;n++){if(e="","object"==typeof arguments[n]){for(t in e+="\n["+n+"] ",arguments[0])p(arguments[0],t)&&(e+=t+": "+arguments[0][t]+", ");e=e.slice(0,-2)}else e=arguments[n];a.push(e)}P(o+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),i=!1}return r.apply(this,arguments)},r)}var o={};function b(e,t){null!=f.deprecationHandler&&f.deprecationHandler(e,t),o[e]||(P(t),o[e]=!0)}function T(e){return"undefined"!=typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function w(e,t){var a,n=h({},e);for(a in t)p(t,a)&&(s(e[a])&&s(t[a])?(n[a]={},h(n[a],e[a]),h(n[a],t[a])):null!=t[a]?n[a]=t[a]:delete n[a]);for(a in e)p(e,a)&&!p(t,a)&&s(e[a])&&(n[a]=h({},n[a]));return n}function S(e){null!=e&&this.set(e)}function M(e,t,a){var n=""+Math.abs(e);return(0<=e?a?"+":"":"-")+Math.pow(10,Math.max(0,t-n.length)).toString().substr(1)+n}f.suppressDeprecationWarnings=!1,f.deprecationHandler=null;var I=Object.keys||function(e){var t,a=[];for(t in e)p(e,t)&&a.push(t);return a},R=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,k=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,O={},N={};function D(e,t,a,n){var o="string"==typeof n?function(){return this[n]()}:n;e&&(N[e]=o),t&&(N[t[0]]=function(){return M(o.apply(this,arguments),t[1],t[2])}),a&&(N[a]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function L(e,t){return e.isValid()?(t=x(t,e.localeData()),O[t]=O[t]||function(n){for(var e,o=n.match(R),t=0,r=o.length;t<r;t++)N[o[t]]?o[t]=N[o[t]]:o[t]=(e=o[t]).match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"");return function(e){for(var t="",a=0;a<r;a++)t+=T(o[a])?o[a].call(e,n):o[a];return t}}(t),O[t](e)):e.localeData().invalidDate()}function x(e,t){var a=5;function n(e){return t.longDateFormat(e)||e}for(k.lastIndex=0;0<=a&&k.test(e);)e=e.replace(k,n),k.lastIndex=0,--a;return e}var U={};function H(e,t){var a=e.toLowerCase();U[a]=U[a+"s"]=U[t]=e}function j(e){return"string"==typeof e?U[e]||U[e.toLowerCase()]:void 0}function z(e){var t,a,n={};for(a in e)p(e,a)&&(t=j(a))&&(n[t]=e[a]);return n}var B={};function F(e,t){B[e]=t}function W(e){return e%4==0&&e%100!=0||e%400==0}function G(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Y(e){var t=+e,e=0;return e=0!=t&&isFinite(t)?G(t):e}function q(t,a){return function(e){return null!=e?(J(this,t,e),f.updateOffset(this,a),this):V(this,t)}}function V(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function J(e,t,a){e.isValid()&&!isNaN(a)&&("FullYear"===t&&W(e.year())&&1===e.month()&&29===e.date()?(a=Y(a),e._d["set"+(e._isUTC?"UTC":"")+t](a,e.month(),Se(a,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](a))}var K=/\d/,Z=/\d\d/,$=/\d{3}/,X=/\d{4}/,Q=/[+-]?\d{6}/,ee=/\d\d?/,te=/\d\d\d\d?/,ae=/\d\d\d\d\d\d?/,ne=/\d{1,3}/,oe=/\d{1,4}/,re=/[+-]?\d{1,6}/,ie=/\d+/,se=/[+-]?\d+/,le=/Z|[+-]\d\d:?\d\d/gi,ce=/Z|[+-]\d\d(?::?\d\d)?/gi,ue=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function de(e,a,n){pe[e]=T(a)?a:function(e,t){return e&&n?n:a}}function me(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var pe={},fe={};function he(e,a){var t,n=a;for("string"==typeof e&&(e=[e]),u(a)&&(n=function(e,t){t[a]=Y(e)}),t=0;t<e.length;t++)fe[e[t]]=n}function ge(e,o){he(e,function(e,t,a,n){a._w=a._w||{},o(e,a._w,a,n)})}var ve,ye=0,Ce=1,_e=2,Ae=3,Ee=4,Pe=5,be=6,Te=7,we=8;function Se(e,t){if(isNaN(e)||isNaN(t))return NaN;var a=(t%12+12)%12;return e+=(t-a)/12,1==a?W(e)?29:28:31-a%7%2}ve=Array.prototype.indexOf||function(e){for(var t=0;t<this.length;++t)if(this[t]===e)return t;return-1},D("M",["MM",2],"Mo",function(){return this.month()+1}),D("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),D("MMMM",0,0,function(e){return this.localeData().months(this,e)}),H("month","M"),F("month",8),de("M",ee),de("MM",ee,Z),de("MMM",function(e,t){return t.monthsShortRegex(e)}),de("MMMM",function(e,t){return t.monthsRegex(e)}),he(["M","MM"],function(e,t){t[Ce]=Y(e)-1}),he(["MMM","MMMM"],function(e,t,a,n){n=a._locale.monthsParse(e,n,a._strict);null!=n?t[Ce]=n:v(a).invalidMonth=e});var Me="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ie="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Re=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,ke=ue,Oe=ue;function Ne(e,t){var a;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=Y(t);else if(!u(t=e.localeData().monthsParse(t)))return e;return a=Math.min(e.date(),Se(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,a),e}function De(e){return null!=e?(Ne(this,e),f.updateOffset(this,!0),this):V(this,"Month")}function Le(){function e(e,t){return t.length-e.length}for(var t,a=[],n=[],o=[],r=0;r<12;r++)t=g([2e3,r]),a.push(this.monthsShort(t,"")),n.push(this.months(t,"")),o.push(this.months(t,"")),o.push(this.monthsShort(t,""));for(a.sort(e),n.sort(e),o.sort(e),r=0;r<12;r++)a[r]=me(a[r]),n[r]=me(n[r]);for(r=0;r<24;r++)o[r]=me(o[r]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+a.join("|")+")","i")}function xe(e){return W(e)?366:365}D("Y",0,0,function(){var e=this.year();return e<=9999?M(e,4):"+"+e}),D(0,["YY",2],0,function(){return this.year()%100}),D(0,["YYYY",4],0,"year"),D(0,["YYYYY",5],0,"year"),D(0,["YYYYYY",6,!0],0,"year"),H("year","y"),F("year",1),de("Y",se),de("YY",ee,Z),de("YYYY",oe,X),de("YYYYY",re,Q),de("YYYYYY",re,Q),he(["YYYYY","YYYYYY"],ye),he("YYYY",function(e,t){t[ye]=2===e.length?f.parseTwoDigitYear(e):Y(e)}),he("YY",function(e,t){t[ye]=f.parseTwoDigitYear(e)}),he("Y",function(e,t){t[ye]=parseInt(e,10)}),f.parseTwoDigitYear=function(e){return Y(e)+(68<Y(e)?1900:2e3)};var Ue=q("FullYear",!0);function He(e){var t;return e<100&&0<=e?((t=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,t)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function je(e,t,a){a=7+t-a;return a-(7+He(e,0,a).getUTCDay()-t)%7-1}function ze(e,t,a,n,o){var r,o=1+7*(t-1)+(7+a-n)%7+je(e,n,o),o=o<=0?xe(r=e-1)+o:o>xe(e)?(r=e+1,o-xe(e)):(r=e,o);return{year:r,dayOfYear:o}}function Be(e,t,a){var n,o,r=je(e.year(),t,a),r=Math.floor((e.dayOfYear()-r-1)/7)+1;return r<1?n=r+Fe(o=e.year()-1,t,a):r>Fe(e.year(),t,a)?(n=r-Fe(e.year(),t,a),o=e.year()+1):(o=e.year(),n=r),{week:n,year:o}}function Fe(e,t,a){var n=je(e,t,a),a=je(e+1,t,a);return(xe(e)-n+a)/7}function We(e,t){return e.slice(t,7).concat(e.slice(0,t))}D("w",["ww",2],"wo","week"),D("W",["WW",2],"Wo","isoWeek"),H("week","w"),H("isoWeek","W"),F("week",5),F("isoWeek",5),de("w",ee),de("ww",ee,Z),de("W",ee),de("WW",ee,Z),ge(["w","ww","W","WW"],function(e,t,a,n){t[n.substr(0,1)]=Y(e)}),D("d",0,"do","day"),D("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),D("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),D("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),D("e",0,0,"weekday"),D("E",0,0,"isoWeekday"),H("day","d"),H("weekday","e"),H("isoWeekday","E"),F("day",11),F("weekday",11),F("isoWeekday",11),de("d",ee),de("e",ee),de("E",ee),de("dd",function(e,t){return t.weekdaysMinRegex(e)}),de("ddd",function(e,t){return t.weekdaysShortRegex(e)}),de("dddd",function(e,t){return t.weekdaysRegex(e)}),ge(["dd","ddd","dddd"],function(e,t,a,n){n=a._locale.weekdaysParse(e,n,a._strict);null!=n?t.d=n:v(a).invalidWeekday=e}),ge(["d","e","E"],function(e,t,a,n){t[n]=Y(e)});var Ge="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ye="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),qe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ve=ue,Je=ue,Ke=ue;function Ze(){function e(e,t){return t.length-e.length}for(var t,a,n,o=[],r=[],i=[],s=[],l=0;l<7;l++)n=g([2e3,1]).day(l),t=me(this.weekdaysMin(n,"")),a=me(this.weekdaysShort(n,"")),n=me(this.weekdays(n,"")),o.push(t),r.push(a),i.push(n),s.push(t),s.push(a),s.push(n);o.sort(e),r.sort(e),i.sort(e),s.sort(e),this._weekdaysRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function $e(){return this.hours()%12||12}function Xe(e,t){D(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Qe(e,t){return t._meridiemParse}D("H",["HH",2],0,"hour"),D("h",["hh",2],0,$e),D("k",["kk",2],0,function(){return this.hours()||24}),D("hmm",0,0,function(){return""+$e.apply(this)+M(this.minutes(),2)}),D("hmmss",0,0,function(){return""+$e.apply(this)+M(this.minutes(),2)+M(this.seconds(),2)}),D("Hmm",0,0,function(){return""+this.hours()+M(this.minutes(),2)}),D("Hmmss",0,0,function(){return""+this.hours()+M(this.minutes(),2)+M(this.seconds(),2)}),Xe("a",!0),Xe("A",!1),H("hour","h"),F("hour",13),de("a",Qe),de("A",Qe),de("H",ee),de("h",ee),de("k",ee),de("HH",ee,Z),de("hh",ee,Z),de("kk",ee,Z),de("hmm",te),de("hmmss",ae),de("Hmm",te),de("Hmmss",ae),he(["H","HH"],Ae),he(["k","kk"],function(e,t,a){e=Y(e);t[Ae]=24===e?0:e}),he(["a","A"],function(e,t,a){a._isPm=a._locale.isPM(e),a._meridiem=e}),he(["h","hh"],function(e,t,a){t[Ae]=Y(e),v(a).bigHour=!0}),he("hmm",function(e,t,a){var n=e.length-2;t[Ae]=Y(e.substr(0,n)),t[Ee]=Y(e.substr(n)),v(a).bigHour=!0}),he("hmmss",function(e,t,a){var n=e.length-4,o=e.length-2;t[Ae]=Y(e.substr(0,n)),t[Ee]=Y(e.substr(n,2)),t[Pe]=Y(e.substr(o)),v(a).bigHour=!0}),he("Hmm",function(e,t,a){var n=e.length-2;t[Ae]=Y(e.substr(0,n)),t[Ee]=Y(e.substr(n))}),he("Hmmss",function(e,t,a){var n=e.length-4,o=e.length-2;t[Ae]=Y(e.substr(0,n)),t[Ee]=Y(e.substr(n,2)),t[Pe]=Y(e.substr(o))});var et,tt=q("Hours",!0),at={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Me,monthsShort:Ie,week:{dow:0,doy:6},weekdays:Ge,weekdaysMin:qe,weekdaysShort:Ye,meridiemParse:/[ap]\.?m?\.?/i},nt={},ot={};function rt(e){return e&&e.toLowerCase().replace("_","-")}function it(e){var t;if(void 0===nt[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=et._abbr,require("./locale/"+e),st(t)}catch(t){nt[e]=null}return nt[e]}function st(e,t){return e&&((t=c(t)?ct(e):lt(e,t))?et=t:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),et._abbr}function lt(e,t){if(null===t)return delete nt[e],null;var a,n=at;if(t.abbr=e,null!=nt[e])b("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=nt[e]._config;else if(null!=t.parentLocale)if(null!=nt[t.parentLocale])n=nt[t.parentLocale]._config;else{if(null==(a=it(t.parentLocale)))return ot[t.parentLocale]||(ot[t.parentLocale]=[]),ot[t.parentLocale].push({name:e,config:t}),null;n=a._config}return nt[e]=new S(w(n,t)),ot[e]&&ot[e].forEach(function(e){lt(e.name,e.config)}),st(e),nt[e]}function ct(e){var t;if(!(e=e&&e._locale&&e._locale._abbr?e._locale._abbr:e))return et;if(!i(e)){if(t=it(e))return t;e=[e]}return function(e){for(var t,a,n,o,r=0;r<e.length;){for(t=(o=rt(e[r]).split("-")).length,a=(a=rt(e[r+1]))?a.split("-"):null;0<t;){if(n=it(o.slice(0,t).join("-")))return n;if(a&&a.length>=t&&function(e,t){for(var a=Math.min(e.length,t.length),n=0;n<a;n+=1)if(e[n]!==t[n])return n;return a}(o,a)>=t-1)break;t--}r++}return et}(e)}function ut(e){var t=e._a;return t&&-2===v(e).overflow&&(t=t[Ce]<0||11<t[Ce]?Ce:t[_e]<1||t[_e]>Se(t[ye],t[Ce])?_e:t[Ae]<0||24<t[Ae]||24===t[Ae]&&(0!==t[Ee]||0!==t[Pe]||0!==t[be])?Ae:t[Ee]<0||59<t[Ee]?Ee:t[Pe]<0||59<t[Pe]?Pe:t[be]<0||999<t[be]?be:-1,v(e)._overflowDayOfYear&&(t<ye||_e<t)&&(t=_e),v(e)._overflowWeeks&&-1===t&&(t=Te),v(e)._overflowWeekday&&-1===t&&(t=we),v(e).overflow=t),e}var dt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pt=/Z|[+-]\d\d(?::?\d\d)?/,ft=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],ht=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],gt=/^\/?Date\((-?\d+)/i,vt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,yt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Ct(e){var t,a,n,o,r,i,s=e._i,l=dt.exec(s)||mt.exec(s);if(l){for(v(e).iso=!0,t=0,a=ft.length;t<a;t++)if(ft[t][1].exec(l[1])){o=ft[t][0],n=!1!==ft[t][2];break}if(null==o)return e._isValid=!1;if(l[3]){for(t=0,a=ht.length;t<a;t++)if(ht[t][1].exec(l[3])){r=(l[2]||" ")+ht[t][0];break}if(null==r)return e._isValid=!1}if(!n&&null!=r)return e._isValid=!1;if(l[4]){if(!pt.exec(l[4]))return e._isValid=!1;i="Z"}e._f=o+(r||"")+(i||""),Pt(e)}else e._isValid=!1}function _t(e){var t,a,n,o,r,i,s=vt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));s?(t=s[4],a=s[3],n=s[2],o=s[5],r=s[6],i=s[7],r=[(t=parseInt(t,10))<=49?2e3+t:t<=999?1900+t:t,Ie.indexOf(a),parseInt(n,10),parseInt(o,10),parseInt(r,10)],i&&r.push(parseInt(i,10)),o=n=r,i=e,(r=s[1])&&Ye.indexOf(r)!==new Date(o[0],o[1],o[2]).getDay()?(v(i).weekdayMismatch=!0,i._isValid=!1):(e._a=n,e._tzm=function(e,t,a){if(e)return yt[e];if(t)return 0;t=parseInt(a,10),a=t%100;return(t-a)/100*60+a}(s[8],s[9],s[10]),e._d=He.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),v(e).rfc2822=!0)):e._isValid=!1}function At(e,t,a){return null!=e?e:null!=t?t:a}function Et(e){var t,a,n,o,r,i,s,l,c,u,d,m,p=[];if(!e._d){for(r=e,m=new Date(f.now()),a=r._useUTC?[m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()]:[m.getFullYear(),m.getMonth(),m.getDate()],e._w&&null==e._a[_e]&&null==e._a[Ce]&&(null!=(r=(o=e)._w).GG||null!=r.W||null!=r.E?(c=1,u=4,i=At(r.GG,o._a[ye],Be(wt(),1,4).year),s=At(r.W,1),((l=At(r.E,1))<1||7<l)&&(d=!0)):(c=o._locale._week.dow,u=o._locale._week.doy,m=Be(wt(),c,u),i=At(r.gg,o._a[ye],m.year),s=At(r.w,m.week),null!=r.d?((l=r.d)<0||6<l)&&(d=!0):null!=r.e?(l=r.e+c,(r.e<0||6<r.e)&&(d=!0)):l=c),s<1||s>Fe(i,c,u)?v(o)._overflowWeeks=!0:null!=d?v(o)._overflowWeekday=!0:(u=ze(i,s,l,c,u),o._a[ye]=u.year,o._dayOfYear=u.dayOfYear)),null!=e._dayOfYear&&(n=At(e._a[ye],a[ye]),(e._dayOfYear>xe(n)||0===e._dayOfYear)&&(v(e)._overflowDayOfYear=!0),n=He(n,0,e._dayOfYear),e._a[Ce]=n.getUTCMonth(),e._a[_e]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=p[t]=a[t];for(;t<7;t++)e._a[t]=p[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Ae]&&0===e._a[Ee]&&0===e._a[Pe]&&0===e._a[be]&&(e._nextDay=!0,e._a[Ae]=0),e._d=(e._useUTC?He:function(e,t,a,n,o,r,i){var s;return e<100&&0<=e?(s=new Date(e+400,t,a,n,o,r,i),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,a,n,o,r,i),s}).apply(null,p),n=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ae]=24),e._w&&void 0!==e._w.d&&e._w.d!==n&&(v(e).weekdayMismatch=!0)}}function Pt(e){if(e._f!==f.ISO_8601)if(e._f!==f.RFC_2822){e._a=[],v(e).empty=!0;for(var t,a,n,o=""+e._i,r=o.length,i=0,s=x(e._f,e._locale).match(R)||[],l=0;l<s.length;l++)a=s[l],(t=(o.match((m=e,p(pe,d=a)?pe[d](m._strict,m._locale):new RegExp(me(d.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,a,n,o){return t||a||n||o})))))||[])[0])&&(0<(n=o.substr(0,o.indexOf(t))).length&&v(e).unusedInput.push(n),o=o.slice(o.indexOf(t)+t.length),i+=t.length),N[a]?(t?v(e).empty=!1:v(e).unusedTokens.push(a),m=a,d=e,null!=(n=t)&&p(fe,m)&&fe[m](n,d._a,d,m)):e._strict&&!t&&v(e).unusedTokens.push(a);v(e).charsLeftOver=r-i,0<o.length&&v(e).unusedInput.push(o),e._a[Ae]<=12&&!0===v(e).bigHour&&0<e._a[Ae]&&(v(e).bigHour=void 0),v(e).parsedDateParts=e._a.slice(0),v(e).meridiem=e._meridiem,e._a[Ae]=(c=e._locale,u=e._a[Ae],null==(r=e._meridiem)?u:null!=c.meridiemHour?c.meridiemHour(u,r):(null!=c.isPM&&((r=c.isPM(r))&&u<12&&(u+=12),r||12!==u||(u=0)),u)),null!==(u=v(e).era)&&(e._a[ye]=e._locale.erasConvertYear(u,e._a[ye])),Et(e),ut(e)}else _t(e);else Ct(e);var c,u,d,m}function bt(e){var t,a,n,o=e._i,r=e._f;return e._locale=e._locale||ct(e._l),null===o||void 0===r&&""===o?C({nullInput:!0}):("string"==typeof o&&(e._i=o=e._locale.preparse(o)),E(o)?new A(ut(o)):(d(o)?e._d=o:i(r)?function(e){var t,a,n,o,r,i,s=!1;if(0===e._f.length)return v(e).invalidFormat=!0,e._d=new Date(NaN);for(o=0;o<e._f.length;o++)r=0,i=!1,t=_({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],Pt(t),y(t)&&(i=!0),r+=v(t).charsLeftOver,r+=10*v(t).unusedTokens.length,v(t).score=r,s?r<n&&(n=r,a=t):(null==n||r<n||i)&&(n=r,a=t,i&&(s=!0));h(e,a||t)}(e):r?Pt(e):c(o=(t=e)._i)?t._d=new Date(f.now()):d(o)?t._d=new Date(o.valueOf()):"string"==typeof o?(a=t,null===(n=gt.exec(a._i))?(Ct(a),!1===a._isValid&&(delete a._isValid,_t(a),!1===a._isValid&&(delete a._isValid,a._strict?a._isValid=!1:f.createFromInputFallback(a)))):a._d=new Date(+n[1])):i(o)?(t._a=m(o.slice(0),function(e){return parseInt(e,10)}),Et(t)):s(o)?(r=t)._d||(n=void 0===(a=z(r._i)).day?a.date:a.day,r._a=m([a.year,a.month,n,a.hour,a.minute,a.second,a.millisecond],function(e){return e&&parseInt(e,10)}),Et(r)):u(o)?t._d=new Date(o):f.createFromInputFallback(t),y(e)||(e._d=null),e))}function Tt(e,t,a,n,o){var r={};return!0!==t&&!1!==t||(n=t,t=void 0),!0!==a&&!1!==a||(n=a,a=void 0),(s(e)&&l(e)||i(e)&&0===e.length)&&(e=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=o,r._l=a,r._i=e,r._f=t,r._strict=n,(r=new A(ut(bt(r))))._nextDay&&(r.add(1,"d"),r._nextDay=void 0),r}function wt(e,t,a,n){return Tt(e,t,a,n,!1)}f.createFromInputFallback=a("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),f.ISO_8601=function(){},f.RFC_2822=function(){};var St=a("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=wt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:C()}),Mt=a("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=wt.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:C()});function It(e,t){var a,n;if(!(t=1===t.length&&i(t[0])?t[0]:t).length)return wt();for(a=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](a)||(a=t[n]);return a}var Rt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function kt(e){var t=z(e),a=t.year||0,n=t.quarter||0,o=t.month||0,r=t.week||t.isoWeek||0,i=t.day||0,s=t.hour||0,l=t.minute||0,c=t.second||0,e=t.millisecond||0;this._isValid=function(e){var t,a,n=!1;for(t in e)if(p(e,t)&&(-1===ve.call(Rt,t)||null!=e[t]&&isNaN(e[t])))return!1;for(a=0;a<Rt.length;++a)if(e[Rt[a]]){if(n)return!1;parseFloat(e[Rt[a]])!==Y(e[Rt[a]])&&(n=!0)}return!0}(t),this._milliseconds=+e+1e3*c+6e4*l+1e3*s*60*60,this._days=+i+7*r,this._months=+o+3*n+12*a,this._data={},this._locale=ct(),this._bubble()}function Ot(e){return e instanceof kt}function Nt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Dt(e,a){D(e,0,0,function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+M(~~(e/60),2)+a+M(~~e%60,2)})}Dt("Z",":"),Dt("ZZ",""),de("Z",ce),de("ZZ",ce),he(["Z","ZZ"],function(e,t,a){a._useUTC=!0,a._tzm=xt(ce,e)});var Lt=/([\+\-]|\d\d)/gi;function xt(e,t){var t=(t||"").match(e);return null===t?null:0===(t=60*(e=((t[t.length-1]||[])+"").match(Lt)||["-",0,0])[1]+Y(e[2]))?0:"+"===e[0]?t:-t}function Ut(e,t){var a;return t._isUTC?(a=t.clone(),t=(E(e)||d(e)?e:wt(e)).valueOf()-a.valueOf(),a._d.setTime(a._d.valueOf()+t),f.updateOffset(a,!1),a):wt(e).local()}function Ht(e){return-Math.round(e._d.getTimezoneOffset())}function jt(){return!!this.isValid()&&this._isUTC&&0===this._offset}f.updateOffset=function(){};var zt=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Bt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Ft(e,t){var a,n,o=e,r=null;return Ot(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:u(e)||!isNaN(+e)?(o={},t?o[t]=+e:o.milliseconds=+e):(r=zt.exec(e))?(a="-"===r[1]?-1:1,o={y:0,d:Y(r[_e])*a,h:Y(r[Ae])*a,m:Y(r[Ee])*a,s:Y(r[Pe])*a,ms:Y(Nt(1e3*r[be]))*a}):(r=Bt.exec(e))?(a="-"===r[1]?-1:1,o={y:Wt(r[2],a),M:Wt(r[3],a),w:Wt(r[4],a),d:Wt(r[5],a),h:Wt(r[6],a),m:Wt(r[7],a),s:Wt(r[8],a)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(r=wt(o.from),a=wt(o.to),n=r.isValid()&&a.isValid()?(a=Ut(a,r),r.isBefore(a)?n=Gt(r,a):((n=Gt(a,r)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0},(o={}).ms=n.milliseconds,o.M=n.months),o=new kt(o),Ot(e)&&p(e,"_locale")&&(o._locale=e._locale),Ot(e)&&p(e,"_isValid")&&(o._isValid=e._isValid),o}function Wt(e,t){e=e&&parseFloat(e.replace(",","."));return(isNaN(e)?0:e)*t}function Gt(e,t){var a={};return a.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(a.months,"M").isAfter(t)&&--a.months,a.milliseconds=t-e.clone().add(a.months,"M"),a}function Yt(n,o){return function(e,t){var a;return null===t||isNaN(+t)||(b(o,"moment()."+o+"(period, number) is deprecated. Please use moment()."+o+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),a=e,e=t,t=a),qt(this,Ft(e,t),n),this}}function qt(e,t,a,n){var o=t._milliseconds,r=Nt(t._days),t=Nt(t._months);e.isValid()&&(n=null==n||n,t&&Ne(e,V(e,"Month")+t*a),r&&J(e,"Date",V(e,"Date")+r*a),o&&e._d.setTime(e._d.valueOf()+o*a),n&&f.updateOffset(e,r||t))}Ft.fn=kt.prototype,Ft.invalid=function(){return Ft(NaN)};var Vt=Yt(1,"add"),ue=Yt(-1,"subtract");function Jt(e){return"string"==typeof e||e instanceof String}function Kt(e,t){if(e.date()<t.date())return-Kt(t,e);var a=12*(t.year()-e.year())+(t.month()-e.month()),n=e.clone().add(a,"months");return-(a+(t-n<0?(t-n)/(n-e.clone().add(a-1,"months")):(t-n)/(e.clone().add(1+a,"months")-n)))||0}function Zt(e){return void 0===e?this._locale._abbr:(null!=(e=ct(e))&&(this._locale=e),this)}f.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",f.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";te=a("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function $t(){return this._locale}function Xt(e,t){return(e%t+t)%t}function Qt(e,t,a){return e<100&&0<=e?new Date(e+400,t,a)-126227808e5:new Date(e,t,a).valueOf()}function ea(e,t,a){return e<100&&0<=e?Date.UTC(e+400,t,a)-126227808e5:Date.UTC(e,t,a)}function ta(e,t){return t.erasAbbrRegex(e)}function aa(){for(var e=[],t=[],a=[],n=[],o=this.eras(),r=0,i=o.length;r<i;++r)t.push(me(o[r].name)),e.push(me(o[r].abbr)),a.push(me(o[r].narrow)),n.push(me(o[r].name)),n.push(me(o[r].abbr)),n.push(me(o[r].narrow));this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+a.join("|")+")","i")}function na(e,t){D(0,[e,e.length],0,t)}function oa(e,t,a,n,o){var r;return null==e?Be(this,n,o).year:((r=Fe(e,n,o))<t&&(t=r),function(e,t,a,n,o){o=ze(e,t,a,n,o),o=He(o.year,0,o.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}.call(this,e,t,a,n,o))}D("N",0,0,"eraAbbr"),D("NN",0,0,"eraAbbr"),D("NNN",0,0,"eraAbbr"),D("NNNN",0,0,"eraName"),D("NNNNN",0,0,"eraNarrow"),D("y",["y",1],"yo","eraYear"),D("y",["yy",2],0,"eraYear"),D("y",["yyy",3],0,"eraYear"),D("y",["yyyy",4],0,"eraYear"),de("N",ta),de("NN",ta),de("NNN",ta),de("NNNN",function(e,t){return t.erasNameRegex(e)}),de("NNNNN",function(e,t){return t.erasNarrowRegex(e)}),he(["N","NN","NNN","NNNN","NNNNN"],function(e,t,a,n){n=a._locale.erasParse(e,n,a._strict);n?v(a).era=n:v(a).invalidEra=e}),de("y",ie),de("yy",ie),de("yyy",ie),de("yyyy",ie),de("yo",function(e,t){return t._eraYearOrdinalRegex||ie}),he(["y","yy","yyy","yyyy"],ye),he(["yo"],function(e,t,a,n){var o;a._locale._eraYearOrdinalRegex&&(o=e.match(a._locale._eraYearOrdinalRegex)),a._locale.eraYearOrdinalParse?t[ye]=a._locale.eraYearOrdinalParse(e,o):t[ye]=parseInt(e,10)}),D(0,["gg",2],0,function(){return this.weekYear()%100}),D(0,["GG",2],0,function(){return this.isoWeekYear()%100}),na("gggg","weekYear"),na("ggggg","weekYear"),na("GGGG","isoWeekYear"),na("GGGGG","isoWeekYear"),H("weekYear","gg"),H("isoWeekYear","GG"),F("weekYear",1),F("isoWeekYear",1),de("G",se),de("g",se),de("GG",ee,Z),de("gg",ee,Z),de("GGGG",oe,X),de("gggg",oe,X),de("GGGGG",re,Q),de("ggggg",re,Q),ge(["gggg","ggggg","GGGG","GGGGG"],function(e,t,a,n){t[n.substr(0,2)]=Y(e)}),ge(["gg","GG"],function(e,t,a,n){t[n]=f.parseTwoDigitYear(e)}),D("Q",0,"Qo","quarter"),H("quarter","Q"),F("quarter",7),de("Q",K),he("Q",function(e,t){t[Ce]=3*(Y(e)-1)}),D("D",["DD",2],"Do","date"),H("date","D"),F("date",9),de("D",ee),de("DD",ee,Z),de("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),he(["D","DD"],_e),he("Do",function(e,t){t[_e]=Y(e.match(ee)[0])});ae=q("Date",!0);D("DDD",["DDDD",3],"DDDo","dayOfYear"),H("dayOfYear","DDD"),F("dayOfYear",4),de("DDD",ne),de("DDDD",$),he(["DDD","DDDD"],function(e,t,a){a._dayOfYear=Y(e)}),D("m",["mm",2],0,"minute"),H("minute","m"),F("minute",14),de("m",ee),de("mm",ee,Z),he(["m","mm"],Ee);Me=q("Minutes",!1);D("s",["ss",2],0,"second"),H("second","s"),F("second",15),de("s",ee),de("ss",ee,Z),he(["s","ss"],Pe);var ra,Ge=q("Seconds",!1);for(D("S",0,0,function(){return~~(this.millisecond()/100)}),D(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),D(0,["SSS",3],0,"millisecond"),D(0,["SSSS",4],0,function(){return 10*this.millisecond()}),D(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),D(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),D(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),D(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),D(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),H("millisecond","ms"),F("millisecond",16),de("S",ne,K),de("SS",ne,Z),de("SSS",ne,$),ra="SSSS";ra.length<=9;ra+="S")de(ra,ie);function ia(e,t){t[be]=Y(1e3*("0."+e))}for(ra="S";ra.length<=9;ra+="S")he(ra,ia);qe=q("Milliseconds",!1),D("z",0,0,"zoneAbbr"),D("zz",0,0,"zoneName");oe=A.prototype;function sa(e){return e}oe.add=Vt,oe.calendar=function(e,t){var a,n,o;1===arguments.length&&(arguments[0]?E(r=arguments[0])||d(r)||Jt(r)||u(r)||(n=i(a=r),o=!1,n&&(o=0===a.filter(function(e){return!u(e)&&Jt(a)}).length),n&&o)||function(e){for(var t=s(e)&&!l(e),a=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],o=0;o<n.length;o+=1)a=a||p(e,n[o]);return t&&a}(r)||null==r?(e=arguments[0],t=void 0):function(e){for(var t=s(e)&&!l(e),a=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],o=0;o<n.length;o+=1)a=a||p(e,n[o]);return t&&a}(arguments[0])&&(t=arguments[0],e=void 0):t=e=void 0);var r=e||wt(),e=Ut(r,this).startOf("day"),e=f.calendarFormat(this,e)||"sameElse",t=t&&(T(t[e])?t[e].call(this,r):t[e]);return this.format(t||this.localeData().calendar(e,this,wt(r)))},oe.clone=function(){return new A(this)},oe.diff=function(e,t,a){var n,o,r;if(!this.isValid())return NaN;if(!(n=Ut(e,this)).isValid())return NaN;switch(o=6e4*(n.utcOffset()-this.utcOffset()),t=j(t)){case"year":r=Kt(this,n)/12;break;case"month":r=Kt(this,n);break;case"quarter":r=Kt(this,n)/3;break;case"second":r=(this-n)/1e3;break;case"minute":r=(this-n)/6e4;break;case"hour":r=(this-n)/36e5;break;case"day":r=(this-n-o)/864e5;break;case"week":r=(this-n-o)/6048e5;break;default:r=this-n}return a?r:G(r)},oe.endOf=function(e){var t,a;if(void 0===(e=j(e))||"millisecond"===e||!this.isValid())return this;switch(a=this._isUTC?ea:Qt,e){case"year":t=a(this.year()+1,0,1)-1;break;case"quarter":t=a(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=a(this.year(),this.month()+1,1)-1;break;case"week":t=a(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=a(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-Xt(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-Xt(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-Xt(t,1e3)-1}return this._d.setTime(t),f.updateOffset(this,!0),this},oe.format=function(e){e=e||(this.isUtc()?f.defaultFormatUtc:f.defaultFormat);e=L(this,e);return this.localeData().postformat(e)},oe.from=function(e,t){return this.isValid()&&(E(e)&&e.isValid()||wt(e).isValid())?Ft({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},oe.fromNow=function(e){return this.from(wt(),e)},oe.to=function(e,t){return this.isValid()&&(E(e)&&e.isValid()||wt(e).isValid())?Ft({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},oe.toNow=function(e){return this.to(wt(),e)},oe.get=function(e){return T(this[e=j(e)])?this[e]():this},oe.invalidAt=function(){return v(this).overflow},oe.isAfter=function(e,t){e=E(e)?e:wt(e);return!(!this.isValid()||!e.isValid())&&("millisecond"===(t=j(t)||"millisecond")?this.valueOf()>e.valueOf():e.valueOf()<this.clone().startOf(t).valueOf())},oe.isBefore=function(e,t){e=E(e)?e:wt(e);return!(!this.isValid()||!e.isValid())&&("millisecond"===(t=j(t)||"millisecond")?this.valueOf()<e.valueOf():this.clone().endOf(t).valueOf()<e.valueOf())},oe.isBetween=function(e,t,a,n){e=E(e)?e:wt(e),t=E(t)?t:wt(t);return!!(this.isValid()&&e.isValid()&&t.isValid())&&("("===(n=n||"()")[0]?this.isAfter(e,a):!this.isBefore(e,a))&&(")"===n[1]?this.isBefore(t,a):!this.isAfter(t,a))},oe.isSame=function(e,t){var e=E(e)?e:wt(e);return!(!this.isValid()||!e.isValid())&&("millisecond"===(t=j(t)||"millisecond")?this.valueOf()===e.valueOf():(e=e.valueOf(),this.clone().startOf(t).valueOf()<=e&&e<=this.clone().endOf(t).valueOf()))},oe.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},oe.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},oe.isValid=function(){return y(this)},oe.lang=te,oe.locale=Zt,oe.localeData=$t,oe.max=Mt,oe.min=St,oe.parsingFlags=function(){return h({},v(this))},oe.set=function(e,t){if("object"==typeof e)for(var a=function(e){var t,a=[];for(t in e)p(e,t)&&a.push({unit:t,priority:B[t]});return a.sort(function(e,t){return e.priority-t.priority}),a}(e=z(e)),n=0;n<a.length;n++)this[a[n].unit](e[a[n].unit]);else if(T(this[e=j(e)]))return this[e](t);return this},oe.startOf=function(e){var t,a;if(void 0===(e=j(e))||"millisecond"===e||!this.isValid())return this;switch(a=this._isUTC?ea:Qt,e){case"year":t=a(this.year(),0,1);break;case"quarter":t=a(this.year(),this.month()-this.month()%3,1);break;case"month":t=a(this.year(),this.month(),1);break;case"week":t=a(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=a(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=a(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=Xt(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=Xt(t,6e4);break;case"second":t=this._d.valueOf(),t-=Xt(t,1e3)}return this._d.setTime(t),f.updateOffset(this,!0),this},oe.subtract=ue,oe.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]},oe.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}},oe.toDate=function(){return new Date(this.valueOf())},oe.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,e=t?this.clone().utc():this;return e.year()<0||9999<e.year()?L(e,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):T(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",L(e,"Z")):L(e,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},oe.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t="moment",a="";return this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",a="Z"),e="["+t+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",this.format(e+t+"-MM-DD[T]HH:mm:ss.SSS"+(a+'[")]'))},"undefined"!=typeof Symbol&&null!=Symbol.for&&(oe[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),oe.toJSON=function(){return this.isValid()?this.toISOString():null},oe.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},oe.unix=function(){return Math.floor(this.valueOf()/1e3)},oe.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},oe.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},oe.eraName=function(){for(var e,t=this.localeData().eras(),a=0,n=t.length;a<n;++a){if(e=this.clone().startOf("day").valueOf(),t[a].since<=e&&e<=t[a].until)return t[a].name;if(t[a].until<=e&&e<=t[a].since)return t[a].name}return""},oe.eraNarrow=function(){for(var e,t=this.localeData().eras(),a=0,n=t.length;a<n;++a){if(e=this.clone().startOf("day").valueOf(),t[a].since<=e&&e<=t[a].until)return t[a].narrow;if(t[a].until<=e&&e<=t[a].since)return t[a].narrow}return""},oe.eraAbbr=function(){for(var e,t=this.localeData().eras(),a=0,n=t.length;a<n;++a){if(e=this.clone().startOf("day").valueOf(),t[a].since<=e&&e<=t[a].until)return t[a].abbr;if(t[a].until<=e&&e<=t[a].since)return t[a].abbr}return""},oe.eraYear=function(){for(var e,t,a=this.localeData().eras(),n=0,o=a.length;n<o;++n)if(e=a[n].since<=a[n].until?1:-1,t=this.clone().startOf("day").valueOf(),a[n].since<=t&&t<=a[n].until||a[n].until<=t&&t<=a[n].since)return(this.year()-f(a[n].since).year())*e+a[n].offset;return this.year()},oe.year=Ue,oe.isLeapYear=function(){return W(this.year())},oe.weekYear=function(e){return oa.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},oe.isoWeekYear=function(e){return oa.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},oe.quarter=oe.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},oe.month=De,oe.daysInMonth=function(){return Se(this.year(),this.month())},oe.week=oe.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},oe.isoWeek=oe.isoWeeks=function(e){var t=Be(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},oe.weeksInYear=function(){var e=this.localeData()._week;return Fe(this.year(),e.dow,e.doy)},oe.weeksInWeekYear=function(){var e=this.localeData()._week;return Fe(this.weekYear(),e.dow,e.doy)},oe.isoWeeksInYear=function(){return Fe(this.year(),1,4)},oe.isoWeeksInISOWeekYear=function(){return Fe(this.isoWeekYear(),1,4)},oe.date=ae,oe.day=oe.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,a,n=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,a=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=a.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-n,"d")):n},oe.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},oe.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null==e)return this.day()||7;var t=(t=e,e=this.localeData(),"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t);return this.day(this.day()%7?t:t-7)},oe.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},oe.hour=oe.hours=tt,oe.minute=oe.minutes=Me,oe.second=oe.seconds=Ge,oe.millisecond=oe.milliseconds=qe,oe.utcOffset=function(e,t,a){var n,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null==e)return this._isUTC?o:Ht(this);if("string"==typeof e){if(null===(e=xt(ce,e)))return this}else Math.abs(e)<16&&!a&&(e*=60);return!this._isUTC&&t&&(n=Ht(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),o!==e&&(!t||this._changeInProgress?qt(this,Ft(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,f.updateOffset(this,!0),this._changeInProgress=null)),this},oe.utc=function(e){return this.utcOffset(0,e)},oe.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Ht(this),"m")),this},oe.parseZone=function(){var e;return null!=this._tzm?this.utcOffset(this._tzm,!1,!0):"string"==typeof this._i&&(null!=(e=xt(le,this._i))?this.utcOffset(e):this.utcOffset(0,!0)),this},oe.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?wt(e).utcOffset():0,(this.utcOffset()-e)%60==0)},oe.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},oe.isLocal=function(){return!!this.isValid()&&!this._isUTC},oe.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},oe.isUtc=jt,oe.isUTC=jt,oe.zoneAbbr=function(){return this._isUTC?"UTC":""},oe.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},oe.dates=a("dates accessor is deprecated. Use date instead.",ae),oe.months=a("months accessor is deprecated. Use month instead",De),oe.years=a("years accessor is deprecated. Use year instead",Ue),oe.zone=a("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?(this.utcOffset(e="string"!=typeof e?-e:e,t),this):-this.utcOffset()}),oe.isDSTShifted=a("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!c(this._isDSTShifted))return this._isDSTShifted;var e,t={};return _(t,this),(t=bt(t))._a?(e=(t._isUTC?g:wt)(t._a),this._isDSTShifted=this.isValid()&&0<function(e,t){for(var a=Math.min(e.length,t.length),n=Math.abs(e.length-t.length),o=0,r=0;r<a;r++)Y(e[r])!==Y(t[r])&&o++;return o+n}(t._a,e.toArray())):this._isDSTShifted=!1,this._isDSTShifted});X=S.prototype;function la(e,t,a,n){var o=ct(),t=g().set(n,t);return o[a](t,e)}function ca(e,t,a){if(u(e)&&(t=e,e=void 0),e=e||"",null!=t)return la(e,t,a,"month");for(var n=[],o=0;o<12;o++)n[o]=la(e,o,a,"month");return n}function ua(e,t,a,n){"boolean"==typeof e?u(t)&&(a=t,t=void 0):(t=e,e=!1,u(a=t)&&(a=t,t=void 0)),t=t||"";var o,r=ct(),i=e?r._week.dow:0,s=[];if(null!=a)return la(t,(a+i)%7,n,"day");for(o=0;o<7;o++)s[o]=la(t,(o+i)%7,n,"day");return s}X.calendar=function(e,t,a){e=this._calendar[e]||this._calendar.sameElse;return T(e)?e.call(t,a):e},X.longDateFormat=function(e){var t=this._longDateFormat[e],a=this._longDateFormat[e.toUpperCase()];return t||!a?t:(this._longDateFormat[e]=a.match(R).map(function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e}).join(""),this._longDateFormat[e])},X.invalidDate=function(){return this._invalidDate},X.ordinal=function(e){return this._ordinal.replace("%d",e)},X.preparse=sa,X.postformat=sa,X.relativeTime=function(e,t,a,n){var o=this._relativeTime[a];return T(o)?o(e,t,a,n):o.replace(/%d/i,e)},X.pastFuture=function(e,t){e=this._relativeTime[0<e?"future":"past"];return T(e)?e(t):e.replace(/%s/i,t)},X.set=function(e){var t,a;for(a in e)p(e,a)&&(T(t=e[a])?this[a]=t:this["_"+a]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},X.eras=function(e,t){for(var a,n=this._eras||ct("en")._eras,o=0,r=n.length;o<r;++o)switch("string"==typeof n[o].since&&(a=f(n[o].since).startOf("day"),n[o].since=a.valueOf()),typeof n[o].until){case"undefined":n[o].until=1/0;break;case"string":a=f(n[o].until).startOf("day").valueOf(),n[o].until=a.valueOf()}return n},X.erasParse=function(e,t,a){var n,o,r,i,s,l=this.eras();for(e=e.toUpperCase(),n=0,o=l.length;n<o;++n)if(r=l[n].name.toUpperCase(),i=l[n].abbr.toUpperCase(),s=l[n].narrow.toUpperCase(),a)switch(t){case"N":case"NN":case"NNN":if(i===e)return l[n];break;case"NNNN":if(r===e)return l[n];break;case"NNNNN":if(s===e)return l[n]}else if(0<=[r,i,s].indexOf(e))return l[n]},X.erasConvertYear=function(e,t){var a=e.since<=e.until?1:-1;return void 0===t?f(e.since).year():f(e.since).year()+(t-e.offset)*a},X.erasAbbrRegex=function(e){return p(this,"_erasAbbrRegex")||aa.call(this),e?this._erasAbbrRegex:this._erasRegex},X.erasNameRegex=function(e){return p(this,"_erasNameRegex")||aa.call(this),e?this._erasNameRegex:this._erasRegex},X.erasNarrowRegex=function(e){return p(this,"_erasNarrowRegex")||aa.call(this),e?this._erasNarrowRegex:this._erasRegex},X.months=function(e,t){return e?(i(this._months)?this._months:this._months[(this._months.isFormat||Re).test(t)?"format":"standalone"])[e.month()]:i(this._months)?this._months:this._months.standalone},X.monthsShort=function(e,t){return e?(i(this._monthsShort)?this._monthsShort:this._monthsShort[Re.test(t)?"format":"standalone"])[e.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},X.monthsParse=function(e,t,a){var n,o;if(this._monthsParseExact)return function(e,t,a){var n,o,r,e=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)r=g([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(r,"").toLocaleLowerCase();return a?"MMM"===t?-1!==(o=ve.call(this._shortMonthsParse,e))?o:null:-1!==(o=ve.call(this._longMonthsParse,e))?o:null:"MMM"===t?-1!==(o=ve.call(this._shortMonthsParse,e))||-1!==(o=ve.call(this._longMonthsParse,e))?o:null:-1!==(o=ve.call(this._longMonthsParse,e))||-1!==(o=ve.call(this._shortMonthsParse,e))?o:null}.call(this,e,t,a);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(o=g([2e3,n]),a&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),a||this._monthsParse[n]||(o="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(o.replace(".",""),"i")),a&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(a&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!a&&this._monthsParse[n].test(e))return n}},X.monthsRegex=function(e){return this._monthsParseExact?(p(this,"_monthsRegex")||Le.call(this),e?this._monthsStrictRegex:this._monthsRegex):(p(this,"_monthsRegex")||(this._monthsRegex=Oe),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},X.monthsShortRegex=function(e){return this._monthsParseExact?(p(this,"_monthsRegex")||Le.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(p(this,"_monthsShortRegex")||(this._monthsShortRegex=ke),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},X.week=function(e){return Be(e,this._week.dow,this._week.doy).week},X.firstDayOfYear=function(){return this._week.doy},X.firstDayOfWeek=function(){return this._week.dow},X.weekdays=function(e,t){t=i(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?We(t,this._week.dow):e?t[e.day()]:t},X.weekdaysMin=function(e){return!0===e?We(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},X.weekdaysShort=function(e){return!0===e?We(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},X.weekdaysParse=function(e,t,a){var n,o;if(this._weekdaysParseExact)return function(e,t,a){var n,o,r,e=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)r=g([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(r,"").toLocaleLowerCase();return a?"dddd"===t?-1!==(o=ve.call(this._weekdaysParse,e))?o:null:"ddd"===t?-1!==(o=ve.call(this._shortWeekdaysParse,e))?o:null:-1!==(o=ve.call(this._minWeekdaysParse,e))?o:null:"dddd"===t?-1!==(o=ve.call(this._weekdaysParse,e))||-1!==(o=ve.call(this._shortWeekdaysParse,e))||-1!==(o=ve.call(this._minWeekdaysParse,e))?o:null:"ddd"===t?-1!==(o=ve.call(this._shortWeekdaysParse,e))||-1!==(o=ve.call(this._weekdaysParse,e))||-1!==(o=ve.call(this._minWeekdaysParse,e))?o:null:-1!==(o=ve.call(this._minWeekdaysParse,e))||-1!==(o=ve.call(this._weekdaysParse,e))||-1!==(o=ve.call(this._shortWeekdaysParse,e))?o:null}.call(this,e,t,a);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(o=g([2e3,1]).day(n),a&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(o,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(o,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(o,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(o="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[n]=new RegExp(o.replace(".",""),"i")),a&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(a&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(a&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!a&&this._weekdaysParse[n].test(e))return n}},X.weekdaysRegex=function(e){return this._weekdaysParseExact?(p(this,"_weekdaysRegex")||Ze.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(p(this,"_weekdaysRegex")||(this._weekdaysRegex=Ve),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},X.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(p(this,"_weekdaysRegex")||Ze.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(p(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Je),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},X.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(p(this,"_weekdaysRegex")||Ze.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(p(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ke),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},X.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},X.meridiem=function(e,t,a){return 11<e?a?"pm":"PM":a?"am":"AM"},st("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===Y(e%100/10)?"th":1==t?"st":2==t?"nd":3==t?"rd":"th")}}),f.lang=a("moment.lang is deprecated. Use moment.locale instead.",st),f.langData=a("moment.langData is deprecated. Use moment.localeData instead.",ct);var da=Math.abs;function ma(e,t,a,n){a=Ft(t,a);return e._milliseconds+=n*a._milliseconds,e._days+=n*a._days,e._months+=n*a._months,e._bubble()}function pa(e){return e<0?Math.floor(e):Math.ceil(e)}function fa(e){return 4800*e/146097}function ha(e){return 146097*e/4800}function ga(e){return function(){return this.as(e)}}re=ga("ms"),Q=ga("s"),K=ga("m"),Z=ga("h"),ne=ga("d"),$=ga("w"),Vt=ga("M"),Mt=ga("Q"),St=ga("y");function va(e){return function(){return this.isValid()?this._data[e]:NaN}}var ue=va("milliseconds"),tt=va("seconds"),Me=va("minutes"),Ge=va("hours"),qe=va("days"),ae=va("months"),Ue=va("years"),ya=Math.round,Ca={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};var _a=Math.abs;function Aa(e){return(0<e)-(e<0)||+e}function Ea(){if(!this.isValid())return this.localeData().invalidDate();var e,t,a,n,o,r,i,s=_a(this._milliseconds)/1e3,l=_a(this._days),c=_a(this._months),u=this.asSeconds();return u?(e=G(s/60),t=G(e/60),s%=60,e%=60,a=G(c/12),c%=12,n=s?s.toFixed(3).replace(/\.?0+$/,""):"",o=Aa(this._months)!==Aa(u)?"-":"",r=Aa(this._days)!==Aa(u)?"-":"",i=Aa(this._milliseconds)!==Aa(u)?"-":"",(u<0?"-":"")+"P"+(a?o+a+"Y":"")+(c?o+c+"M":"")+(l?r+l+"D":"")+(t||e||s?"T":"")+(t?i+t+"H":"")+(e?i+e+"M":"")+(s?i+n+"S":"")):"P0D"}X=kt.prototype;return X.isValid=function(){return this._isValid},X.abs=function(){var e=this._data;return this._milliseconds=da(this._milliseconds),this._days=da(this._days),this._months=da(this._months),e.milliseconds=da(e.milliseconds),e.seconds=da(e.seconds),e.minutes=da(e.minutes),e.hours=da(e.hours),e.months=da(e.months),e.years=da(e.years),this},X.add=function(e,t){return ma(this,e,t,1)},X.subtract=function(e,t){return ma(this,e,t,-1)},X.as=function(e){if(!this.isValid())return NaN;var t,a,n=this._milliseconds;if("month"===(e=j(e))||"quarter"===e||"year"===e)switch(t=this._days+n/864e5,a=this._months+fa(t),e){case"month":return a;case"quarter":return a/3;case"year":return a/12}else switch(t=this._days+Math.round(ha(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}},X.asMilliseconds=re,X.asSeconds=Q,X.asMinutes=K,X.asHours=Z,X.asDays=ne,X.asWeeks=$,X.asMonths=Vt,X.asQuarters=Mt,X.asYears=St,X.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*Y(this._months/12):NaN},X._bubble=function(){var e=this._milliseconds,t=this._days,a=this._months,n=this._data;return 0<=e&&0<=t&&0<=a||e<=0&&t<=0&&a<=0||(e+=864e5*pa(ha(a)+t),a=t=0),n.milliseconds=e%1e3,e=G(e/1e3),n.seconds=e%60,e=G(e/60),n.minutes=e%60,e=G(e/60),n.hours=e%24,t+=G(e/24),a+=e=G(fa(t)),t-=pa(ha(e)),e=G(a/12),a%=12,n.days=t,n.months=a,n.years=e,this},X.clone=function(){return Ft(this)},X.get=function(e){return e=j(e),this.isValid()?this[e+"s"]():NaN},X.milliseconds=ue,X.seconds=tt,X.minutes=Me,X.hours=Ge,X.days=qe,X.weeks=function(){return G(this.days()/7)},X.months=ae,X.years=Ue,X.humanize=function(e,t){if(!this.isValid())return this.localeData().invalidDate();var a,n,o,r,i,s,l,c,u,d=!1,m=Ca;return"object"==typeof e&&(t=e,e=!1),"boolean"==typeof e&&(d=e),"object"==typeof t&&(m=Object.assign({},Ca,t),null!=t.s&&null==t.ss&&(m.ss=t.s-1)),a=this.localeData(),o=!d,r=m,i=a,s=Ft(n=this).abs(),l=ya(s.as("s")),c=ya(s.as("m")),u=ya(s.as("h")),e=ya(s.as("d")),t=ya(s.as("M")),m=ya(s.as("w")),s=ya(s.as("y")),e=(l<=r.ss?["s",l]:l<r.s&&["ss",l])||c<=1&&["m"]||c<r.m&&["mm",c]||u<=1&&["h"]||u<r.h&&["hh",u]||e<=1&&["d"]||e<r.d&&["dd",e],(e=(e=null!=r.w?e||m<=1&&["w"]||m<r.w&&["ww",m]:e)||t<=1&&["M"]||t<r.M&&["MM",t]||s<=1&&["y"]||["yy",s])[2]=o,e[3]=0<+n,e[4]=i,e=function(e,t,a,n,o){return o.relativeTime(t||1,!!a,e,n)}.apply(null,e),d&&(e=a.pastFuture(+this,e)),a.postformat(e)},X.toISOString=Ea,X.toString=Ea,X.toJSON=Ea,X.locale=Zt,X.localeData=$t,X.toIsoString=a("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Ea),X.lang=te,D("X",0,0,"unix"),D("x",0,0,"valueOf"),de("x",se),de("X",/[+-]?\d+(\.\d{1,3})?/),he("X",function(e,t,a){a._d=new Date(1e3*parseFloat(e))}),he("x",function(e,t,a){a._d=new Date(Y(e))}),f.version="2.29.1",e=wt,f.fn=oe,f.min=function(){return It("isBefore",[].slice.call(arguments,0))},f.max=function(){return It("isAfter",[].slice.call(arguments,0))},f.now=function(){return Date.now?Date.now():+new Date},f.utc=g,f.unix=function(e){return wt(1e3*e)},f.months=function(e,t){return ca(e,t,"months")},f.isDate=d,f.locale=st,f.invalid=C,f.duration=Ft,f.isMoment=E,f.weekdays=function(e,t,a){return ua(e,t,a,"weekdays")},f.parseZone=function(){return wt.apply(null,arguments).parseZone()},f.localeData=ct,f.isDuration=Ot,f.monthsShort=function(e,t){return ca(e,t,"monthsShort")},f.weekdaysMin=function(e,t,a){return ua(e,t,a,"weekdaysMin")},f.defineLocale=lt,f.updateLocale=function(e,t){var a,n;return null!=t?(n=at,null!=nt[e]&&null!=nt[e].parentLocale?nt[e].set(w(nt[e]._config,t)):(t=w(n=null!=(a=it(e))?a._config:n,t),null==a&&(t.abbr=e),(t=new S(t)).parentLocale=nt[e],nt[e]=t),st(e)):null!=nt[e]&&(null!=nt[e].parentLocale?(nt[e]=nt[e].parentLocale,e===st()&&st(e)):null!=nt[e]&&delete nt[e]),nt[e]},f.locales=function(){return I(nt)},f.weekdaysShort=function(e,t,a){return ua(e,t,a,"weekdaysShort")},f.normalizeUnits=j,f.relativeTimeRounding=function(e){return void 0===e?ya:"function"==typeof e&&(ya=e,!0)},f.relativeTimeThreshold=function(e,t){return void 0!==Ca[e]&&(void 0===t?Ca[e]:(Ca[e]=t,"s"===e&&(Ca.ss=t-1),!0))},f.calendarFormat=function(e,t){t=e.diff(t,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"},f.prototype=oe,f.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},f}),function(e,t){"use strict";"object"==typeof module&&module.exports?module.exports=t(require("moment")):"function"==typeof define&&define.amd?define(["moment"],t):t(e.moment)}(this,function(o){"use strict";void 0===o.version&&o.default&&(o=o.default);var t,r={},i={},s={},c={},u={};o&&"string"==typeof o.version||M("Moment Timezone requires Moment.js. See https://momentjs.com/timezone/docs/#/use-it/browser/");var e=o.version.split("."),a=+e[0],n=+e[1];function l(e){return 96<e?e-87:64<e?e-29:e-48}function d(e){var t=0,a=e.split("."),n=a[0],o=a[1]||"",r=1,i=0,a=1;for(45===e.charCodeAt(0)&&(a=-(t=1));t<n.length;t++)i=60*i+l(n.charCodeAt(t));for(t=0;t<o.length;t++)r/=60,i+=l(o.charCodeAt(t))*r;return i*a}function m(e){for(var t=0;t<e.length;t++)e[t]=d(e[t])}function p(e,t){for(var a=[],n=0;n<t.length;n++)a[n]=e[t[n]];return a}function f(e){var t=e.split("|"),a=t[2].split(" "),n=t[3].split(""),e=t[4].split(" ");return m(a),m(n),m(e),function(e,t){for(var a=0;a<t;a++)e[a]=Math.round((e[a-1]||0)+6e4*e[a]);e[t-1]=1/0}(e,n.length),{name:t[0],abbrs:p(t[1].split(" "),n),offsets:p(a,n),untils:e,population:0|t[5]}}function h(e){e&&this._set(f(e))}function g(e,t){this.name=e,this.zones=t}function v(e){var t=e.toTimeString(),a=t.match(/\([a-z ]+\)/i);"GMT"===(a=a&&a[0]?(a=a[0].match(/[A-Z]/g))?a.join(""):void 0:(a=t.match(/[A-Z]{3,5}/g))?a[0]:void 0)&&(a=void 0),this.at=+e,this.abbr=a,this.offset=e.getTimezoneOffset()}function y(e){this.zone=e,this.offsetScore=0,this.abbrScore=0}function C(e,t){return e.offsetScore!==t.offsetScore?e.offsetScore-t.offsetScore:e.abbrScore!==t.abbrScore?e.abbrScore-t.abbrScore:e.zone.population!==t.zone.population?t.zone.population-e.zone.population:t.zone.name.localeCompare(e.zone.name)}function _(){try{var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e&&3<e.length){var t=c[A(e)];if(t)return t;M("Moment Timezone found "+e+" from the Intl api, but did not have that data loaded.")}}catch(e){}for(var a,n,o=function(){for(var e,t,a=(new Date).getFullYear()-2,n=new v(new Date(a,0,1)),o=[n],r=1;r<48;r++)(t=new v(new Date(a,r,1))).offset!==n.offset&&(e=function(e,t){for(var a;a=6e4*((t.at-e.at)/12e4|0);)(a=new v(new Date(e.at+a))).offset===e.offset?e=a:t=a;return e}(n,t),o.push(e),o.push(new v(new Date(e.at+6e4)))),n=t;for(r=0;r<4;r++)o.push(new v(new Date(a+r,0,1))),o.push(new v(new Date(a+r,6,1)));return o}(),r=o.length,i=function(e){for(var t,a,n=e.length,o={},r=[],i=0;i<n;i++)for(t in a=u[e[i].offset]||{})a.hasOwnProperty(t)&&(o[t]=!0);for(i in o)o.hasOwnProperty(i)&&r.push(c[i]);return r}(o),s=[],l=0;l<i.length;l++){for(a=new y(P(i[l])),n=0;n<r;n++)a.scoreOffsetAt(o[n]);s.push(a)}return s.sort(C),0<s.length?s[0].zone.name:void 0}function A(e){return(e||"").toLowerCase().replace(/\//g,"_")}function E(e){var t,a,n,o;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)o=A(a=(n=e[t].split("|"))[0]),r[o]=e[t],c[o]=a,function(e,t){var a,n;for(m(t),a=0;a<t.length;a++)n=t[a],u[n]=u[n]||{},u[n][e]=!0}(o,n[2].split(" "))}function P(e,t){e=A(e);var a,n=r[e];return n instanceof h?n:"string"==typeof n?(n=new h(n),r[e]=n):i[e]&&t!==P&&(a=P(i[e],P))?((n=r[e]=new h)._set(a),n.name=c[e],n):null}function b(e){var t,a,n,o;for("string"==typeof e&&(e=[e]),t=0;t<e.length;t++)n=A((a=e[t].split("|"))[0]),o=A(a[1]),i[n]=o,c[n]=a[0],i[o]=n,c[o]=a[1]}function T(e){E(e.zones),b(e.links),function(e){var t,a,n;if(e&&e.length)for(t=0;t<e.length;t++)a=(n=e[t].split("|"))[0].toUpperCase(),n=n[1].split(" "),s[a]=new g(a,n)}(e.countries),I.dataVersion=e.version}function w(e){return w.didShowError||(w.didShowError=!0,M("moment.tz.zoneExists('"+e+"') has been deprecated in favor of !moment.tz.zone('"+e+"')")),!!P(e)}function S(e){var t="X"===e._f||"x"===e._f;return!(!e._a||void 0!==e._tzm||t)}function M(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e)}function I(e){var t=Array.prototype.slice.call(arguments,0,-1),a=arguments[arguments.length-1],n=P(a),t=o.utc.apply(null,t);return n&&!o.isMoment(e)&&S(t)&&t.add(n.parse(t),"minutes"),t.tz(a),t}(a<2||2==a&&n<6)&&M("Moment Timezone requires Moment.js >= 2.6.0. You are using Moment.js "+o.version+". See momentjs.com"),h.prototype={_set:function(e){this.name=e.name,this.abbrs=e.abbrs,this.untils=e.untils,this.offsets=e.offsets,this.population=e.population},_index:function(e){for(var t=+e,a=this.untils,n=0;n<a.length;n++)if(t<a[n])return n},countries:function(){var t=this.name;return Object.keys(s).filter(function(e){return-1!==s[e].zones.indexOf(t)})},parse:function(e){for(var t,a,n,o=+e,r=this.offsets,i=this.untils,s=i.length-1,l=0;l<s;l++)if(t=r[l],a=r[l+1],n=r[l&&l-1],t<a&&I.moveAmbiguousForward?t=a:n<t&&I.moveInvalidForward&&(t=n),o<i[l]-6e4*t)return r[l];return r[s]},abbr:function(e){return this.abbrs[this._index(e)]},offset:function(e){return M("zone.offset has been deprecated in favor of zone.utcOffset"),this.offsets[this._index(e)]},utcOffset:function(e){return this.offsets[this._index(e)]}},y.prototype.scoreOffsetAt=function(e){this.offsetScore+=Math.abs(this.zone.utcOffset(e.at)-e.offset),this.zone.abbr(e.at).replace(/[^A-Z]/g,"")!==e.abbr&&this.abbrScore++},I.version="0.5.32",I.dataVersion="",I._zones=r,I._links=i,I._names=c,I._countries=s,I.add=E,I.link=b,I.load=T,I.zone=P,I.zoneExists=w,I.guess=function(e){return t=!t||e?_():t},I.names=function(){var e,t=[];for(e in c)c.hasOwnProperty(e)&&(r[e]||r[i[e]])&&c[e]&&t.push(c[e]);return t.sort()},I.Zone=h,I.unpack=f,I.unpackBase60=d,I.needsOffset=S,I.moveInvalidForward=!0,I.moveAmbiguousForward=!1,I.countries=function(){return Object.keys(s)},I.zonesForCountry=function(e,t){var a=(a=e).toUpperCase();if(!(e=s[a]||null))return null;e=e.zones.sort();return t?e.map(function(e){return{name:e,offset:P(e).utcOffset(new Date)}}):e};var R,e=o.fn;function k(e){return function(){return this._z?this._z.abbr(this):e.call(this)}}function O(e){return function(){return this._z=null,e.apply(this,arguments)}}o.tz=I,o.defaultZone=null,o.updateOffset=function(e,t){var a,n=o.defaultZone;void 0===e._z&&(n&&S(e)&&!e._isUTC&&(e._d=o.utc(e._a)._d,e.utc().add(n.parse(e),"minutes")),e._z=n),e._z&&(a=e._z.utcOffset(e),Math.abs(a)<16&&(a/=60),void 0!==e.utcOffset?(n=e._z,e.utcOffset(-a,t),e._z=n):e.zone(a,t))},e.tz=function(e,t){if(e){if("string"!=typeof e)throw new Error("Time zone name must be a string, got "+e+" ["+typeof e+"]");return this._z=P(e),this._z?o.updateOffset(this,t):M("Moment Timezone has no data for "+e+". See http://momentjs.com/timezone/docs/#/data-loading/."),this}if(this._z)return this._z.name},e.zoneName=k(e.zoneName),e.zoneAbbr=k(e.zoneAbbr),e.utc=O(e.utc),e.local=O(e.local),e.utcOffset=(R=e.utcOffset,function(){return 0<arguments.length&&(this._z=null),R.apply(this,arguments)}),o.tz.setDefault=function(e){return(a<2||2==a&&n<9)&&M("Moment Timezone setDefault() requires Moment.js >= 2.9.0. You are using Moment.js "+o.version+"."),o.defaultZone=e?P(e):null,o};e=o.momentProperties;return"[object Array]"===Object.prototype.toString.call(e)?(e.push("_z"),e.push("_a")):e&&(e._z=null),T({version:"2020a",zones:["Africa/Abidjan|GMT|0|0||48e5","Africa/Nairobi|EAT|-30|0||47e5","Africa/Algiers|CET|-10|0||26e5","Africa/Lagos|WAT|-10|0||17e6","Africa/Maputo|CAT|-20|0||26e5","Africa/Cairo|EET EEST|-20 -30|01010|1M2m0 gL0 e10 mn0|15e6","Africa/Casablanca|+00 +01|0 -10|010101010101010101010101010101010101|1H3C0 wM0 co0 go0 1o00 s00 dA0 vc0 11A0 A00 e00 y00 11A0 uM0 e00 Dc0 11A0 s00 e00 IM0 WM0 mo0 gM0 LA0 WM0 jA0 e00 28M0 e00 2600 gM0 2600 e00 2600 gM0|32e5","Europe/Paris|CET CEST|-10 -20|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|11e6","Africa/Johannesburg|SAST|-20|0||84e5","Africa/Khartoum|EAT CAT|-30 -20|01|1Usl0|51e5","Africa/Sao_Tome|GMT WAT|0 -10|010|1UQN0 2q00|","Africa/Tripoli|EET CET CEST|-20 -10 -20|0120|1IlA0 TA0 1o00|11e5","Africa/Windhoek|CAT WAT|-20 -10|0101010101010|1GQo0 11B0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0|32e4","America/Adak|HST HDT|a0 90|01010101010101010101010|1GIc0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|326","America/Anchorage|AKST AKDT|90 80|01010101010101010101010|1GIb0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|30e4","America/Santo_Domingo|AST|40|0||29e5","America/Araguaina|-03 -02|30 20|010|1IdD0 Lz0|14e4","America/Fortaleza|-03|30|0||34e5","America/Asuncion|-03 -04|30 40|01010101010101010101010|1GTf0 1cN0 17b0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0 19X0 1ip0 17b0 1ip0 17b0 1ip0 19X0 1fB0 19X0 1fB0|28e5","America/Panama|EST|50|0||15e5","America/Mexico_City|CST CDT|60 50|01010101010101010101010|1GQw0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|20e6","America/Bahia|-02 -03|20 30|01|1GCq0|27e5","America/Managua|CST|60|0||22e5","America/La_Paz|-04|40|0||19e5","America/Lima|-05|50|0||11e6","America/Denver|MST MDT|70 60|01010101010101010101010|1GI90 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|26e5","America/Campo_Grande|-03 -04|30 40|0101010101010101|1GCr0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0|77e4","America/Cancun|CST CDT EST|60 50 50|01010102|1GQw0 1nX0 14p0 1lb0 14p0 1lb0 Dd0|63e4","America/Caracas|-0430 -04|4u 40|01|1QMT0|29e5","America/Chicago|CST CDT|60 50|01010101010101010101010|1GI80 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|92e5","America/Chihuahua|MST MDT|70 60|01010101010101010101010|1GQx0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0|81e4","America/Phoenix|MST|70|0||42e5","America/Whitehorse|PST PDT MST|80 70 70|010101010101010102|1GIa0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0|23e3","America/New_York|EST EDT|50 40|01010101010101010101010|1GI70 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|21e6","America/Rio_Branco|-04 -05|40 50|01|1KLE0|31e4","America/Los_Angeles|PST PDT|80 70|01010101010101010101010|1GIa0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|15e6","America/Fort_Nelson|PST PDT MST|80 70 70|01010102|1GIa0 1zb0 Op0 1zb0 Op0 1zb0 Op0|39e2","America/Halifax|AST ADT|40 30|01010101010101010101010|1GI60 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|39e4","America/Godthab|-03 -02|30 20|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|17e3","America/Grand_Turk|EST EDT AST|50 40 40|0101010121010101010|1GI70 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 5Ip0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|37e2","America/Havana|CST CDT|50 40|01010101010101010101010|1GQt0 1qM0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Oo0 1zc0 Rc0 1zc0 Oo0 1zc0|21e5","America/Metlakatla|PST AKST AKDT|80 90 80|01212120121212121|1PAa0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 uM0 jB0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|14e2","America/Miquelon|-03 -02|30 20|01010101010101010101010|1GI50 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|61e2","America/Montevideo|-02 -03|20 30|01010101|1GI40 1o10 11z0 1o10 11z0 1o10 11z0|17e5","America/Noronha|-02|20|0||30e2","America/Port-au-Prince|EST EDT|50 40|010101010101010101010|1GI70 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 3iN0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|23e5","Antarctica/Palmer|-03 -04|30 40|010101010|1H3D0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0|40","America/Santiago|-03 -04|30 40|010101010101010101010|1H3D0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0|62e5","America/Sao_Paulo|-02 -03|20 30|0101010101010101|1GCq0 1zd0 Lz0 1C10 Lz0 1C10 On0 1zd0 On0 1zd0 On0 1zd0 On0 1HB0 FX0|20e6","Atlantic/Azores|-01 +00|10 0|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|25e4","America/St_Johns|NST NDT|3u 2u|01010101010101010101010|1GI5u 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0|11e4","Antarctica/Casey|+11 +08|-b0 -80|0101|1GAF0 blz0 3m10|10","Antarctica/Davis|+05 +07|-50 -70|01|1GAI0|70","Pacific/Port_Moresby|+10|-a0|0||25e4","Pacific/Guadalcanal|+11|-b0|0||11e4","Asia/Tashkent|+05|-50|0||23e5","Pacific/Auckland|NZDT NZST|-d0 -c0|01010101010101010101010|1GQe0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00|14e5","Asia/Baghdad|+03|-30|0||66e5","Antarctica/Troll|+00 +02|0 -20|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|40","Asia/Dhaka|+06|-60|0||16e6","Asia/Amman|EET EEST|-20 -30|010101010101010101010|1GPy0 4bX0 Dd0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 11A0 1o00|25e5","Asia/Kamchatka|+12|-c0|0||18e4","Asia/Baku|+04 +05|-40 -50|010101010|1GNA0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00|27e5","Asia/Bangkok|+07|-70|0||15e6","Asia/Barnaul|+07 +06|-70 -60|010|1N7v0 3rd0|","Asia/Beirut|EET EEST|-20 -30|01010101010101010101010|1GNy0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0|22e5","Asia/Kuala_Lumpur|+08|-80|0||71e5","Asia/Kolkata|IST|-5u|0||15e6","Asia/Chita|+10 +08 +09|-a0 -80 -90|012|1N7s0 3re0|33e4","Asia/Ulaanbaatar|+08 +09|-80 -90|01010|1O8G0 1cJ0 1cP0 1cJ0|12e5","Asia/Shanghai|CST|-80|0||23e6","Asia/Colombo|+0530|-5u|0||22e5","Asia/Damascus|EET EEST|-20 -30|01010101010101010101010|1GPy0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0 1qL0 WN0 1qL0 WN0 1qL0|26e5","Asia/Dili|+09|-90|0||19e4","Asia/Dubai|+04|-40|0||39e5","Asia/Famagusta|EET EEST +03|-20 -30 -30|0101010101201010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 15U0 2Ks0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|","Asia/Gaza|EET EEST|-20 -30|01010101010101010101010|1GPy0 1a00 1fA0 1cL0 1cN0 1nX0 1210 1nz0 1220 1qL0 WN0 1qL0 WN0 1qL0 11c0 1oo0 11c0 1rc0 Wo0 1rc0 Wo0 1rc0|18e5","Asia/Hong_Kong|HKT|-80|0||73e5","Asia/Hovd|+07 +08|-70 -80|01010|1O8H0 1cJ0 1cP0 1cJ0|81e3","Asia/Irkutsk|+09 +08|-90 -80|01|1N7t0|60e4","Europe/Istanbul|EET EEST +03|-20 -30 -30|01010101012|1GNB0 1qM0 11A0 1o00 1200 1nA0 11A0 1tA0 U00 15w0|13e6","Asia/Jakarta|WIB|-70|0||31e6","Asia/Jayapura|WIT|-90|0||26e4","Asia/Jerusalem|IST IDT|-20 -30|01010101010101010101010|1GPA0 1aL0 1eN0 1oL0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0 W10 1rz0 10N0 1oL0 10N0 1oL0 10N0 1rz0 W10 1rz0|81e4","Asia/Kabul|+0430|-4u|0||46e5","Asia/Karachi|PKT|-50|0||24e6","Asia/Kathmandu|+0545|-5J|0||12e5","Asia/Yakutsk|+10 +09|-a0 -90|01|1N7s0|28e4","Asia/Krasnoyarsk|+08 +07|-80 -70|01|1N7u0|10e5","Asia/Magadan|+12 +10 +11|-c0 -a0 -b0|012|1N7q0 3Cq0|95e3","Asia/Makassar|WITA|-80|0||15e5","Asia/Manila|PST|-80|0||24e6","Europe/Athens|EET EEST|-20 -30|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|35e5","Asia/Novosibirsk|+07 +06|-70 -60|010|1N7v0 4eN0|15e5","Asia/Omsk|+07 +06|-70 -60|01|1N7v0|12e5","Asia/Pyongyang|KST KST|-90 -8u|010|1P4D0 6BA0|29e5","Asia/Qyzylorda|+06 +05|-60 -50|01|1Xei0|73e4","Asia/Rangoon|+0630|-6u|0||48e5","Asia/Sakhalin|+11 +10|-b0 -a0|010|1N7r0 3rd0|58e4","Asia/Seoul|KST|-90|0||23e6","Asia/Srednekolymsk|+12 +11|-c0 -b0|01|1N7q0|35e2","Asia/Tehran|+0330 +0430|-3u -4u|01010101010101010101010|1GLUu 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0 1cp0 1dz0 1cp0 1dz0 1cN0 1dz0 1cp0 1dz0|14e6","Asia/Tokyo|JST|-90|0||38e6","Asia/Tomsk|+07 +06|-70 -60|010|1N7v0 3Qp0|10e5","Asia/Vladivostok|+11 +10|-b0 -a0|01|1N7r0|60e4","Asia/Yekaterinburg|+06 +05|-60 -50|01|1N7w0|14e5","Europe/Lisbon|WET WEST|0 -10|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|27e5","Atlantic/Cape_Verde|-01|10|0||50e4","Australia/Sydney|AEDT AEST|-b0 -a0|01010101010101010101010|1GQg0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0|40e5","Australia/Adelaide|ACDT ACST|-au -9u|01010101010101010101010|1GQgu 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1fA0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0|11e5","Australia/Brisbane|AEST|-a0|0||20e5","Australia/Darwin|ACST|-9u|0||12e4","Australia/Eucla|+0845|-8J|0||368","Australia/Lord_Howe|+11 +1030|-b0 -au|01010101010101010101010|1GQf0 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1fAu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu 1cLu 1cMu|347","Australia/Perth|AWST|-80|0||18e5","Pacific/Easter|-05 -06|50 60|010101010101010101010|1H3D0 Op0 1zb0 Rd0 1wn0 Rd0 46n0 Ap0 1Nb0 Ap0 1Nb0 Ap0 1zb0 11B0 1nX0 11B0 1nX0 11B0 1nX0 11B0|30e2","Europe/Dublin|GMT IST|0 -10|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|12e5","Etc/GMT-1|+01|-10|0||","Pacific/Fakaofo|+13|-d0|0||483","Pacific/Kiritimati|+14|-e0|0||51e2","Etc/GMT-2|+02|-20|0||","Pacific/Tahiti|-10|a0|0||18e4","Pacific/Niue|-11|b0|0||12e2","Etc/GMT+12|-12|c0|0||","Pacific/Galapagos|-06|60|0||25e3","Etc/GMT+7|-07|70|0||","Pacific/Pitcairn|-08|80|0||56","Pacific/Gambier|-09|90|0||125","Etc/UTC|UTC|0|0||","Europe/Ulyanovsk|+04 +03|-40 -30|010|1N7y0 3rd0|13e5","Europe/London|GMT BST|0 -10|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|10e6","Europe/Chisinau|EET EEST|-20 -30|01010101010101010101010|1GNA0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|67e4","Europe/Kaliningrad|+03 EET|-30 -20|01|1N7z0|44e4","Europe/Kirov|+04 +03|-40 -30|01|1N7y0|48e4","Europe/Moscow|MSK MSK|-40 -30|01|1N7y0|16e6","Europe/Saratov|+04 +03|-40 -30|010|1N7y0 5810|","Europe/Simferopol|EET EEST MSK MSK|-20 -30 -40 -30|0101023|1GNB0 1qM0 11A0 1o00 11z0 1nW0|33e4","Europe/Volgograd|+04 +03|-40 -30|010|1N7y0 9Jd0|10e5","Pacific/Honolulu|HST|a0|0||37e4","MET|MET MEST|-10 -20|01010101010101010101010|1GNB0 1qM0 11A0 1o00 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0 WM0 1qM0 11A0 1o00 11A0 1o00 11A0 1qM0 WM0 1qM0|","Pacific/Chatham|+1345 +1245|-dJ -cJ|01010101010101010101010|1GQe0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00|600","Pacific/Apia|+14 +13|-e0 -d0|01010101010101010101010|1GQe0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1cM0 1fA0 1a00 1fA0 1a00 1fA0 1a00 1fA0 1a00|37e3","Pacific/Bougainville|+10 +11|-a0 -b0|01|1NwE0|18e4","Pacific/Fiji|+13 +12|-d0 -c0|01010101010101010101010|1Goe0 1Nc0 Ao0 1Q00 xz0 1SN0 uM0 1SM0 uM0 1VA0 s00 1VA0 s00 1VA0 s00 20o0 pc0 20o0 s00 20o0 pc0 20o0|88e4","Pacific/Guam|ChST|-a0|0||17e4","Pacific/Marquesas|-0930|9u|0||86e2","Pacific/Pago_Pago|SST|b0|0||37e2","Pacific/Norfolk|+1130 +11 +12|-bu -b0 -c0|012121212|1PoCu 9Jcu 1cM0 1cM0 1cM0 1cM0 1cM0 1cM0|25e4","Pacific/Tongatapu|+13 +14|-d0 -e0|010|1S4d0 s00|75e3"],links:["Africa/Abidjan|Africa/Accra","Africa/Abidjan|Africa/Bamako","Africa/Abidjan|Africa/Banjul","Africa/Abidjan|Africa/Bissau","Africa/Abidjan|Africa/Conakry","Africa/Abidjan|Africa/Dakar","Africa/Abidjan|Africa/Freetown","Africa/Abidjan|Africa/Lome","Africa/Abidjan|Africa/Monrovia","Africa/Abidjan|Africa/Nouakchott","Africa/Abidjan|Africa/Ouagadougou","Africa/Abidjan|Africa/Timbuktu","Africa/Abidjan|America/Danmarkshavn","Africa/Abidjan|Atlantic/Reykjavik","Africa/Abidjan|Atlantic/St_Helena","Africa/Abidjan|Etc/GMT","Africa/Abidjan|Etc/GMT+0","Africa/Abidjan|Etc/GMT-0","Africa/Abidjan|Etc/GMT0","Africa/Abidjan|Etc/Greenwich","Africa/Abidjan|GMT","Africa/Abidjan|GMT+0","Africa/Abidjan|GMT-0","Africa/Abidjan|GMT0","Africa/Abidjan|Greenwich","Africa/Abidjan|Iceland","Africa/Algiers|Africa/Tunis","Africa/Cairo|Egypt","Africa/Casablanca|Africa/El_Aaiun","Africa/Johannesburg|Africa/Maseru","Africa/Johannesburg|Africa/Mbabane","Africa/Lagos|Africa/Bangui","Africa/Lagos|Africa/Brazzaville","Africa/Lagos|Africa/Douala","Africa/Lagos|Africa/Kinshasa","Africa/Lagos|Africa/Libreville","Africa/Lagos|Africa/Luanda","Africa/Lagos|Africa/Malabo","Africa/Lagos|Africa/Ndjamena","Africa/Lagos|Africa/Niamey","Africa/Lagos|Africa/Porto-Novo","Africa/Maputo|Africa/Blantyre","Africa/Maputo|Africa/Bujumbura","Africa/Maputo|Africa/Gaborone","Africa/Maputo|Africa/Harare","Africa/Maputo|Africa/Kigali","Africa/Maputo|Africa/Lubumbashi","Africa/Maputo|Africa/Lusaka","Africa/Nairobi|Africa/Addis_Ababa","Africa/Nairobi|Africa/Asmara","Africa/Nairobi|Africa/Asmera","Africa/Nairobi|Africa/Dar_es_Salaam","Africa/Nairobi|Africa/Djibouti","Africa/Nairobi|Africa/Juba","Africa/Nairobi|Africa/Kampala","Africa/Nairobi|Africa/Mogadishu","Africa/Nairobi|Indian/Antananarivo","Africa/Nairobi|Indian/Comoro","Africa/Nairobi|Indian/Mayotte","Africa/Tripoli|Libya","America/Adak|America/Atka","America/Adak|US/Aleutian","America/Anchorage|America/Juneau","America/Anchorage|America/Nome","America/Anchorage|America/Sitka","America/Anchorage|America/Yakutat","America/Anchorage|US/Alaska","America/Campo_Grande|America/Cuiaba","America/Chicago|America/Indiana/Knox","America/Chicago|America/Indiana/Tell_City","America/Chicago|America/Knox_IN","America/Chicago|America/Matamoros","America/Chicago|America/Menominee","America/Chicago|America/North_Dakota/Beulah","America/Chicago|America/North_Dakota/Center","America/Chicago|America/North_Dakota/New_Salem","America/Chicago|America/Rainy_River","America/Chicago|America/Rankin_Inlet","America/Chicago|America/Resolute","America/Chicago|America/Winnipeg","America/Chicago|CST6CDT","America/Chicago|Canada/Central","America/Chicago|US/Central","America/Chicago|US/Indiana-Starke","America/Chihuahua|America/Mazatlan","America/Chihuahua|Mexico/BajaSur","America/Denver|America/Boise","America/Denver|America/Cambridge_Bay","America/Denver|America/Edmonton","America/Denver|America/Inuvik","America/Denver|America/Ojinaga","America/Denver|America/Shiprock","America/Denver|America/Yellowknife","America/Denver|Canada/Mountain","America/Denver|MST7MDT","America/Denver|Navajo","America/Denver|US/Mountain","America/Fortaleza|America/Argentina/Buenos_Aires","America/Fortaleza|America/Argentina/Catamarca","America/Fortaleza|America/Argentina/ComodRivadavia","America/Fortaleza|America/Argentina/Cordoba","America/Fortaleza|America/Argentina/Jujuy","America/Fortaleza|America/Argentina/La_Rioja","America/Fortaleza|America/Argentina/Mendoza","America/Fortaleza|America/Argentina/Rio_Gallegos","America/Fortaleza|America/Argentina/Salta","America/Fortaleza|America/Argentina/San_Juan","America/Fortaleza|America/Argentina/San_Luis","America/Fortaleza|America/Argentina/Tucuman","America/Fortaleza|America/Argentina/Ushuaia","America/Fortaleza|America/Belem","America/Fortaleza|America/Buenos_Aires","America/Fortaleza|America/Catamarca","America/Fortaleza|America/Cayenne","America/Fortaleza|America/Cordoba","America/Fortaleza|America/Jujuy","America/Fortaleza|America/Maceio","America/Fortaleza|America/Mendoza","America/Fortaleza|America/Paramaribo","America/Fortaleza|America/Recife","America/Fortaleza|America/Rosario","America/Fortaleza|America/Santarem","America/Fortaleza|Antarctica/Rothera","America/Fortaleza|Atlantic/Stanley","America/Fortaleza|Etc/GMT+3","America/Godthab|America/Nuuk","America/Halifax|America/Glace_Bay","America/Halifax|America/Goose_Bay","America/Halifax|America/Moncton","America/Halifax|America/Thule","America/Halifax|Atlantic/Bermuda","America/Halifax|Canada/Atlantic","America/Havana|Cuba","America/La_Paz|America/Boa_Vista","America/La_Paz|America/Guyana","America/La_Paz|America/Manaus","America/La_Paz|America/Porto_Velho","America/La_Paz|Brazil/West","America/La_Paz|Etc/GMT+4","America/Lima|America/Bogota","America/Lima|America/Guayaquil","America/Lima|Etc/GMT+5","America/Los_Angeles|America/Ensenada","America/Los_Angeles|America/Santa_Isabel","America/Los_Angeles|America/Tijuana","America/Los_Angeles|America/Vancouver","America/Los_Angeles|Canada/Pacific","America/Los_Angeles|Mexico/BajaNorte","America/Los_Angeles|PST8PDT","America/Los_Angeles|US/Pacific","America/Los_Angeles|US/Pacific-New","America/Managua|America/Belize","America/Managua|America/Costa_Rica","America/Managua|America/El_Salvador","America/Managua|America/Guatemala","America/Managua|America/Regina","America/Managua|America/Swift_Current","America/Managua|America/Tegucigalpa","America/Managua|Canada/Saskatchewan","America/Mexico_City|America/Bahia_Banderas","America/Mexico_City|America/Merida","America/Mexico_City|America/Monterrey","America/Mexico_City|Mexico/General","America/New_York|America/Detroit","America/New_York|America/Fort_Wayne","America/New_York|America/Indiana/Indianapolis","America/New_York|America/Indiana/Marengo","America/New_York|America/Indiana/Petersburg","America/New_York|America/Indiana/Vevay","America/New_York|America/Indiana/Vincennes","America/New_York|America/Indiana/Winamac","America/New_York|America/Indianapolis","America/New_York|America/Iqaluit","America/New_York|America/Kentucky/Louisville","America/New_York|America/Kentucky/Monticello","America/New_York|America/Louisville","America/New_York|America/Montreal","America/New_York|America/Nassau","America/New_York|America/Nipigon","America/New_York|America/Pangnirtung","America/New_York|America/Thunder_Bay","America/New_York|America/Toronto","America/New_York|Canada/Eastern","America/New_York|EST5EDT","America/New_York|US/East-Indiana","America/New_York|US/Eastern","America/New_York|US/Michigan","America/Noronha|Atlantic/South_Georgia","America/Noronha|Brazil/DeNoronha","America/Noronha|Etc/GMT+2","America/Panama|America/Atikokan","America/Panama|America/Cayman","America/Panama|America/Coral_Harbour","America/Panama|America/Jamaica","America/Panama|EST","America/Panama|Jamaica","America/Phoenix|America/Creston","America/Phoenix|America/Dawson_Creek","America/Phoenix|America/Hermosillo","America/Phoenix|MST","America/Phoenix|US/Arizona","America/Rio_Branco|America/Eirunepe","America/Rio_Branco|America/Porto_Acre","America/Rio_Branco|Brazil/Acre","America/Santiago|Chile/Continental","America/Santo_Domingo|America/Anguilla","America/Santo_Domingo|America/Antigua","America/Santo_Domingo|America/Aruba","America/Santo_Domingo|America/Barbados","America/Santo_Domingo|America/Blanc-Sablon","America/Santo_Domingo|America/Curacao","America/Santo_Domingo|America/Dominica","America/Santo_Domingo|America/Grenada","America/Santo_Domingo|America/Guadeloupe","America/Santo_Domingo|America/Kralendijk","America/Santo_Domingo|America/Lower_Princes","America/Santo_Domingo|America/Marigot","America/Santo_Domingo|America/Martinique","America/Santo_Domingo|America/Montserrat","America/Santo_Domingo|America/Port_of_Spain","America/Santo_Domingo|America/Puerto_Rico","America/Santo_Domingo|America/St_Barthelemy","America/Santo_Domingo|America/St_Kitts","America/Santo_Domingo|America/St_Lucia","America/Santo_Domingo|America/St_Thomas","America/Santo_Domingo|America/St_Vincent","America/Santo_Domingo|America/Tortola","America/Santo_Domingo|America/Virgin","America/Sao_Paulo|Brazil/East","America/St_Johns|Canada/Newfoundland","America/Whitehorse|America/Dawson","America/Whitehorse|Canada/Yukon","Antarctica/Palmer|America/Punta_Arenas","Asia/Baghdad|Antarctica/Syowa","Asia/Baghdad|Asia/Aden","Asia/Baghdad|Asia/Bahrain","Asia/Baghdad|Asia/Kuwait","Asia/Baghdad|Asia/Qatar","Asia/Baghdad|Asia/Riyadh","Asia/Baghdad|Etc/GMT-3","Asia/Baghdad|Europe/Minsk","Asia/Bangkok|Asia/Ho_Chi_Minh","Asia/Bangkok|Asia/Novokuznetsk","Asia/Bangkok|Asia/Phnom_Penh","Asia/Bangkok|Asia/Saigon","Asia/Bangkok|Asia/Vientiane","Asia/Bangkok|Etc/GMT-7","Asia/Bangkok|Indian/Christmas","Asia/Dhaka|Antarctica/Vostok","Asia/Dhaka|Asia/Almaty","Asia/Dhaka|Asia/Bishkek","Asia/Dhaka|Asia/Dacca","Asia/Dhaka|Asia/Kashgar","Asia/Dhaka|Asia/Qostanay","Asia/Dhaka|Asia/Thimbu","Asia/Dhaka|Asia/Thimphu","Asia/Dhaka|Asia/Urumqi","Asia/Dhaka|Etc/GMT-6","Asia/Dhaka|Indian/Chagos","Asia/Dili|Etc/GMT-9","Asia/Dili|Pacific/Palau","Asia/Dubai|Asia/Muscat","Asia/Dubai|Asia/Tbilisi","Asia/Dubai|Asia/Yerevan","Asia/Dubai|Etc/GMT-4","Asia/Dubai|Europe/Samara","Asia/Dubai|Indian/Mahe","Asia/Dubai|Indian/Mauritius","Asia/Dubai|Indian/Reunion","Asia/Gaza|Asia/Hebron","Asia/Hong_Kong|Hongkong","Asia/Jakarta|Asia/Pontianak","Asia/Jerusalem|Asia/Tel_Aviv","Asia/Jerusalem|Israel","Asia/Kamchatka|Asia/Anadyr","Asia/Kamchatka|Etc/GMT-12","Asia/Kamchatka|Kwajalein","Asia/Kamchatka|Pacific/Funafuti","Asia/Kamchatka|Pacific/Kwajalein","Asia/Kamchatka|Pacific/Majuro","Asia/Kamchatka|Pacific/Nauru","Asia/Kamchatka|Pacific/Tarawa","Asia/Kamchatka|Pacific/Wake","Asia/Kamchatka|Pacific/Wallis","Asia/Kathmandu|Asia/Katmandu","Asia/Kolkata|Asia/Calcutta","Asia/Kuala_Lumpur|Asia/Brunei","Asia/Kuala_Lumpur|Asia/Kuching","Asia/Kuala_Lumpur|Asia/Singapore","Asia/Kuala_Lumpur|Etc/GMT-8","Asia/Kuala_Lumpur|Singapore","Asia/Makassar|Asia/Ujung_Pandang","Asia/Rangoon|Asia/Yangon","Asia/Rangoon|Indian/Cocos","Asia/Seoul|ROK","Asia/Shanghai|Asia/Chongqing","Asia/Shanghai|Asia/Chungking","Asia/Shanghai|Asia/Harbin","Asia/Shanghai|Asia/Macao","Asia/Shanghai|Asia/Macau","Asia/Shanghai|Asia/Taipei","Asia/Shanghai|PRC","Asia/Shanghai|ROC","Asia/Tashkent|Antarctica/Mawson","Asia/Tashkent|Asia/Aqtau","Asia/Tashkent|Asia/Aqtobe","Asia/Tashkent|Asia/Ashgabat","Asia/Tashkent|Asia/Ashkhabad","Asia/Tashkent|Asia/Atyrau","Asia/Tashkent|Asia/Dushanbe","Asia/Tashkent|Asia/Oral","Asia/Tashkent|Asia/Samarkand","Asia/Tashkent|Etc/GMT-5","Asia/Tashkent|Indian/Kerguelen","Asia/Tashkent|Indian/Maldives","Asia/Tehran|Iran","Asia/Tokyo|Japan","Asia/Ulaanbaatar|Asia/Choibalsan","Asia/Ulaanbaatar|Asia/Ulan_Bator","Asia/Vladivostok|Asia/Ust-Nera","Asia/Yakutsk|Asia/Khandyga","Atlantic/Azores|America/Scoresbysund","Atlantic/Cape_Verde|Etc/GMT+1","Australia/Adelaide|Australia/Broken_Hill","Australia/Adelaide|Australia/South","Australia/Adelaide|Australia/Yancowinna","Australia/Brisbane|Australia/Lindeman","Australia/Brisbane|Australia/Queensland","Australia/Darwin|Australia/North","Australia/Lord_Howe|Australia/LHI","Australia/Perth|Australia/West","Australia/Sydney|Australia/ACT","Australia/Sydney|Australia/Canberra","Australia/Sydney|Australia/Currie","Australia/Sydney|Australia/Hobart","Australia/Sydney|Australia/Melbourne","Australia/Sydney|Australia/NSW","Australia/Sydney|Australia/Tasmania","Australia/Sydney|Australia/Victoria","Etc/UTC|Etc/UCT","Etc/UTC|Etc/Universal","Etc/UTC|Etc/Zulu","Etc/UTC|UCT","Etc/UTC|UTC","Etc/UTC|Universal","Etc/UTC|Zulu","Europe/Athens|Asia/Nicosia","Europe/Athens|EET","Europe/Athens|Europe/Bucharest","Europe/Athens|Europe/Helsinki","Europe/Athens|Europe/Kiev","Europe/Athens|Europe/Mariehamn","Europe/Athens|Europe/Nicosia","Europe/Athens|Europe/Riga","Europe/Athens|Europe/Sofia","Europe/Athens|Europe/Tallinn","Europe/Athens|Europe/Uzhgorod","Europe/Athens|Europe/Vilnius","Europe/Athens|Europe/Zaporozhye","Europe/Chisinau|Europe/Tiraspol","Europe/Dublin|Eire","Europe/Istanbul|Asia/Istanbul","Europe/Istanbul|Turkey","Europe/Lisbon|Atlantic/Canary","Europe/Lisbon|Atlantic/Faeroe","Europe/Lisbon|Atlantic/Faroe","Europe/Lisbon|Atlantic/Madeira","Europe/Lisbon|Portugal","Europe/Lisbon|WET","Europe/London|Europe/Belfast","Europe/London|Europe/Guernsey","Europe/London|Europe/Isle_of_Man","Europe/London|Europe/Jersey","Europe/London|GB","Europe/London|GB-Eire","Europe/Moscow|W-SU","Europe/Paris|Africa/Ceuta","Europe/Paris|Arctic/Longyearbyen","Europe/Paris|Atlantic/Jan_Mayen","Europe/Paris|CET","Europe/Paris|Europe/Amsterdam","Europe/Paris|Europe/Andorra","Europe/Paris|Europe/Belgrade","Europe/Paris|Europe/Berlin","Europe/Paris|Europe/Bratislava","Europe/Paris|Europe/Brussels","Europe/Paris|Europe/Budapest","Europe/Paris|Europe/Busingen","Europe/Paris|Europe/Copenhagen","Europe/Paris|Europe/Gibraltar","Europe/Paris|Europe/Ljubljana","Europe/Paris|Europe/Luxembourg","Europe/Paris|Europe/Madrid","Europe/Paris|Europe/Malta","Europe/Paris|Europe/Monaco","Europe/Paris|Europe/Oslo","Europe/Paris|Europe/Podgorica","Europe/Paris|Europe/Prague","Europe/Paris|Europe/Rome","Europe/Paris|Europe/San_Marino","Europe/Paris|Europe/Sarajevo","Europe/Paris|Europe/Skopje","Europe/Paris|Europe/Stockholm","Europe/Paris|Europe/Tirane","Europe/Paris|Europe/Vaduz","Europe/Paris|Europe/Vatican","Europe/Paris|Europe/Vienna","Europe/Paris|Europe/Warsaw","Europe/Paris|Europe/Zagreb","Europe/Paris|Europe/Zurich","Europe/Paris|Poland","Europe/Ulyanovsk|Europe/Astrakhan","Pacific/Auckland|Antarctica/McMurdo","Pacific/Auckland|Antarctica/South_Pole","Pacific/Auckland|NZ","Pacific/Chatham|NZ-CHAT","Pacific/Easter|Chile/EasterIsland","Pacific/Fakaofo|Etc/GMT-13","Pacific/Fakaofo|Pacific/Enderbury","Pacific/Galapagos|Etc/GMT+6","Pacific/Gambier|Etc/GMT+9","Pacific/Guadalcanal|Antarctica/Macquarie","Pacific/Guadalcanal|Etc/GMT-11","Pacific/Guadalcanal|Pacific/Efate","Pacific/Guadalcanal|Pacific/Kosrae","Pacific/Guadalcanal|Pacific/Noumea","Pacific/Guadalcanal|Pacific/Pohnpei","Pacific/Guadalcanal|Pacific/Ponape","Pacific/Guam|Pacific/Saipan","Pacific/Honolulu|HST","Pacific/Honolulu|Pacific/Johnston","Pacific/Honolulu|US/Hawaii","Pacific/Kiritimati|Etc/GMT-14","Pacific/Niue|Etc/GMT+11","Pacific/Pago_Pago|Pacific/Midway","Pacific/Pago_Pago|Pacific/Samoa","Pacific/Pago_Pago|US/Samoa","Pacific/Pitcairn|Etc/GMT+8","Pacific/Port_Moresby|Antarctica/DumontDUrville","Pacific/Port_Moresby|Etc/GMT-10","Pacific/Port_Moresby|Pacific/Chuuk","Pacific/Port_Moresby|Pacific/Truk","Pacific/Port_Moresby|Pacific/Yap","Pacific/Tahiti|Etc/GMT+10","Pacific/Tahiti|Pacific/Rarotonga"],countries:["AD|Europe/Andorra","AE|Asia/Dubai","AF|Asia/Kabul","AG|America/Port_of_Spain America/Antigua","AI|America/Port_of_Spain America/Anguilla","AL|Europe/Tirane","AM|Asia/Yerevan","AO|Africa/Lagos Africa/Luanda","AQ|Antarctica/Casey Antarctica/Davis Antarctica/DumontDUrville Antarctica/Mawson Antarctica/Palmer Antarctica/Rothera Antarctica/Syowa Antarctica/Troll Antarctica/Vostok Pacific/Auckland Antarctica/McMurdo","AR|America/Argentina/Buenos_Aires America/Argentina/Cordoba America/Argentina/Salta America/Argentina/Jujuy America/Argentina/Tucuman America/Argentina/Catamarca America/Argentina/La_Rioja America/Argentina/San_Juan America/Argentina/Mendoza America/Argentina/San_Luis America/Argentina/Rio_Gallegos America/Argentina/Ushuaia","AS|Pacific/Pago_Pago","AT|Europe/Vienna","AU|Australia/Lord_Howe Antarctica/Macquarie Australia/Hobart Australia/Currie Australia/Melbourne Australia/Sydney Australia/Broken_Hill Australia/Brisbane Australia/Lindeman Australia/Adelaide Australia/Darwin Australia/Perth Australia/Eucla","AW|America/Curacao America/Aruba","AX|Europe/Helsinki Europe/Mariehamn","AZ|Asia/Baku","BA|Europe/Belgrade Europe/Sarajevo","BB|America/Barbados","BD|Asia/Dhaka","BE|Europe/Brussels","BF|Africa/Abidjan Africa/Ouagadougou","BG|Europe/Sofia","BH|Asia/Qatar Asia/Bahrain","BI|Africa/Maputo Africa/Bujumbura","BJ|Africa/Lagos Africa/Porto-Novo","BL|America/Port_of_Spain America/St_Barthelemy","BM|Atlantic/Bermuda","BN|Asia/Brunei","BO|America/La_Paz","BQ|America/Curacao America/Kralendijk","BR|America/Noronha America/Belem America/Fortaleza America/Recife America/Araguaina America/Maceio America/Bahia America/Sao_Paulo America/Campo_Grande America/Cuiaba America/Santarem America/Porto_Velho America/Boa_Vista America/Manaus America/Eirunepe America/Rio_Branco","BS|America/Nassau","BT|Asia/Thimphu","BW|Africa/Maputo Africa/Gaborone","BY|Europe/Minsk","BZ|America/Belize","CA|America/St_Johns America/Halifax America/Glace_Bay America/Moncton America/Goose_Bay America/Blanc-Sablon America/Toronto America/Nipigon America/Thunder_Bay America/Iqaluit America/Pangnirtung America/Atikokan America/Winnipeg America/Rainy_River America/Resolute America/Rankin_Inlet America/Regina America/Swift_Current America/Edmonton America/Cambridge_Bay America/Yellowknife America/Inuvik America/Creston America/Dawson_Creek America/Fort_Nelson America/Vancouver America/Whitehorse America/Dawson","CC|Indian/Cocos","CD|Africa/Maputo Africa/Lagos Africa/Kinshasa Africa/Lubumbashi","CF|Africa/Lagos Africa/Bangui","CG|Africa/Lagos Africa/Brazzaville","CH|Europe/Zurich","CI|Africa/Abidjan","CK|Pacific/Rarotonga","CL|America/Santiago America/Punta_Arenas Pacific/Easter","CM|Africa/Lagos Africa/Douala","CN|Asia/Shanghai Asia/Urumqi","CO|America/Bogota","CR|America/Costa_Rica","CU|America/Havana","CV|Atlantic/Cape_Verde","CW|America/Curacao","CX|Indian/Christmas","CY|Asia/Nicosia Asia/Famagusta","CZ|Europe/Prague","DE|Europe/Zurich Europe/Berlin Europe/Busingen","DJ|Africa/Nairobi Africa/Djibouti","DK|Europe/Copenhagen","DM|America/Port_of_Spain America/Dominica","DO|America/Santo_Domingo","DZ|Africa/Algiers","EC|America/Guayaquil Pacific/Galapagos","EE|Europe/Tallinn","EG|Africa/Cairo","EH|Africa/El_Aaiun","ER|Africa/Nairobi Africa/Asmara","ES|Europe/Madrid Africa/Ceuta Atlantic/Canary","ET|Africa/Nairobi Africa/Addis_Ababa","FI|Europe/Helsinki","FJ|Pacific/Fiji","FK|Atlantic/Stanley","FM|Pacific/Chuuk Pacific/Pohnpei Pacific/Kosrae","FO|Atlantic/Faroe","FR|Europe/Paris","GA|Africa/Lagos Africa/Libreville","GB|Europe/London","GD|America/Port_of_Spain America/Grenada","GE|Asia/Tbilisi","GF|America/Cayenne","GG|Europe/London Europe/Guernsey","GH|Africa/Accra","GI|Europe/Gibraltar","GL|America/Godthab America/Danmarkshavn America/Scoresbysund America/Thule","GM|Africa/Abidjan Africa/Banjul","GN|Africa/Abidjan Africa/Conakry","GP|America/Port_of_Spain America/Guadeloupe","GQ|Africa/Lagos Africa/Malabo","GR|Europe/Athens","GS|Atlantic/South_Georgia","GT|America/Guatemala","GU|Pacific/Guam","GW|Africa/Bissau","GY|America/Guyana","HK|Asia/Hong_Kong","HN|America/Tegucigalpa","HR|Europe/Belgrade Europe/Zagreb","HT|America/Port-au-Prince","HU|Europe/Budapest","ID|Asia/Jakarta Asia/Pontianak Asia/Makassar Asia/Jayapura","IE|Europe/Dublin","IL|Asia/Jerusalem","IM|Europe/London Europe/Isle_of_Man","IN|Asia/Kolkata","IO|Indian/Chagos","IQ|Asia/Baghdad","IR|Asia/Tehran","IS|Atlantic/Reykjavik","IT|Europe/Rome","JE|Europe/London Europe/Jersey","JM|America/Jamaica","JO|Asia/Amman","JP|Asia/Tokyo","KE|Africa/Nairobi","KG|Asia/Bishkek","KH|Asia/Bangkok Asia/Phnom_Penh","KI|Pacific/Tarawa Pacific/Enderbury Pacific/Kiritimati","KM|Africa/Nairobi Indian/Comoro","KN|America/Port_of_Spain America/St_Kitts","KP|Asia/Pyongyang","KR|Asia/Seoul","KW|Asia/Riyadh Asia/Kuwait","KY|America/Panama America/Cayman","KZ|Asia/Almaty Asia/Qyzylorda Asia/Qostanay Asia/Aqtobe Asia/Aqtau Asia/Atyrau Asia/Oral","LA|Asia/Bangkok Asia/Vientiane","LB|Asia/Beirut","LC|America/Port_of_Spain America/St_Lucia","LI|Europe/Zurich Europe/Vaduz","LK|Asia/Colombo","LR|Africa/Monrovia","LS|Africa/Johannesburg Africa/Maseru","LT|Europe/Vilnius","LU|Europe/Luxembourg","LV|Europe/Riga","LY|Africa/Tripoli","MA|Africa/Casablanca","MC|Europe/Monaco","MD|Europe/Chisinau","ME|Europe/Belgrade Europe/Podgorica","MF|America/Port_of_Spain America/Marigot","MG|Africa/Nairobi Indian/Antananarivo","MH|Pacific/Majuro Pacific/Kwajalein","MK|Europe/Belgrade Europe/Skopje","ML|Africa/Abidjan Africa/Bamako","MM|Asia/Yangon","MN|Asia/Ulaanbaatar Asia/Hovd Asia/Choibalsan","MO|Asia/Macau","MP|Pacific/Guam Pacific/Saipan","MQ|America/Martinique","MR|Africa/Abidjan Africa/Nouakchott","MS|America/Port_of_Spain America/Montserrat","MT|Europe/Malta","MU|Indian/Mauritius","MV|Indian/Maldives","MW|Africa/Maputo Africa/Blantyre","MX|America/Mexico_City America/Cancun America/Merida America/Monterrey America/Matamoros America/Mazatlan America/Chihuahua America/Ojinaga America/Hermosillo America/Tijuana America/Bahia_Banderas","MY|Asia/Kuala_Lumpur Asia/Kuching","MZ|Africa/Maputo","NA|Africa/Windhoek","NC|Pacific/Noumea","NE|Africa/Lagos Africa/Niamey","NF|Pacific/Norfolk","NG|Africa/Lagos","NI|America/Managua","NL|Europe/Amsterdam","NO|Europe/Oslo","NP|Asia/Kathmandu","NR|Pacific/Nauru","NU|Pacific/Niue","NZ|Pacific/Auckland Pacific/Chatham","OM|Asia/Dubai Asia/Muscat","PA|America/Panama","PE|America/Lima","PF|Pacific/Tahiti Pacific/Marquesas Pacific/Gambier","PG|Pacific/Port_Moresby Pacific/Bougainville","PH|Asia/Manila","PK|Asia/Karachi","PL|Europe/Warsaw","PM|America/Miquelon","PN|Pacific/Pitcairn","PR|America/Puerto_Rico","PS|Asia/Gaza Asia/Hebron","PT|Europe/Lisbon Atlantic/Madeira Atlantic/Azores","PW|Pacific/Palau","PY|America/Asuncion","QA|Asia/Qatar","RE|Indian/Reunion","RO|Europe/Bucharest","RS|Europe/Belgrade","RU|Europe/Kaliningrad Europe/Moscow Europe/Simferopol Europe/Kirov Europe/Astrakhan Europe/Volgograd Europe/Saratov Europe/Ulyanovsk Europe/Samara Asia/Yekaterinburg Asia/Omsk Asia/Novosibirsk Asia/Barnaul Asia/Tomsk Asia/Novokuznetsk Asia/Krasnoyarsk Asia/Irkutsk Asia/Chita Asia/Yakutsk Asia/Khandyga Asia/Vladivostok Asia/Ust-Nera Asia/Magadan Asia/Sakhalin Asia/Srednekolymsk Asia/Kamchatka Asia/Anadyr","RW|Africa/Maputo Africa/Kigali","SA|Asia/Riyadh","SB|Pacific/Guadalcanal","SC|Indian/Mahe","SD|Africa/Khartoum","SE|Europe/Stockholm","SG|Asia/Singapore","SH|Africa/Abidjan Atlantic/St_Helena","SI|Europe/Belgrade Europe/Ljubljana","SJ|Europe/Oslo Arctic/Longyearbyen","SK|Europe/Prague Europe/Bratislava","SL|Africa/Abidjan Africa/Freetown","SM|Europe/Rome Europe/San_Marino","SN|Africa/Abidjan Africa/Dakar","SO|Africa/Nairobi Africa/Mogadishu","SR|America/Paramaribo","SS|Africa/Juba","ST|Africa/Sao_Tome","SV|America/El_Salvador","SX|America/Curacao America/Lower_Princes","SY|Asia/Damascus","SZ|Africa/Johannesburg Africa/Mbabane","TC|America/Grand_Turk","TD|Africa/Ndjamena","TF|Indian/Reunion Indian/Kerguelen","TG|Africa/Abidjan Africa/Lome","TH|Asia/Bangkok","TJ|Asia/Dushanbe","TK|Pacific/Fakaofo","TL|Asia/Dili","TM|Asia/Ashgabat","TN|Africa/Tunis","TO|Pacific/Tongatapu","TR|Europe/Istanbul","TT|America/Port_of_Spain","TV|Pacific/Funafuti","TW|Asia/Taipei","TZ|Africa/Nairobi Africa/Dar_es_Salaam","UA|Europe/Simferopol Europe/Kiev Europe/Uzhgorod Europe/Zaporozhye","UG|Africa/Nairobi Africa/Kampala","UM|Pacific/Pago_Pago Pacific/Wake Pacific/Honolulu Pacific/Midway","US|America/New_York America/Detroit America/Kentucky/Louisville America/Kentucky/Monticello America/Indiana/Indianapolis America/Indiana/Vincennes America/Indiana/Winamac America/Indiana/Marengo America/Indiana/Petersburg America/Indiana/Vevay America/Chicago America/Indiana/Tell_City America/Indiana/Knox America/Menominee America/North_Dakota/Center America/North_Dakota/New_Salem America/North_Dakota/Beulah America/Denver America/Boise America/Phoenix America/Los_Angeles America/Anchorage America/Juneau America/Sitka America/Metlakatla America/Yakutat America/Nome America/Adak Pacific/Honolulu","UY|America/Montevideo","UZ|Asia/Samarkand Asia/Tashkent","VA|Europe/Rome Europe/Vatican","VC|America/Port_of_Spain America/St_Vincent","VE|America/Caracas","VG|America/Port_of_Spain America/Tortola","VI|America/Port_of_Spain America/St_Thomas","VN|Asia/Bangkok Asia/Ho_Chi_Minh","VU|Pacific/Efate","WF|Pacific/Wallis","WS|Pacific/Apia","YE|Asia/Riyadh Asia/Aden","YT|Africa/Nairobi Indian/Mayotte","ZA|Africa/Johannesburg","ZM|Africa/Maputo Africa/Lusaka","ZW|Africa/Maputo Africa/Harare"]}),o}),window.CloudStreamerSDK=function(e,t){console.log(t);var n=this;n.options=t||{},n.conn=null,n.cm=null,n.mCameraID=null,n.camera=null,n.sharedKey=null,n.mAccessToken=null,n.streamer=document.getElementById(e),n.m={},n.conn=new CloudShareConnection(n.options),n.config={},n.config.ws_port=8888,n.config.wss_port=8883,n.config.host="cam.skyvr.videoexpertsgroup.com",n.api_host=n.options.cloud_domain||"web.skyvr.videoexpertsgroup.com",n.api_port=null;var a=n.api_security_port=null;n.streamer.classList.add("cloudstreamer"),n.streamer.classList.add("green"),n.streamer.classList.add("black"),n.streamer.innerHTML='<div class="cloudstreamer-loader" style="display: none"></div><div class="cloudstreamer-error" style="display: none">\t<div class="cloudstreamer-error-text" style="display: none"></div></div><div class="cloudstreamer-watermark"></div><div class="cloudstreamer-sdkversion">SDK '+CloudSDK.version+'</div><div class="cloudstreamer-black-screen" style="display: none">\t\t<div class="cloudstreamer-watermark"></div>\t\t<div class="cloudstreamer-sdkversion">SDK '+CloudSDK.version+'</div></div><div class="cloudplayer-controls">\t<div class="cloudplayer-stop" style="display: none"></div>\t<div class="cloudplayer-play" style="display: none"></div>\t<div class="cloudplayer-time"></div>\t<div class="cloudplayer-fullscreen"></div></div><video class="cloudstreamer-webcam-video" autoplay="true"></video>';var o=n.streamer.getElementsByClassName("cloudstreamer-loader")[0],r=n.streamer.getElementsByClassName("cloudstreamer-error")[0],i=n.streamer.getElementsByClassName("cloudstreamer-error-text")[0],s=n.streamer.getElementsByClassName("cloudstreamer-webcam-video")[0],l=n.streamer.getElementsByClassName("cloudplayer-stop")[0],c=n.streamer.getElementsByClassName("cloudplayer-play")[0],u=!1;function d(){u&&(o.style.display="none",u=!1)}n._setError=function(e){setTimeout(n.stop,10),n.mLastError=e,n.mCallback_onError&&n.mCallback_onError(n,e)},n.showErrorText=function(e){d(),r.style.display="inline-block",i.style.display="inline-block",i.innerHTML=e,l.style.display="none",c.style.display="none",s.srcObject=null},n.setSource=function(e){if(r.style.display="none",i.style.display="none",c.style.display="none",!e||""===e){var t="Access token is required";return console.error(t),n.showErrorText(t),CloudReturnCode.ERROR_INVALID_SOURCE}if("https:"==location.protocol){try{var a=atob(e),a=JSON.parse(a);console.log(a),a.token&&a.camid&&a.access&&""!==a.token&&""!==a.camid&&""!==a.access&&(n.sharedKey=a.token,n.mCameraID=a.camid),a.api&&(n.api_host=a.api,console.log("self.api_host: ",n.api_host)),a.api_p&&(n.api_port=a.api_p,console.log("self.api_port: ",n.api_port)),a.api_security_port&&(n.api_security_port=a.api_security_port,console.log("self.api_security_port: ",n.api_security_port))}catch(e){t="Invalid access token format";return console.error(t),CloudReturnCode.ERROR_INVALID_SOURCE}t=n.api_host;n.api_host==(n.options.cloud_domain||"web.skyvr.videoexpertsgroup.com")?t="https://"+n.api_host:"https:"===location.protocol?(t="https://"+n.api_host,null!=n.api_secutiry_port&&(t+=":"+n.api_secutiry_port)):"http:"!==location.protocol&&"file:"!==location.protocol||(t="http://"+n.api_host,null!=n.api_secutiry_port&&(t+=":"+n.api_secutiry_port)),n.conn.ServiceProviderUrl=t+"/",n.conn.open(n.sharedKey),n.mAccessToken=e,c.style.display=""}else n.showErrorText("Streamer is only available with HTTPS connection")},n.getSource=function(){return n.mAccessToken||CloudReturnCode.ERROR_SOURCE_NOT_CONFIGURED},n.start=function(){if(!n.sharedKey)return CloudReturnCode.ERROR_SOURCE_NOT_CONFIGURED;console.warn("[CloudStreamerSDK] Start"),n.stop("by_strm_sdk_1"),navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(function(e){s.srcObject=e,n.conn&&n.conn._getAPI().cameraStreamUrls_webrtc(n.mCameraID).done(function(e){var t;console.log("stream_urls: ",e),e.webrtc?(t=CloudHelpers.promise(),0<CloudHelpers.compareVersions(CloudPlayerWebRTC2.version,e.webrtc.version)?(console.warn("Expected version webrtc.version (v"+e.webrtc.version+")  mismatch with included CloudPlayerWebRTC (v"+CloudPlayerWebRTC2.version+")"),t=CloudHelpers.requestJS(e.webrtc.scripts.player,function(e){for(e=e.replace("CloudPlayerWebRTC =","CloudPlayerWebRTC2 =");-1!==e.indexOf("CloudPlayerWebRTC.");)e=e.replace("CloudPlayerWebRTC.","CloudPlayerWebRTC2.");return e})):t.resolve(),t.done(function(){(a=new CloudPlayerWebRTC2(null,e.webrtc.connection_url,e.webrtc.ice_servers,{send_video:!0,send_audio:!0})).startWS(),l.style.display="",c.style.display="none"}).fail(function(e){console.error("err: ",e),n.showErrorText("Problem with streaming protocol")})):n.showErrorText("Channel does not support WebRTC streamer")}).fail(function(e){console.error("err: ",e),n.showErrorText("Channel for streaming is not found")})}).catch(function(e){n.sharedKey=null,console.error(e),console.error("Something went wrong! ",e),-1!=(""+e).indexOf("Requested device is not found")&&n.showErrorText("Camera is not found")})},c.onclick=n.start,n.stop=function(){if(l.style.display="none",c.style.display=n.mAccessToken?"":"none",s.srcObject=null,!n.sharedKey)return CloudReturnCode.ERROR_SOURCE_NOT_CONFIGURED;try{a&&a.stopWS()}catch(e){console.error(e)}},l.onclick=n.stop,n.initFullscreenControls=function(){var e,t,a=n.streamer.getElementsByClassName("cloudplayer-fullscreen")[0];n.changedFullscreen=function(){console.log("changedFullscreen"),document.webkitIsFullScreen?(e=n.player.style.height,t=n.player.style.width,n.streamer.style.height="100%",n.streamer.style.width="100%",console.log("changedFullscreen -> fullscreen")):(n.streamer.style.height=e,n.streamer.style.width=t,console.log("changedFullscreen -> NOT fullscreen"))},document.addEventListener&&(document.addEventListener("webkitfullscreenchange",n.changedFullscreen,!1),document.addEventListener("mozfullscreenchange",n.changedFullscreen,!1),document.addEventListener("fullscreenchange",n.changedFullscreen,!1),document.addEventListener("MSFullscreenChange",n.changedFullscreen,!1)),n.fullscreen=function(){console.log("fullscreen: clicked"),1==document.webkitIsFullScreen?document.webkitCancelFullScreen():document.mozFullScreen?document.mozCancelFullScreen():document.msFullscreenElement&&null!=document.msFullscreenElement?document.msExitFullscreen():n.streamer.mozRequestFullScreen?n.streamer.mozRequestFullScreen():n.streamer.requestFullscreen?n.streamer.requestFullscreen():n.streamer.webkitRequestFullscreen?n.streamer.webkitRequestFullscreen():n.streamer.msRequestFullscreen&&n.streamer.msRequestFullscreen()},a.onclick=n.fullscreen},n.initFullscreenControls()},window.CloudStreamerFlash=function(e,t){console.log(t);var o=this;o.options=t||{},o.conn=null,o.cm=null,o.mCameraID=null,o.camera=null,o.sharedKey=null,o.mAccessToken="",o.streamer=document.getElementById(e),o.m={},o.conn=new CloudShareConnection(o.options),o.config={},o.config.ws_port=8888,o.config.wss_port=8883,o.config.host="cam.skyvr.videoexpertsgroup.com",o.streamer.classList.add("cloudstreamer"),o.streamer.classList.add("green"),o.streamer.classList.add("black"),StreamerSWF.log=function(e){console.log("[CloudStreamerFlash]",e)},StreamerSWF.error=function(e){console.error("[CloudStreamerFlash]",e)},StreamerSWF.warn=function(e){console.warn("[CloudStreamerFlash]",e)},StreamerSWF.startedPublish=function(){console.log("[CloudStreamerFlash] publishing started")},StreamerSWF.stoppedPublish=function(){console.log("[CloudStreamerFlash] publishing stopped")},StreamerSWF.activityLevel=function(e){},o.streamer.innerHTML='<div class="cloudstreamer-loader" style="display: none"></div><div class="cloudstreamer-error" style="display: none">\t<div class="cloudstreamer-error-text" style="display: none"></div></div><div class="cloudstreamer-watermark"></div><div class="cloudstreamer-sdkversion">SDK '+CloudSDK.version+'</div><div class="cloudstreamer-black-screen" style="display: none">\t\t<div class="cloudstreamer-watermark"></div>\t\t<div class="cloudstreamer-sdkversion">SDK '+CloudSDK.version+'</div></div><object class="streamer-swf" id="streamer_swf" type="application/x-shockwave-flash" data="'+CloudSDK.streamer_swf+'" width="100%" height="100%" ><param name="movie" value="'+CloudSDK.streamer_swf+'" /><embed src="'+CloudSDK.streamer_swf+'"><param name="allowScriptAccess" value="always"/><param value="allowNetworking" value="all"/><param name="wmode" value="transparent"/><param name="menu" value="false" /></object>';var a=o.streamer.getElementsByClassName("cloudstreamer-loader")[0],n=o.streamer.getElementsByClassName("cloudstreamer-error")[0],r=o.streamer.getElementsByClassName("cloudstreamer-error-text")[0];o.streamer.getElementsByClassName("streamer-swf")[0];console.log(StreamerSWF.flash()),o.onStarted=function(e){console.log("[CloudStreamerFlash] activate streaming to rtmp_url: ",e),StreamerSWF.activate(e,"PCMU")};var i=!(o.onStopped=function(){console.log("[CloudStreamerFlash] deactivate"),StreamerSWF.deactivate()});function s(){i&&(a.style.display="none",i=!1)}o._setError=function(e){setTimeout(o.stop,10),o.mLastError=e,o.mCallback_onError&&o.mCallback_onError(o,e)},o.showErrorText=function(e){s(),n.style.display="inline-block",r.style.display="inline-block",r.innerHTML=e},o.setSource=function(e){if(n.style.display="none",r.style.display="none",!e||""===e){var t="Access token required";return console.error(t),o.showErrorText(t),CloudReturnCode.ERROR_INVALID_SOURCE}if(CloudHelpers.isMobile())o.showErrorText("Mobile streamer is not available yet");else if(CloudHelpers.isChrome())o.showErrorText("Streamer is not available yet for Chrome. But you can open this page in Edge or Firefox to start streaming from your web camera.");else if(CloudHelpers.supportFlash()||!CloudHelpers.isFireFox()){if("https:"!=window.location.protocol){try{var a=atob(e),a=JSON.parse(a);console.log(a),a.token&&a.camid&&a.access&&""!==a.token&&""!==a.camid&&""!==a.access&&(o.sharedKey=a.token,o.mCameraID=a.camid),a.svcp&&""!=a.svcp&&(o.svcp_url=a.svcp,console.log("self.svcp_url: ",o.svcp_url))}catch(e){t="Invalid access token format";return console.error(t),CloudReturnCode.ERROR_INVALID_SOURCE}return o.mAccessToken=e,null!=o.svcp_url&&(o.conn.ServiceProviderUrl=o.svcp_url,e=CloudHelpers.parseUri(o.svcp_url),o.config.host=e.host),o.conn.open(o.sharedKey),o.conn?(o.cm=new CloudCameraList(o.conn),o.cm.getCamera(o.mCameraID).done(function(e){o.mCamera=e,console.log("camera: ",o.mCamera._origJson()),o.start()}).fail(function(e){o.showErrorText("Channel for streaming not found")}),CloudReturnCode.OK):CloudReturnCode.ERROR_NO_CLOUD_CONNECTION}o.showErrorText("Streamer are not available yet with https")}else o.showErrorText("In Firefox Streamer available using by flash now.<br>Please install flash <a href='https://get.adobe.com/flashplayer' target='_blank'>https://get.adobe.com/flashplayer</a><br> or maybe enable Plugin 'Shockwave Flash' in your browser <a href='about:addons' target='_blank'>about:addons</a>.")},o.getSource=function(){return o.sharedKey?o.mAccessToken:CloudReturnCode.ERROR_SOURCE_NOT_CONFIGURED};var l=null;function c(){clearInterval(l)}o.start=function(){if(!o.mCamera)return CloudReturnCode.ERROR_SOURCE_NOT_CONFIGURED;if(!StreamerSWF.flash().vjs_activate)return c(),void(l=setInterval(function(){StreamerSWF.flash().vjs_activate&&(o.start(),c())},1e3));console.warn("[CloudStreamerFlash] Start"),o.stop("by_strm_sdk_1");var e=o.mCamera.getCameraManagerID();o.mCamera._getConn()._getAPI().resetCameraManager(e,{}).done(function(e){console.log(e),o.config.token=e.token,o.config.camid=o.mCamera.getID(),o.initWebSocket()}).fail(function(e){console.error(e)})},o.stop=function(){if(c(),!o.camera)return CloudReturnCode.ERROR_SOURCE_NOT_CONFIGURED;if(console.warn("Stop"),o.ws&&o.ws.socket)try{o.ws.socket.close()}catch(e){console.error(e)}try{StreamerSWF.deactivate()}catch(e){console.error(e)}},o.initWebSocket=function(){var e=o.config.srv||o.config.host;if(o.ws={},console.log("self.config.host: "+o.config.host),console.log("self.config.srv: "+o.config.srv),"http:"!=window.location.protocol&&"file:"!=window.location.protocol)return"https:"==window.location.protocol?void console.error("Not supported https yet"):void console.error("Expected protocol http or https");e="ws://"+e+":"+o.config.ws_port,e+="/ctl/NEW/"+o.config.token+"/",o.ws.socket=new WebSocket(e),o.ws.socket.onopen=function(){console.log("WS Opened"),o._register()},o.ws.socket.onclose=function(e){console.log("Closed")},o.ws.socket.onmessage=function(e){console.log("Received: "+e.data);try{var t=JSON.parse(e.data),a=t.cmd;o.handlers[a]?o.handlers[a](t):console.warn("Not found handler "+a)}catch(e){console.error(e)}},o.ws.socket.onerror=function(e){console.error("Error: "+e.message)}},o.m_nMessageID=0,o.makeCommand=function(e){return o.m_nMessageID++,{cmd:e,msgid:o.m_nMessageID}},o.makeCommandDone=function(e,t,a){var n=o.makeCommand("done");return n.orig_cmd=e,n.refid=t,n.status=a,n},o._register=function(){var e=o.makeCommand("register");e.pwd="",e.reg_token=o.config.token,e.ver="0.1",e.tz="UTC",e.vendor="web",o.sendMessage(e)},o.sendMessage=function(e){o.ws.socket.send(JSON.stringify(e))},o.handlers={},o.handlers.configure=function(e){e.server&&(o.config.srv=e.server),e.uuid&&(o.config.uuid=e.uuid)},o.handlers.bye=function(e){e.reason&&"RECONNECT"==e.reason&&setTimeout(function(){o.initWebSocket()},1200)},o.handlers.hello=function(e){e.media_server&&(o.config.media_server=e.media_server),e.sid&&(o.config.sid=e.sid),e.upload_url&&(o.config.upload_url=e.upload_url),o.sendMessage(o.makeCommandDone("hello",e.msgid,"OK"));e=o.makeCommand("cam_register");e.ip="127.0.0.1",e.uuid=o.config.uuid,e.brand="None",e.model="Unknown",e.sn="nope",e.type="cm",e.version="0",e.initial_mode="cloud",o.sendMessage(e)},o.handlers.cam_hello=function(e){o.sendMessage(o.makeCommandDone("cam_hello",e.msgid,"OK")),o.config.camid=e.cam_id,e.media_url&&(o.config.media_url=e.media_url),e.media_uri&&(o.config.media_server=e.media_uri),e.path&&(o.config.media_url=e.path)},o.handlers.get_cam_status=function(e){var t=o.makeCommand("cam_status");t.cam_id=o.config.camid,t.ip="127.0.0.1",t.activity=!0,t.streaming=!0,t.status_led=!1,o.sendMessage(t)},o.handlers.get_supported_streams=function(e){var t=o.makeCommand("supported_streams");t.cam_id=o.config.camid,t.audio_es=["Aud"],t.video_es=["Vid"],t.streams=[{id:"Main",video:"Vid",audio:"Aud"}],o.sendMessage(t)},o.stream_start_counter=0,o.handlers.stream_start=function(e){var t="rtmp://"+o.config.media_server+"/"+o.config.media_url+"Main";t+="?sid="+o.config.sid,console.log(t),0==o.stream_start_counter&&(o.stream_start_counter++,o.options.onStarted?o.options.onStarted(t):o.options.onStarted||o.onStarted(t)),o.sendMessage(o.makeCommandDone("stream_start",e.msgid,"OK"))},o.handlers.stream_stop=function(e){o.stream_start_counter--,o.sendMessage(o.makeCommandDone("stream_start",e.msgid,"OK")),0==o.stream_start_counter&&(o.options.onStopped?o.options.onStarted(stream_url):o.options.onStarted||o.onStopped())}};